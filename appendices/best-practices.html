<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Best practices &mdash; Abjad 3.11 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/abjad.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/uqbar.css" type="text/css" />
      <link rel="stylesheet" href="../_static/lightbox2/css/lightbox.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://abjad.github.ioappendices/best-practices.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script defer="defer" src="../_static/copybutton.js"></script>
        <script src="../_static/ga.js"></script>
        <script defer="defer" src="../_static/lightbox2/js/lightbox.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Changes" href="changes.html" />
    <link rel="prev" title="rmakers" href="../api/abjadext/rmakers/rmakers.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #55aaff" >


    <a href="../index.html" class="icon icon-home" alt="Documentation
    Home"> Abjad 3.11



    <img src="../_static/abjad-logo.png" class="logo" alt="Logo"/>

</a>




<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">First steps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../first_steps/audience.html">Audience</a></li>
<li class="toctree-l1"><a class="reference internal" href="../first_steps/macos.html">macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../first_steps/linux.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../first_steps/windows.html">Windows</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/containers.html">Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/containers-basic-operations-on.html">Containers, basic operations on</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/containers-retrieving-by-name.html">Containers, retrieving by name</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/containers-time-interpretation-of.html">Containers, time interpretation of</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/contexts-lilypond-type-of.html">Contexts, LilyPond type of</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/indicators.html">Indicators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/lilypond-files-preamble-of.html">LilyPond files, preamble of</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/lilypond-format-of-abjad-objects.html">LilyPond format, of Abjad objects</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/corpus-selection.html">Corpus, figure selection from</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/design-by-dyads.html">Design, by dyads</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/enumeration.html">Enumeration, of rhythmic cells</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/magic-square-from-twelve-tone-row.html">Magic square, from twelve-tone row</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/scales-diatonic.html">Scales, diatonic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/score-fragment-piano.html">Score fragment, piano</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">All classes &amp; functions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Abjad API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Best practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer-installation.html">Developer installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="lilypond-context-concatenation.html">LilyPond context concatenation</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Score gallery</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../gallery-2020.html">2020-16</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery-2015.html">2015-11</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery-2010.html">2010-00</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #55aaff" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Abjad</a>
      </nav>

      <div class="wy-nav-content">

<div class="rst-content">

    


    <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
    <div itemprop="articleBody">
    
  <section id="best-practices">
<h1>Best practices<a class="headerlink" href="#best-practices" title="Permalink to this heading">¶</a></h1>
<p>Incorporate the first group of best practices, below, while you’re still learning Abjad.
Incorporate the second and third groups after you’ve composed a full score.</p>
<hr class="docutils" />
<section id="for-beginners">
<h2>For beginners<a class="headerlink" href="#for-beginners" title="Permalink to this heading">¶</a></h2>
<p><strong>1. Write your code with a proper text editor.</strong> It doesn’t matter which one. But don’t
use TextEdit or Notepad because they’re not meant for editing code. And don’t use Jupyter
notebooks because you’ll confuse yourself by evaluating notebook cells out of order.</p>
<p><strong>2. Keep a test.py file handy at all times to try out small bits of code as you’re
working.</strong></p>
<p><strong>3. Black the code you write.</strong> Use Python’s black module from the beginning. Beginners
spend a lot of time wondering about spacing and layout of code. That time can be cut to
zero by formatting your code automatically with black.</p>
<p><strong>4. Name all contexts.</strong></p>
<div class="example docutils container">
<p>Not so good:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">()</span>
<span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">()</span>
<span class="n">abjad</span><span class="o">.</span><span class="n">Score</span><span class="p">()</span>
</pre></div>
</div>
<p>Good:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Upper_Voice&quot;</span><span class="p">)</span>
<span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Violin_Staff&quot;</span><span class="p">)</span>
<span class="n">abjad</span><span class="o">.</span><span class="n">Score</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Score&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>5. Contain notes, rests, chords in voices.</strong> Rather than staves.</p>
<div class="example docutils container">
<p>Not so good:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="s2">&quot;c&#39;4&#39; d&#39; e&#39; f&#39;&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Violin_Staff&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Good:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span><span class="s2">&quot;c&#39;4 d&#39; e&#39; f&#39;&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Music_Voice&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>6. Don’t try to work with Abjad like GUI software: replace copy-and-paste with object
creation.</strong></p>
<div class="example docutils container">
<p>Not so good:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">upper_voice</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span><span class="s2">&quot;c&#39;4 d&#39; e&#39; f&#39;&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Upper_Voice&quot;</span><span class="p">)</span>
<span class="n">lower_voice</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">upper_voice</span><span class="p">)</span>
<span class="n">lower_voice</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Lower_Voice&quot;</span>
</pre></div>
</div>
<p>Good:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;c&#39;4 d&#39; e&#39; f&#39;&quot;</span>
<span class="n">upper_voice</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Upper_Voice&quot;</span><span class="p">)</span>
<span class="n">lower_voice</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Lower_Voice&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>7. Externalize LilyPond markup in a separate file.</strong> Rather than defining them with
Abjad.</p>
<div class="example docutils container">
<p>Not so good:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">abjad</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\markup \bold italic \font-size #4 &quot;Allegro con moto&quot;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Good:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">abjad</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\my-score-allegro-con-moto&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>8. Externalize LilyPond context, layout, paper settings in a separate file.</strong> Rather
than defining them with Abjad.</p>
<div class="example docutils container">
<p>Not so good:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">abjad</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="o">.</span><span class="n">proportional_notation_duration</span> <span class="o">=</span> <span class="s2">&quot;#(ly:make-moment 1 32)&quot;</span>
<span class="n">abjad</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="o">.</span><span class="n">spacing_spanner</span><span class="o">.</span><span class="n">strict_grace_spacing</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">abjad</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="o">.</span><span class="n">spacing_spanner</span><span class="o">.</span><span class="n">strict_note_spacing</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">abjad</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="o">.</span><span class="n">spacing_spanner</span><span class="o">.</span><span class="n">uniform_stretching</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>Good:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>\<span class="n">context</span> <span class="p">{</span>
    \<span class="n">Score</span>
    <span class="n">proportionalNotationDuration</span> <span class="o">=</span> <span class="c1">#(ly:make-moment 1 32)</span>
    \<span class="n">override</span> <span class="n">SpacingSpanner</span><span class="o">.</span><span class="n">strict</span><span class="o">-</span><span class="n">grace</span><span class="o">-</span><span class="n">spacing</span> <span class="o">=</span> <span class="c1">##t</span>
    \<span class="n">override</span> <span class="n">SpacingSpanner</span><span class="o">.</span><span class="n">strict</span><span class="o">-</span><span class="n">note</span><span class="o">-</span><span class="n">spacing</span> <span class="o">=</span> <span class="c1">##t</span>
    \<span class="n">override</span> <span class="n">SpacingSpanner</span><span class="o">.</span><span class="n">uniform</span><span class="o">-</span><span class="n">stretching</span> <span class="o">=</span> <span class="c1">##t</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p><strong>9. Limit score mutation.</strong> Copying, splitting, meter-rewriting and the like are
computationally expensive. You can do them. But limit how much.</p>
<p><strong>10. If you do mutate the score, do it early.</strong> For example, rewrite meter before adding
many indicators; add articulations, slurs and the like after meter rewriting is done.</p>
</section>
<hr class="docutils" />
<section id="for-intermediate-users">
<h2>For intermediate users<a class="headerlink" href="#for-intermediate-users" title="Permalink to this heading">¶</a></h2>
<p><strong>1. Check everything into GitHub.</strong> There’s absolutely no good reason to forgo the
safekeeping that repositories provide. Right now the programmerly consensus strongly
favors Git (and GitHub), which we also recommend. However, <strong>limit your use of Git to
four or five extremely simple workflows.</strong> Because Git provides way too much rope with
which you can hang yourself. And because seemingly <strong>no one</strong> has a mental model of how
Git actually works. Many professional programmers seem to enjoy learning and using
advanced Git workflows. But absolutely do not do this. Add, commit, push, pull, clone,
that’s it. Keep it as simple as possible.</p>
<p><strong>2. Log the number of seconds it takes to compile each segment in your score.</strong> This
only takes three or four lines of code. Log how long it takes Abjad to interpret your
score segment. And log how long it takes LilyPond to interpret your score segment. Round
these numbers to the nearest second. Write the results to a file dedicated to the
purpose. Keep one timing file per score segment. Check your timing files into GitHub. You
won’t need to check your timing files very often. But if you ever experience a
performance slow-down in your code, your timing files will provide crucial information to
help you debug.</p>
<p><strong>3. Maintain a library of functions and other tools you use in multiple scores.</strong> Such a
library models parts of your compositional practice that apply across different scores
you compose. Write doctests for every function in your composition library.</p>
<p><strong>4. Output test your score segments.</strong> Use pytest to check that each segment in your
score writes exactly the same LilyPond file after a code change as before. This is easy
to do. This is also the only way you can refactor your composition library while making
sure that every single note in every single one of your existing scores remains the same.
This is an extremely important practice for intermediate users.</p>
<p><strong>5. Do not bother typehinting your code when you first start working with Python.</strong> In
fact, it will probably never be worth the effort to typehint your code. Abjad’s codebase
is typehinted, it is true. But experience shows that there appears to be almost no
benefit for Abjad users to typehint their own code. This means that mypy is one tool in
the Python ecosystem you can safely ignore.</p>
</section>
<hr class="docutils" />
<section id="for-advanced-users">
<h2>For advanced users<a class="headerlink" href="#for-advanced-users" title="Permalink to this heading">¶</a></h2>
<p><strong>1. Limit score segments to 2–4 pages of music.</strong> Performance and debugging will always
be easier. On the other hand, smaller score segments mean that you will have more work to
do managing clefs, key signatures and other persistent indicators across segment
boundaries. But the tradeoff is worth it.</p>
<p><strong>2. Limit unnecessary object orientation.</strong> The Python language designers have always
advised this. In Java, C++ and other languages, the unit of architecture is the class. In
Python, the unit of architecture is the module: this is why architecting in Python
doesn’t mean encapsulating absolutely everything you write in a class. The reason this
works is because Python’s idea of a namespace is so incredibly powerful: Python’s modules
were already inherently class-like before the addition to classes to the language.
Classes can still play an important role in the way your structure your code in Python,
of course. But the language itself will lead you towards architecting your code in
modules, not least for reasons of the central role played by Python’s import mechanism;
see below.</p>
<p><strong>3. Acknowledge the central role played by Python’s import mechanism in the structure of
any system written in Python.</strong> Initially this can be frustrating. If you define classes
A and B in separate modules then A may import B, or B may import A, but never both
without creating a circular dependency between the modules. On the other hand, if you
define classes A and B in the same module, then A and B can do whatever they want to /
with each other. The reason for this asymmetry is entirely to do with the central role
played by Python’s import mechanism: Python is designed to import packages once and once
only, and this fact limits collaboration patterns between the classes you write.
Practically, what this means is that you should be ok architecting your code a module
full of code, followed later by another module full of code. Dependencies between modules
then tend to show the chronological order modules were implemented. All these points
manifestly confuse beginners, as questions asked about module reimports on Stackoverflow
show. But these things all result from working in an interpreted, rather than compiled,
language: taking the order of interpretation seriously means constraining the way code is
layed out into modules on the filesystem.</p>
<p><strong>4. Run the Python profiler on your code every once in a while.</strong> To check the
performance of the code you write. Always profile before you optimize your code.</p>
<p><span class="author">[Bača (3.2)]</span></p>
</section>
</section>


    </div>
    
    </div>
    

<footer>
  
    <hr/>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="changes.html" class="btn btn-neutral float-right" title="Changes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../api/abjadext/rmakers/rmakers.html" class="btn btn-neutral float-left" title="rmakers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

</div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>