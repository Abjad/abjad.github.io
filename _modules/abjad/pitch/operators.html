

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>abjad.pitch.operators &mdash; Abjad 3.2 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/abjad.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/uqbar.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/lightbox2/css/lightbox.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  
  
  
    <link rel="canonical" href="https://abjad.github.io_modules/abjad/pitch/operators.html"/>
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script defer="defer" src="../../../_static/copybutton.js"></script>
        <script src="../../../_static/ga.js"></script>
        <script defer="defer" src="../../../_static/lightbox2/js/lightbox.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #cc3300" >
          


    <a href="../../../index.html" class="icon icon-home" alt="Documentation
    Home"> Abjad 3.2



    <img src="../../../_static/abjad-logo.png" class="logo" alt="Logo"/>

</a>




<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">First steps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../first_steps/audience.html">Audience</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../first_steps/macos.html">macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../first_steps/linux.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../first_steps/windows.html">Windows</a></li>
</ul>
<p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/about_the_docs.html">About the docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/containers.html">Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/containers_basic_operations_on.html">Containers, basic operations on</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/containers_retrieving_by_name.html">Containers, retrieving by name</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/containers_time_interpretation_of.html">Containers, time interpretation of</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/contexts_lilypond_type_of.html">Contexts, LilyPond type of</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/indicators.html">Indicators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/lilypond_files_preamble_of.html">LilyPond files, preamble of</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/corpus_selection.html">Corpus, figure selection from</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/design_by_dyads.html">Design, by dyads</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/enumeration.html">Enumeration, of rhythmic cells</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/score_fragment_piano.html">Score fragment, piano</a></li>
</ul>
<p class="caption"><span class="caption-text">All classes &amp; functions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api/index.html">Abjad API</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../appendices/best_practices.html">Best practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../appendices/changes.html">Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../appendices/community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../appendices/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../appendices/developer_installation.html">Developer installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../appendices/lilypond_context_concatenation.html">LilyPond context concatenation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../appendices/publications.html">Publications</a></li>
</ul>
<p class="caption"><span class="caption-text">Score gallery</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../gallery_2020.html">2016-20</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gallery_2015.html">2011-15</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gallery_2010.html">2000-10</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Abjad</a>
        
      </nav>


      <div class="wy-nav-content">

<div class="rst-content">

    


    <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
    <div itemprop="articleBody">
    
  <h1>Source code for abjad.pitch.operators</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">collections</span>

<span class="kn">from</span> <span class="nn">..</span> <span class="kn">import</span> <span class="n">markups</span>
<span class="kn">from</span> <span class="nn">..cyclictuple</span> <span class="kn">import</span> <span class="n">CyclicTuple</span>
<span class="kn">from</span> <span class="nn">..new</span> <span class="kn">import</span> <span class="n">new</span>
<span class="kn">from</span> <span class="nn">..pattern</span> <span class="kn">import</span> <span class="n">Pattern</span>
<span class="kn">from</span> <span class="nn">..sequence</span> <span class="kn">import</span> <span class="n">Sequence</span>
<span class="kn">from</span> <span class="nn">..storage</span> <span class="kn">import</span> <span class="n">StorageFormatManager</span>
<span class="kn">from</span> <span class="nn">..typedcollections</span> <span class="kn">import</span> <span class="n">TypedCollection</span>
<span class="kn">from</span> <span class="nn">.pitchclasses</span> <span class="kn">import</span> <span class="n">PitchClass</span>
<span class="kn">from</span> <span class="nn">.pitches</span> <span class="kn">import</span> <span class="n">NamedPitch</span><span class="p">,</span> <span class="n">Pitch</span>
<span class="kn">from</span> <span class="nn">.segments</span> <span class="kn">import</span> <span class="n">PitchClassSegment</span><span class="p">,</span> <span class="n">PitchSegment</span>


<div class="viewcode-block" id="CompoundOperator"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.CompoundOperator">[docs]</a><span class="k">class</span> <span class="nc">CompoundOperator</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compound operator.</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        Rotation followed by transposition:</span>

<span class="sd">        &gt;&gt;&gt; operator = abjad.CompoundOperator()</span>
<span class="sd">        &gt;&gt;&gt; operator = operator.rotate(n=1, stravinsky=True)</span>
<span class="sd">        &gt;&gt;&gt; operator = operator.transpose(n=2)</span>

<span class="sd">        &gt;&gt;&gt; str(operator)</span>
<span class="sd">        &#39;T2rs1&#39;</span>

<span class="sd">        &gt;&gt;&gt; pitch_classes = abjad.PitchClassSegment([0, 1, 4, 7])</span>
<span class="sd">        &gt;&gt;&gt; operator(pitch_classes)</span>
<span class="sd">        PitchClassSegment([2, 7, 8, 11])</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">### CLASS VARIABLES ###</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;_operators&quot;</span><span class="p">,</span> <span class="s2">&quot;_show_identity_operators&quot;</span><span class="p">)</span>

    <span class="c1">### INITIALIZER ###</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operators</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">show_identity_operators</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">operators</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">operators</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Sequence</span><span class="p">):</span>
                <span class="n">operators</span> <span class="o">=</span> <span class="p">(</span><span class="n">operators</span><span class="p">,)</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">operators</span><span class="p">)</span>
            <span class="n">operators</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">operators</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_operators</span> <span class="o">=</span> <span class="n">operators</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">show_identity_operators</span><span class="p">,</span> <span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_show_identity_operators</span> <span class="o">=</span> <span class="n">show_identity_operators</span>

    <span class="c1">### SPECIAL METHODS ###</span>

<div class="viewcode-block" id="CompoundOperator.__add__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.CompoundOperator.__add__">[docs]</a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Composes compound operator and ``operator``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; operator = abjad.CompoundOperator()</span>
<span class="sd">            &gt;&gt;&gt; operator = operator.transpose(n=1)</span>
<span class="sd">            &gt;&gt;&gt; operator = operator.multiply(n=5)</span>
<span class="sd">            &gt;&gt;&gt; str(operator)</span>
<span class="sd">            &#39;M5T1&#39;</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; inversion = abjad.Inversion()</span>
<span class="sd">            &gt;&gt;&gt; retrograde = abjad.Retrograde()</span>
<span class="sd">            &gt;&gt;&gt; transposition = abjad.Transposition(n=1)</span>

<span class="sd">            &gt;&gt;&gt; operator_1 = inversion + retrograde</span>
<span class="sd">            &gt;&gt;&gt; str(operator_1)</span>
<span class="sd">            &#39;IR&#39;</span>

<span class="sd">            &gt;&gt;&gt; operator_2 = inversion + transposition</span>
<span class="sd">            &gt;&gt;&gt; str(operator_2)</span>
<span class="sd">            &#39;IT1&#39;</span>

<span class="sd">            &gt;&gt;&gt; operator_3 = operator_1 + operator_2</span>
<span class="sd">            &gt;&gt;&gt; str(operator_3)</span>
<span class="sd">            &#39;IRIT1&#39;</span>

<span class="sd">            &gt;&gt;&gt; abjad.f(operator_3)</span>
<span class="sd">            abjad.CompoundOperator(</span>
<span class="sd">                operators=[</span>
<span class="sd">                    Transposition(n=1),</span>
<span class="sd">                    Inversion(),</span>
<span class="sd">                    Retrograde(),</span>
<span class="sd">                    Inversion(),</span>
<span class="sd">                    ],</span>
<span class="sd">                )</span>

<span class="sd">        Returns new compound operator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">operators</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operators</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">operator</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)):</span>
            <span class="n">operators</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">operator</span><span class="o">.</span><span class="n">operators</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">operators</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">operator</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)()</span>
        <span class="k">for</span> <span class="n">operator</span> <span class="ow">in</span> <span class="n">operators</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">_with_operator</span><span class="p">(</span><span class="n">operator</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="CompoundOperator.__call__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.CompoundOperator.__call__">[docs]</a>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls compound operator on ``argument``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; operator = abjad.CompoundOperator()</span>
<span class="sd">            &gt;&gt;&gt; operator = operator.rotate(n=1, stravinsky=True)</span>
<span class="sd">            &gt;&gt;&gt; operator = operator.transpose(n=2)</span>
<span class="sd">            &gt;&gt;&gt; str(operator)</span>
<span class="sd">            &#39;T2rs1&#39;</span>

<span class="sd">            &gt;&gt;&gt; segment = abjad.PitchClassSegment([0, 1, 4, 7])</span>
<span class="sd">            &gt;&gt;&gt; lilypond_file = abjad.illustrate(segment)</span>
<span class="sd">            &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">            &gt;&gt;&gt; transform = operator(segment)</span>
<span class="sd">            &gt;&gt;&gt; lilypond_file = abjad.illustrate(transform)</span>
<span class="sd">            &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">            &gt;&gt;&gt; transform</span>
<span class="sd">            PitchClassSegment([2, 7, 8, 11])</span>

<span class="sd">        Returns new object with type equal to that of ``argument``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">operators</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">argument</span>
        <span class="k">for</span> <span class="n">transform</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operators</span><span class="p">:</span>
            <span class="n">argument</span> <span class="o">=</span> <span class="n">transform</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">argument</span></div>

<div class="viewcode-block" id="CompoundOperator.__eq__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.CompoundOperator.__eq__">[docs]</a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when all initialization values of Abjad value object equal</span>
<span class="sd">        the initialization values of ``argument``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">StorageFormatManager</span><span class="o">.</span><span class="n">compare_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span></div>

<div class="viewcode-block" id="CompoundOperator.__hash__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.CompoundOperator.__hash__">[docs]</a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Hashes Abjad value object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">hash_values</span> <span class="o">=</span> <span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_hash_values</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="n">hash_values</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;unhashable type: </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="CompoundOperator.__radd__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.CompoundOperator.__radd__">[docs]</a>    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Composes ``operator`` and compound operator.</span>

<span class="sd">        ..  container</span>

<span class="sd">            &gt;&gt;&gt; operator = abjad.CompoundOperator()</span>
<span class="sd">            &gt;&gt;&gt; operator = operator.transpose(n=1)</span>
<span class="sd">            &gt;&gt;&gt; operator = operator.multiply(n=5)</span>
<span class="sd">            &gt;&gt;&gt; str(operator)</span>
<span class="sd">            &#39;M5T1&#39;</span>

<span class="sd">            &gt;&gt;&gt; retrograde = abjad.Retrograde()</span>
<span class="sd">            &gt;&gt;&gt; new_operator = retrograde + operator</span>
<span class="sd">            &gt;&gt;&gt; str(new_operator)</span>
<span class="sd">            &#39;RM5T1&#39;</span>

<span class="sd">            &gt;&gt;&gt; new_operator = operator + retrograde</span>
<span class="sd">            &gt;&gt;&gt; str(new_operator)</span>
<span class="sd">            &#39;M5T1R&#39;</span>

<span class="sd">        Returns new compound operator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">operators</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operators</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">operator</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)):</span>
            <span class="n">operators</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">operators</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">operators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">operator</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)()</span>
        <span class="k">for</span> <span class="n">operator</span> <span class="ow">in</span> <span class="n">operators</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">_with_operator</span><span class="p">(</span><span class="n">operator</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="CompoundOperator.__repr__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.CompoundOperator.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets interpreter representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_repr_format</span><span class="p">()</span></div>

<div class="viewcode-block" id="CompoundOperator.__str__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.CompoundOperator.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets string representation of compound operator.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Gets string:</span>

<span class="sd">            &gt;&gt;&gt; operator = abjad.CompoundOperator()</span>
<span class="sd">            &gt;&gt;&gt; operator = operator.rotate(n=1)</span>
<span class="sd">            &gt;&gt;&gt; operator = operator.transpose(n=2)</span>

<span class="sd">            &gt;&gt;&gt; str(operator)</span>
<span class="sd">            &#39;T2r1&#39;</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Gets string of empty operator:</span>

<span class="sd">            &gt;&gt;&gt; operator = abjad.CompoundOperator()</span>

<span class="sd">            &gt;&gt;&gt; str(operator)</span>
<span class="sd">            &#39;&#39;</span>

<span class="sd">        Returns string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">operators</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operators</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">operator</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">operators</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">operator</span><span class="o">.</span><span class="n">_is_identity_operator</span><span class="p">():</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_identity_operators</span><span class="p">:</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">operator</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">operator</span><span class="p">))</span>
        <span class="n">result</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

    <span class="c1">### PRIVATE METHODS ###</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_compose_operators</span><span class="p">(</span><span class="n">operator_1</span><span class="p">,</span> <span class="n">operator_2</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">operator_1</span><span class="p">,</span> <span class="n">CompoundOperator</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">operator_1</span><span class="o">.</span><span class="fm">__add__</span><span class="p">(</span><span class="n">operator_2</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">operator_2</span><span class="p">,</span> <span class="n">CompoundOperator</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">operator_2</span><span class="o">.</span><span class="fm">__radd__</span><span class="p">(</span><span class="n">operator_1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">CompoundOperator</span><span class="p">()</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">_with_operator</span><span class="p">(</span><span class="n">operator_2</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">_with_operator</span><span class="p">(</span><span class="n">operator_1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">_get_markup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">markups</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">operators</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operators</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">operator</span> <span class="ow">in</span> <span class="n">operators</span><span class="p">:</span>
            <span class="n">markup</span> <span class="o">=</span> <span class="n">operator</span><span class="o">.</span><span class="n">_get_markup</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_identity_operators</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">operator</span><span class="o">.</span><span class="n">_is_identity_operator</span><span class="p">():</span>
                <span class="n">markups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">markup</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">markups</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">markups</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">markup</span> <span class="o">=</span> <span class="n">markups</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">markup</span> <span class="o">=</span> <span class="n">markups</span><span class="o">.</span><span class="n">Markup</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">markups</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">markup</span>

    <span class="k">def</span> <span class="nf">_with_operator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">):</span>
        <span class="n">operators</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operators</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="n">operators</span> <span class="o">=</span> <span class="n">operators</span> <span class="o">+</span> <span class="p">[</span><span class="n">operator</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span>
            <span class="n">operators</span><span class="p">,</span> <span class="n">show_identity_operators</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">show_identity_operators</span>
        <span class="p">)</span>

    <span class="c1">### PUBLIC PROPERTIES ###</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">operators</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets operators.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Gets operators:</span>

<span class="sd">            &gt;&gt;&gt; operator = abjad.CompoundOperator()</span>
<span class="sd">            &gt;&gt;&gt; operator = operator.rotate(n=1)</span>
<span class="sd">            &gt;&gt;&gt; operator = operator.transpose(n=2)</span>

<span class="sd">            &gt;&gt;&gt; for operator_ in operator.operators:</span>
<span class="sd">            ...     operator_</span>
<span class="sd">            ...</span>
<span class="sd">            Rotation(n=1)</span>
<span class="sd">            Transposition(n=2)</span>

<span class="sd">        Returns list of operators.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_operators</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_operators</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">show_identity_operators</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when string representation of operator should show identity</span>
<span class="sd">        operators.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Does not show identity operators:</span>

<span class="sd">            &gt;&gt;&gt; operator = abjad.CompoundOperator()</span>
<span class="sd">            &gt;&gt;&gt; operator = operator.transpose(n=0)</span>
<span class="sd">            &gt;&gt;&gt; operator = operator.multiply(n=5)</span>

<span class="sd">            &gt;&gt;&gt; str(operator)</span>
<span class="sd">            &#39;M5&#39;</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Shows identity operators:</span>

<span class="sd">            &gt;&gt;&gt; operator = abjad.CompoundOperator(</span>
<span class="sd">            ...     show_identity_operators=True,</span>
<span class="sd">            ...     )</span>
<span class="sd">            &gt;&gt;&gt; operator = operator.transpose(n=0)</span>
<span class="sd">            &gt;&gt;&gt; operator = operator.multiply(n=5)</span>

<span class="sd">            &gt;&gt;&gt; str(operator)</span>
<span class="sd">            &#39;M5T0&#39;</span>

<span class="sd">        Defaults to none.</span>

<span class="sd">        Set to true, false or none.</span>

<span class="sd">        Returns true, false or none.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_show_identity_operators</span>

    <span class="c1">### PUBLIC METHODS ###</span>

<div class="viewcode-block" id="CompoundOperator.duplicate"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.CompoundOperator.duplicate">[docs]</a>    <span class="k">def</span> <span class="nf">duplicate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">counts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">indices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configures compound operator to duplicate pitches by ``counts``, with</span>
<span class="sd">        optional ``indices`` and ``period``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; operator = abjad.CompoundOperator()</span>
<span class="sd">            &gt;&gt;&gt; operator = operator.duplicate(counts=1)</span>
<span class="sd">            &gt;&gt;&gt; abjad.f(operator)</span>
<span class="sd">            abjad.CompoundOperator(</span>
<span class="sd">                operators=[</span>
<span class="sd">                    Duplication(counts=1),</span>
<span class="sd">                    ],</span>
<span class="sd">                )</span>

<span class="sd">        Returns new compound operator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">operator</span> <span class="o">=</span> <span class="n">Duplication</span><span class="p">(</span><span class="n">counts</span><span class="o">=</span><span class="n">counts</span><span class="p">,</span> <span class="n">indices</span><span class="o">=</span><span class="n">indices</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="n">period</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_with_operator</span><span class="p">(</span><span class="n">operator</span><span class="p">)</span></div>

<div class="viewcode-block" id="CompoundOperator.invert"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.CompoundOperator.invert">[docs]</a>    <span class="k">def</span> <span class="nf">invert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configures compound operator to invert pitches about ``axis``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; operator = abjad.CompoundOperator()</span>
<span class="sd">            &gt;&gt;&gt; operator = operator.invert(axis=2)</span>
<span class="sd">            &gt;&gt;&gt; abjad.f(operator)</span>
<span class="sd">            abjad.CompoundOperator(</span>
<span class="sd">                operators=[</span>
<span class="sd">                    Inversion(axis=NamedPitch(&quot;d&#39;&quot;)),</span>
<span class="sd">                    ],</span>
<span class="sd">                )</span>

<span class="sd">        Returns new compound operator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">operator</span> <span class="o">=</span> <span class="n">Inversion</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_with_operator</span><span class="p">(</span><span class="n">operator</span><span class="p">)</span></div>

<div class="viewcode-block" id="CompoundOperator.multiply"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.CompoundOperator.multiply">[docs]</a>    <span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configures compound operator to multiply pitch-classes by index ``n``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; operator = abjad.CompoundOperator()</span>
<span class="sd">            &gt;&gt;&gt; operator = operator.multiply(n=3)</span>
<span class="sd">            &gt;&gt;&gt; abjad.f(operator)</span>
<span class="sd">            abjad.CompoundOperator(</span>
<span class="sd">                operators=[</span>
<span class="sd">                    Multiplication(n=3),</span>
<span class="sd">                    ],</span>
<span class="sd">                )</span>

<span class="sd">        Returns new compound operator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">operator</span> <span class="o">=</span> <span class="n">Multiplication</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_with_operator</span><span class="p">(</span><span class="n">operator</span><span class="p">)</span></div>

<div class="viewcode-block" id="CompoundOperator.retrograde"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.CompoundOperator.retrograde">[docs]</a>    <span class="k">def</span> <span class="nf">retrograde</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configures compound operator to retrograde pitches.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; operator = abjad.CompoundOperator()</span>
<span class="sd">            &gt;&gt;&gt; operator = operator.retrograde()</span>
<span class="sd">            &gt;&gt;&gt; abjad.f(operator)</span>
<span class="sd">            abjad.CompoundOperator(</span>
<span class="sd">                operators=[</span>
<span class="sd">                    Retrograde(),</span>
<span class="sd">                    ],</span>
<span class="sd">                )</span>

<span class="sd">        Returns new compound operator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">operator</span> <span class="o">=</span> <span class="n">Retrograde</span><span class="p">(</span><span class="n">period</span><span class="o">=</span><span class="n">period</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_with_operator</span><span class="p">(</span><span class="n">operator</span><span class="p">)</span></div>

<div class="viewcode-block" id="CompoundOperator.rotate"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.CompoundOperator.rotate">[docs]</a>    <span class="k">def</span> <span class="nf">rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stravinsky</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configures compound operator to rotate pitches by index ``n``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; operator = abjad.CompoundOperator()</span>
<span class="sd">            &gt;&gt;&gt; operator = operator.rotate(n=-1)</span>
<span class="sd">            &gt;&gt;&gt; abjad.f(operator)</span>
<span class="sd">            abjad.CompoundOperator(</span>
<span class="sd">                operators=[</span>
<span class="sd">                    Rotation(n=-1),</span>
<span class="sd">                    ],</span>
<span class="sd">                )</span>

<span class="sd">        Returns new compound operator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">operator</span> <span class="o">=</span> <span class="n">Rotation</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="n">n</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="n">period</span><span class="p">,</span> <span class="n">stravinsky</span><span class="o">=</span><span class="n">stravinsky</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_with_operator</span><span class="p">(</span><span class="n">operator</span><span class="p">)</span></div>

<div class="viewcode-block" id="CompoundOperator.transpose"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.CompoundOperator.transpose">[docs]</a>    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configures compound operator to transpose pitches by index ``n``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; operator = abjad.CompoundOperator()</span>
<span class="sd">            &gt;&gt;&gt; operator = operator.transpose(n=1)</span>

<span class="sd">            &gt;&gt;&gt; abjad.f(operator)</span>
<span class="sd">            abjad.CompoundOperator(</span>
<span class="sd">                operators=[</span>
<span class="sd">                    Transposition(n=1),</span>
<span class="sd">                    ],</span>
<span class="sd">                )</span>

<span class="sd">        Returns new compound operator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">operator</span> <span class="o">=</span> <span class="n">Transposition</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_with_operator</span><span class="p">(</span><span class="n">operator</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Duplication"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Duplication">[docs]</a><span class="k">class</span> <span class="nc">Duplication</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Duplication.</span>

<span class="sd">    ..  container:: example:</span>

<span class="sd">        &gt;&gt;&gt; operator_ = abjad.Duplication(counts=2, period=4)</span>

<span class="sd">        &gt;&gt;&gt; abjad.f(operator_)</span>
<span class="sd">        abjad.Duplication(</span>
<span class="sd">            counts=2,</span>
<span class="sd">            period=4,</span>
<span class="sd">            )</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">### CLASS VARIABLES ###</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;_counts&quot;</span><span class="p">,</span> <span class="s2">&quot;_indices&quot;</span><span class="p">,</span> <span class="s2">&quot;_period&quot;</span><span class="p">)</span>

    <span class="c1">### INITIALIZER ###</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">counts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">indices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">counts</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">counts</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Sequence</span><span class="p">):</span>
                <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>
                <span class="n">counts</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">counts</span><span class="p">)</span>
                <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">counts</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">counts</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>
                <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">counts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_counts</span> <span class="o">=</span> <span class="n">counts</span>
        <span class="k">if</span> <span class="n">indices</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
            <span class="n">indices</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="n">indices</span>
        <span class="k">if</span> <span class="n">period</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">period</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">period</span><span class="p">)</span>
            <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">period</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_period</span> <span class="o">=</span> <span class="n">period</span>

    <span class="c1">### SPECIAL METHODS ###</span>

<div class="viewcode-block" id="Duplication.__call__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Duplication.__call__">[docs]</a>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls rotation on ``argument``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Duplicates once without period:</span>

<span class="sd">            &gt;&gt;&gt; operator_ = abjad.Duplication(counts=1)</span>
<span class="sd">            &gt;&gt;&gt; numbers = [1, 2, 3, 4]</span>
<span class="sd">            &gt;&gt;&gt; operator_(numbers)</span>
<span class="sd">            [1, 2, 3, 4, 1, 2, 3, 4]</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Duplicates twice without period:</span>

<span class="sd">            &gt;&gt;&gt; operator_ = abjad.Duplication(counts=2)</span>
<span class="sd">            &gt;&gt;&gt; pitch_classes = abjad.PitchClassSegment([0, 1, 4, 7])</span>
<span class="sd">            &gt;&gt;&gt; operator_(pitch_classes)</span>
<span class="sd">            PitchClassSegment([0, 1, 4, 7, 0, 1, 4, 7, 0, 1, 4, 7])</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Duplicates periodically:</span>

<span class="sd">            &gt;&gt;&gt; operator_ = abjad.Duplication(counts=1, period=3)</span>
<span class="sd">            &gt;&gt;&gt; pitches = abjad.PitchSegment(&quot;c&#39; d&#39; e&#39; f&#39; g&#39; a&#39; b&#39; c&#39;&#39;&quot;)</span>
<span class="sd">            &gt;&gt;&gt; for pitch in operator_(pitches):</span>
<span class="sd">            ...     pitch</span>
<span class="sd">            ...</span>
<span class="sd">            NamedPitch(&quot;c&#39;&quot;)</span>
<span class="sd">            NamedPitch(&quot;d&#39;&quot;)</span>
<span class="sd">            NamedPitch(&quot;e&#39;&quot;)</span>
<span class="sd">            NamedPitch(&quot;c&#39;&quot;)</span>
<span class="sd">            NamedPitch(&quot;d&#39;&quot;)</span>
<span class="sd">            NamedPitch(&quot;e&#39;&quot;)</span>
<span class="sd">            NamedPitch(&quot;f&#39;&quot;)</span>
<span class="sd">            NamedPitch(&quot;g&#39;&quot;)</span>
<span class="sd">            NamedPitch(&quot;a&#39;&quot;)</span>
<span class="sd">            NamedPitch(&quot;f&#39;&quot;)</span>
<span class="sd">            NamedPitch(&quot;g&#39;&quot;)</span>
<span class="sd">            NamedPitch(&quot;a&#39;&quot;)</span>
<span class="sd">            NamedPitch(&quot;b&#39;&quot;)</span>
<span class="sd">            NamedPitch(&quot;c&#39;&#39;&quot;)</span>
<span class="sd">            NamedPitch(&quot;b&#39;&quot;)</span>
<span class="sd">            NamedPitch(&quot;c&#39;&#39;&quot;)</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Duplicate indices:</span>

<span class="sd">            &gt;&gt;&gt; operator_ = abjad.Duplication(</span>
<span class="sd">            ...     counts=1,</span>
<span class="sd">            ...     indices=(0, -1),</span>
<span class="sd">            ...     )</span>
<span class="sd">            &gt;&gt;&gt; pitch_classes = abjad.PitchClassSegment([0, 1, 4, 7])</span>
<span class="sd">            &gt;&gt;&gt; operator_(pitch_classes)</span>
<span class="sd">            PitchClassSegment([0, 0, 1, 4, 7, 7])</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Duplicate indices periodically:</span>

<span class="sd">            &gt;&gt;&gt; operator_ = abjad.Duplication(</span>
<span class="sd">            ...     counts=1,</span>
<span class="sd">            ...     indices=(0,),</span>
<span class="sd">            ...     period=2,</span>
<span class="sd">            ...     )</span>
<span class="sd">            &gt;&gt;&gt; pitch_classes = abjad.PitchClassSegment([0, 1, 4, 7, 9])</span>
<span class="sd">            &gt;&gt;&gt; operator_(pitch_classes)</span>
<span class="sd">            PitchClassSegment([0, 0, 1, 4, 4, 7, 9, 9])</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Duplicate indices periodically with different counts:</span>

<span class="sd">            &gt;&gt;&gt; operator_ = abjad.Duplication(</span>
<span class="sd">            ...     counts=(1, 2),</span>
<span class="sd">            ...     indices=(0,),</span>
<span class="sd">            ...     period=2,</span>
<span class="sd">            ...     )</span>
<span class="sd">            &gt;&gt;&gt; pitch_classes = abjad.PitchClassSegment([0, 1, 4, 7, 9])</span>
<span class="sd">            &gt;&gt;&gt; operator_(pitch_classes)</span>
<span class="sd">            PitchClassSegment([0, 0, 1, 4, 4, 4, 7, 9, 9])</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Cyclic counts:</span>

<span class="sd">            &gt;&gt;&gt; operator_ = abjad.Duplication(counts=(0, 1, 2, 3))</span>
<span class="sd">            &gt;&gt;&gt; pitch_classes = abjad.PitchClassSegment([0, 1, 4, 7, 9])</span>
<span class="sd">            &gt;&gt;&gt; operator_(pitch_classes)</span>
<span class="sd">            PitchClassSegment([0, 1, 1, 4, 4, 4, 7, 7, 7, 7, 9])</span>

<span class="sd">        Returns new object with type equal to that of ``argument``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Sequence</span><span class="p">):</span>
            <span class="n">argument</span> <span class="o">=</span> <span class="p">(</span><span class="n">argument</span><span class="p">,)</span>

        <span class="n">counts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">counts</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">counts</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">counts</span> <span class="o">=</span> <span class="n">counts</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">counts</span> <span class="o">=</span> <span class="p">[</span><span class="n">_</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">counts</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">period</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">indices</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">counts</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">argument</span><span class="p">)(</span><span class="n">argument</span> <span class="o">*</span> <span class="n">counts</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">counts</span> <span class="o">=</span> <span class="n">CyclicTuple</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">argument</span><span class="p">):</span>
                    <span class="n">count</span> <span class="o">=</span> <span class="n">counts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">x</span><span class="p">]</span> <span class="o">*</span> <span class="n">count</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">TypedCollection</span><span class="p">):</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">new</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">items</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">argument</span><span class="p">)(</span><span class="n">result</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">result</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">counts</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">counts</span> <span class="o">=</span> <span class="p">[</span><span class="n">counts</span><span class="p">]</span>
        <span class="n">counts</span> <span class="o">=</span> <span class="n">CyclicTuple</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">indices</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">TypedCollection</span><span class="p">):</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">new</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">items</span><span class="o">=</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">argument</span><span class="p">)()</span>
            <span class="n">iterator</span> <span class="o">=</span> <span class="n">Sequence</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span><span class="o">.</span><span class="n">partition_by_counts</span><span class="p">(</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">period</span><span class="p">],</span> <span class="n">cyclic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">overhang</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">shard</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">iterator</span><span class="p">):</span>
                <span class="n">shard</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">argument</span><span class="p">)(</span><span class="n">shard</span><span class="p">)</span> <span class="o">*</span> <span class="n">counts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">+</span> <span class="n">shard</span>
            <span class="k">return</span> <span class="n">result</span>

        <span class="n">pattern</span> <span class="o">=</span> <span class="n">Pattern</span><span class="p">(</span><span class="n">indices</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">indices</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">period</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
        <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">argument</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">pattern</span><span class="o">.</span><span class="n">matches_index</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
                <span class="n">count</span> <span class="o">=</span> <span class="n">counts</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="n">result</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">x</span><span class="p">]</span> <span class="o">*</span> <span class="n">count</span><span class="p">)</span>
                <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">TypedCollection</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">new</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">items</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">argument</span><span class="p">)(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="Duplication.__eq__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Duplication.__eq__">[docs]</a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when all initialization values of Abjad value object equal</span>
<span class="sd">        the initialization values of ``argument``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">StorageFormatManager</span><span class="o">.</span><span class="n">compare_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span></div>

<div class="viewcode-block" id="Duplication.__hash__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Duplication.__hash__">[docs]</a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Hashes Abjad value object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">hash_values</span> <span class="o">=</span> <span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_hash_values</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="n">hash_values</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;unhashable type: </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="Duplication.__repr__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Duplication.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets interpreter representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_repr_format</span><span class="p">()</span></div>

    <span class="c1">### PUBLIC PROPERTIES ###</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">counts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets counts of duplication.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; operator_ = abjad.Duplication(counts=1, period=3)</span>
<span class="sd">            &gt;&gt;&gt; operator_.counts</span>
<span class="sd">            1</span>

<span class="sd">        Returns integer or none.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_counts</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">indices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets indices of duplication.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; operator_ = abjad.Duplication(</span>
<span class="sd">            ...     counts=1,</span>
<span class="sd">            ...     indices=(0, -1),</span>
<span class="sd">            ...     )</span>
<span class="sd">            &gt;&gt;&gt; operator_.indices</span>
<span class="sd">            (0, -1)</span>

<span class="sd">        Returns integer or none.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">period</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets period of duplication.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; operator_ = abjad.Duplication(counts=1, period=3)</span>
<span class="sd">            &gt;&gt;&gt; operator_.period</span>
<span class="sd">            3</span>

<span class="sd">        Returns integer or none.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_period</span></div>


<div class="viewcode-block" id="Inversion"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Inversion">[docs]</a><span class="k">class</span> <span class="nc">Inversion</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Inversion operator.</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        &gt;&gt;&gt; abjad.Inversion()</span>
<span class="sd">        Inversion()</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        &gt;&gt;&gt; abjad.Inversion(axis=15)</span>
<span class="sd">        Inversion(axis=NamedPitch(&quot;ef&#39;&#39;&quot;))</span>

<span class="sd">    Object model of twelve-tone inversion operator.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">### CLASS VARIABLES ##</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;_axis&quot;</span><span class="p">,)</span>

    <span class="c1">### INITIALIZER ###</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">axis</span> <span class="o">=</span> <span class="n">NamedPitch</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span> <span class="o">=</span> <span class="n">axis</span>

    <span class="c1">### SPECIAL METHODS ###</span>

<div class="viewcode-block" id="Inversion.__add__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Inversion.__add__">[docs]</a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Composes inversion and ``operator``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Example segment:</span>

<span class="sd">            &gt;&gt;&gt; items = [0, 2, 4, 5]</span>
<span class="sd">            &gt;&gt;&gt; segment = abjad.PitchClassSegment(items=items)</span>
<span class="sd">            &gt;&gt;&gt; lilypond_file = abjad.illustrate(segment)</span>
<span class="sd">            &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">            Example operators:</span>

<span class="sd">            &gt;&gt;&gt; inversion = abjad.Inversion()</span>
<span class="sd">            &gt;&gt;&gt; transposition = abjad.Transposition(n=3)</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Transposition followed by inversion:</span>

<span class="sd">            &gt;&gt;&gt; operator = inversion + transposition</span>
<span class="sd">            &gt;&gt;&gt; str(operator)</span>
<span class="sd">            &#39;IT3&#39;</span>

<span class="sd">            &gt;&gt;&gt; segment_ = operator(segment)</span>
<span class="sd">            &gt;&gt;&gt; lilypond_file = abjad.illustrate(segment_)</span>
<span class="sd">            &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">            ..  docs::</span>

<span class="sd">                &gt;&gt;&gt; abjad.f(lilypond_file[abjad.Voice])</span>
<span class="sd">                \new Voice</span>
<span class="sd">                {</span>
<span class="sd">                    a&#39;8</span>
<span class="sd">                    g&#39;8</span>
<span class="sd">                    f&#39;8</span>
<span class="sd">                    e&#39;8</span>
<span class="sd">                    \bar &quot;|.&quot; %! SCORE_1</span>
<span class="sd">                    \override Score.BarLine.transparent = ##f</span>
<span class="sd">                }</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Inversion followed by transposition:</span>

<span class="sd">            &gt;&gt;&gt; operator = transposition + inversion</span>
<span class="sd">            &gt;&gt;&gt; str(operator)</span>
<span class="sd">            &#39;T3I&#39;</span>

<span class="sd">            &gt;&gt;&gt; segment_ = operator(segment)</span>
<span class="sd">            &gt;&gt;&gt; lilypond_file = abjad.illustrate(segment_)</span>
<span class="sd">            &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">            ..  docs::</span>

<span class="sd">                &gt;&gt;&gt; abjad.f(lilypond_file[abjad.Voice])</span>
<span class="sd">                \new Voice</span>
<span class="sd">                {</span>
<span class="sd">                    ef&#39;8</span>
<span class="sd">                    cs&#39;8</span>
<span class="sd">                    b&#39;8</span>
<span class="sd">                    bf&#39;8</span>
<span class="sd">                    \bar &quot;|.&quot; %! SCORE_1</span>
<span class="sd">                    \override Score.BarLine.transparent = ##f</span>
<span class="sd">                }</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Returns compound operator:</span>

<span class="sd">            &gt;&gt;&gt; abjad.f(operator)</span>
<span class="sd">            abjad.CompoundOperator(</span>
<span class="sd">                operators=[</span>
<span class="sd">                    Inversion(),</span>
<span class="sd">                    Transposition(n=3),</span>
<span class="sd">                    ],</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">CompoundOperator</span><span class="o">.</span><span class="n">_compose_operators</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">)</span></div>

<div class="viewcode-block" id="Inversion.__call__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Inversion.__call__">[docs]</a>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls inversion on ``argument``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Inverts numbered pitch-class:</span>

<span class="sd">            &gt;&gt;&gt; inversion = abjad.Inversion()</span>
<span class="sd">            &gt;&gt;&gt; pitch_class = abjad.NumberedPitchClass(1)</span>
<span class="sd">            &gt;&gt;&gt; inversion(pitch_class)</span>
<span class="sd">            NumberedPitchClass(11)</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Inverts numbered pitch:</span>

<span class="sd">            &gt;&gt;&gt; inversion = abjad.Inversion()</span>
<span class="sd">            &gt;&gt;&gt; pitch = abjad.NumberedPitch(15)</span>
<span class="sd">            &gt;&gt;&gt; inversion(pitch)</span>
<span class="sd">            NumberedPitch(-15)</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Inverts named pitch:</span>

<span class="sd">            &gt;&gt;&gt; inversion = abjad.Inversion()</span>
<span class="sd">            &gt;&gt;&gt; pitch = abjad.NamedPitch(&quot;d&#39;&quot;)</span>
<span class="sd">            &gt;&gt;&gt; inversion(pitch)</span>
<span class="sd">            NamedPitch(&#39;bf&#39;)</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Inverts named pitch class:</span>

<span class="sd">            &gt;&gt;&gt; inversion = abjad.Inversion()</span>
<span class="sd">            &gt;&gt;&gt; pitch_class = abjad.NamedPitchClass(&#39;d&#39;)</span>
<span class="sd">            &gt;&gt;&gt; inversion(pitch_class)</span>
<span class="sd">            NamedPitchClass(&#39;bf&#39;)</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Inverts pitch segment:</span>

<span class="sd">            &gt;&gt;&gt; inversion = abjad.Inversion()</span>
<span class="sd">            &gt;&gt;&gt; segment = abjad.PitchSegment(&quot;c&#39; d&#39; e&#39;&quot;)</span>
<span class="sd">            &gt;&gt;&gt; inversion(segment)</span>
<span class="sd">            PitchSegment(&quot;c&#39; bf af&quot;)</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Inverts pitch class segment:</span>

<span class="sd">            &gt;&gt;&gt; inversion = abjad.Inversion()</span>
<span class="sd">            &gt;&gt;&gt; segment = abjad.PitchClassSegment(&quot;c d e&quot;)</span>
<span class="sd">            &gt;&gt;&gt; inversion(segment)</span>
<span class="sd">            PitchClassSegment(&quot;c bf af&quot;)</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Inverts pitch class set:</span>

<span class="sd">            &gt;&gt;&gt; inversion = abjad.Inversion()</span>
<span class="sd">            &gt;&gt;&gt; setting = abjad.PitchClassSet(&quot;c d e&quot;)</span>
<span class="sd">            &gt;&gt;&gt; inversion(setting)</span>
<span class="sd">            PitchClassSet([&#39;c&#39;, &#39;af&#39;, &#39;bf&#39;])</span>

<span class="sd">        Returns new object with type equal to that of ``argument``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="s2">&quot;invert&quot;</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">invert</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;do not know how to invert: </span><span class="si">{</span><span class="n">argument</span><span class="si">!r}</span><span class="s2">.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="Inversion.__eq__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Inversion.__eq__">[docs]</a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when all initialization values of Abjad value object equal</span>
<span class="sd">        the initialization values of ``argument``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">StorageFormatManager</span><span class="o">.</span><span class="n">compare_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span></div>

<div class="viewcode-block" id="Inversion.__hash__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Inversion.__hash__">[docs]</a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Hashes Abjad value object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">hash_values</span> <span class="o">=</span> <span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_hash_values</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="n">hash_values</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;unhashable type: </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="Inversion.__radd__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Inversion.__radd__">[docs]</a>    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Right-addition not defined on inversion.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; abjad.Inversion().__radd__(abjad.Inversion())</span>
<span class="sd">            Traceback (most recent call last):</span>
<span class="sd">                ...</span>
<span class="sd">            NotImplementedError: right-addition not defined on Inversion.</span>

<span class="sd">        Raises not implemented error.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;right-addition not defined on </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="Inversion.__repr__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Inversion.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets interpreter representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_repr_format</span><span class="p">()</span></div>

<div class="viewcode-block" id="Inversion.__str__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Inversion.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets string representation of operator.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(abjad.Inversion())</span>
<span class="sd">            &#39;I&#39;</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(abjad.Inversion(axis=15))</span>
<span class="sd">            &#39;I(Eb5)&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;I&quot;</span>
        <span class="n">axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">get_name</span><span class="p">(</span><span class="n">locale</span><span class="o">=</span><span class="s2">&quot;us&quot;</span><span class="p">)</span>
        <span class="n">string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;I(</span><span class="si">{</span><span class="n">axis</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="k">return</span> <span class="n">string</span></div>

    <span class="c1">### PRIVATE METHODS ###</span>

    <span class="k">def</span> <span class="nf">_get_markup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">markup</span> <span class="o">=</span> <span class="n">markups</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span><span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">get_name</span><span class="p">(</span><span class="n">locale</span><span class="o">=</span><span class="s2">&quot;us&quot;</span><span class="p">)</span>
            <span class="n">subscript</span> <span class="o">=</span> <span class="n">markups</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span><span class="o">.</span><span class="n">sub</span><span class="p">()</span>
            <span class="n">markup</span> <span class="o">=</span> <span class="n">markups</span><span class="o">.</span><span class="n">Markup</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">markup</span><span class="p">,</span> <span class="n">subscript</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">markup</span>

    <span class="k">def</span> <span class="nf">_is_identity_operator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1">### PUBLIC PROPERTIES ###</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">axis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets axis of inversion.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; inversion = abjad.Inversion()</span>
<span class="sd">            &gt;&gt;&gt; inversion.axis is None</span>
<span class="sd">            True</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; inversion = abjad.Inversion(axis=15)</span>
<span class="sd">            &gt;&gt;&gt; inversion.axis</span>
<span class="sd">            NamedPitch(&quot;ef&#39;&#39;&quot;)</span>

<span class="sd">        Returns named pitch or none.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span></div>


<div class="viewcode-block" id="Multiplication"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Multiplication">[docs]</a><span class="k">class</span> <span class="nc">Multiplication</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Multiplication operator.</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        &gt;&gt;&gt; abjad.Multiplication()</span>
<span class="sd">        Multiplication(n=1)</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        &gt;&gt;&gt; abjad.Multiplication(n=5)</span>
<span class="sd">        Multiplication(n=5)</span>

<span class="sd">    Object model of twelve-tone multiplication operator.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">### CLASS VARIABLES ##</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;_n&quot;</span><span class="p">,)</span>

    <span class="c1">### INITIALIZER ###</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n</span> <span class="o">=</span> <span class="n">n</span>

    <span class="c1">### SPECIAL METHODS ###</span>

<div class="viewcode-block" id="Multiplication.__add__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Multiplication.__add__">[docs]</a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Composes multiplication and ``operator``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Example segment:</span>

<span class="sd">            &gt;&gt;&gt; items = [0, 2, 4, 5]</span>
<span class="sd">            &gt;&gt;&gt; segment = abjad.PitchClassSegment(items=items)</span>
<span class="sd">            &gt;&gt;&gt; lilypond_file = abjad.illustrate(segment)</span>
<span class="sd">            &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">            Example operators:</span>

<span class="sd">            &gt;&gt;&gt; multiplication = abjad.Multiplication(n=5)</span>
<span class="sd">            &gt;&gt;&gt; transposition = abjad.Transposition(n=3)</span>

<span class="sd">        ..  container:: example</span>


<span class="sd">            Transposition followed by multiplication:</span>

<span class="sd">            &gt;&gt;&gt; operator = multiplication + transposition</span>
<span class="sd">            &gt;&gt;&gt; str(operator)</span>
<span class="sd">            &#39;M5T3&#39;</span>

<span class="sd">            &gt;&gt;&gt; segment_ = operator(segment)</span>
<span class="sd">            &gt;&gt;&gt; lilypond_file = abjad.illustrate(segment_)</span>
<span class="sd">            &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">            ..  docs::</span>

<span class="sd">                &gt;&gt;&gt; abjad.f(lilypond_file[abjad.Voice])</span>
<span class="sd">                \new Voice</span>
<span class="sd">                {</span>
<span class="sd">                    ef&#39;8</span>
<span class="sd">                    cs&#39;8</span>
<span class="sd">                    b&#39;8</span>
<span class="sd">                    e&#39;8</span>
<span class="sd">                    \bar &quot;|.&quot; %! SCORE_1</span>
<span class="sd">                    \override Score.BarLine.transparent = ##f</span>
<span class="sd">                }</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Same as above because multiplication and transposition commute:</span>

<span class="sd">            &gt;&gt;&gt; operator = transposition + multiplication</span>
<span class="sd">            &gt;&gt;&gt; str(operator)</span>
<span class="sd">            &#39;T3M5&#39;</span>

<span class="sd">            &gt;&gt;&gt; segment_ = operator(segment)</span>
<span class="sd">            &gt;&gt;&gt; lilypond_file = abjad.illustrate(segment_)</span>
<span class="sd">            &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">            ..  docs::</span>

<span class="sd">                &gt;&gt;&gt; abjad.f(lilypond_file[abjad.Voice])</span>
<span class="sd">                \new Voice</span>
<span class="sd">                {</span>
<span class="sd">                    ef&#39;8</span>
<span class="sd">                    cs&#39;8</span>
<span class="sd">                    b&#39;8</span>
<span class="sd">                    e&#39;8</span>
<span class="sd">                    \bar &quot;|.&quot; %! SCORE_1</span>
<span class="sd">                    \override Score.BarLine.transparent = ##f</span>
<span class="sd">                }</span>

<span class="sd">        Returns compound operator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">CompoundOperator</span><span class="o">.</span><span class="n">_compose_operators</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">)</span></div>

<div class="viewcode-block" id="Multiplication.__call__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Multiplication.__call__">[docs]</a>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls multiplication on ``argument``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Multiplies pitch-class:</span>

<span class="sd">            &gt;&gt;&gt; multiplication = abjad.Multiplication(n=5)</span>
<span class="sd">            &gt;&gt;&gt; pitch_class = abjad.NumberedPitchClass(4)</span>
<span class="sd">            &gt;&gt;&gt; multiplication(pitch_class)</span>
<span class="sd">            NumberedPitchClass(8)</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Multiplies pitch:</span>

<span class="sd">            &gt;&gt;&gt; multiplication = abjad.Multiplication(n=7)</span>
<span class="sd">            &gt;&gt;&gt; pitch = abjad.NamedPitch(&quot;f&#39;&quot;)</span>
<span class="sd">            &gt;&gt;&gt; multiplication(pitch)</span>
<span class="sd">            NamedPitch(&quot;b&#39;&#39;&#39;&quot;)</span>

<span class="sd">        Returns new object with type equal to that of ``argument``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="s2">&quot;multiply&quot;</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;do not know how to multiply: </span><span class="si">{</span><span class="n">argument</span><span class="si">!r}</span><span class="s2">.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="Multiplication.__eq__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Multiplication.__eq__">[docs]</a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when all initialization values of Abjad value object equal</span>
<span class="sd">        the initialization values of ``argument``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">StorageFormatManager</span><span class="o">.</span><span class="n">compare_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span></div>

<div class="viewcode-block" id="Multiplication.__hash__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Multiplication.__hash__">[docs]</a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Hashes Abjad value object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">hash_values</span> <span class="o">=</span> <span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_hash_values</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="n">hash_values</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;unhashable type: </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="Multiplication.__radd__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Multiplication.__radd__">[docs]</a>    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Right-addition not defined on multiplication.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; abjad.Multiplication().__radd__(abjad.Multiplication())</span>
<span class="sd">            Traceback (most recent call last):</span>
<span class="sd">                ...</span>
<span class="sd">            NotImplementedError: right-addition not defined on Multiplication.</span>

<span class="sd">        Raises not implemented error.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;right-addition not defined on </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="Multiplication.__repr__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Multiplication.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets interpreter representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_repr_format</span><span class="p">()</span></div>

<div class="viewcode-block" id="Multiplication.__str__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Multiplication.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets string representation of operator.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(abjad.Multiplication())</span>
<span class="sd">            &#39;M1&#39;</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(abjad.Multiplication(n=5))</span>
<span class="sd">            &#39;M5&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;M</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">string</span></div>

    <span class="c1">### PRIVATE METHODS ###</span>

    <span class="k">def</span> <span class="nf">_get_markup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">operator</span> <span class="o">=</span> <span class="n">markups</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span><span class="s2">&quot;M&quot;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">)</span>
        <span class="n">subscript</span> <span class="o">=</span> <span class="n">markups</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">sub</span><span class="p">()</span>
        <span class="n">markup</span> <span class="o">=</span> <span class="n">markups</span><span class="o">.</span><span class="n">Markup</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">operator</span><span class="p">,</span> <span class="n">subscript</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">markup</span>

    <span class="k">def</span> <span class="nf">_is_identity_operator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1">### PUBLIC PROPERTIES ###</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">n</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets index of multiplication.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; multiplication = abjad.Multiplication()</span>
<span class="sd">            &gt;&gt;&gt; multiplication.n</span>
<span class="sd">            1</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; multiplication = abjad.Multiplication(n=5)</span>
<span class="sd">            &gt;&gt;&gt; multiplication.n</span>
<span class="sd">            5</span>

<span class="sd">        Set to integer or none.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n</span></div>


<div class="viewcode-block" id="Retrograde"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Retrograde">[docs]</a><span class="k">class</span> <span class="nc">Retrograde</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrograde operator.</span>

<span class="sd">    ..  container:: example:</span>

<span class="sd">        &gt;&gt;&gt; abjad.Retrograde()</span>
<span class="sd">        Retrograde()</span>

<span class="sd">    Object model of twelve-tone retrograde operator.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">### CLASS VARIABLES ###</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;_period&quot;</span><span class="p">,)</span>

    <span class="c1">### INITIALIZER ###</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">period</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">period</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">period</span><span class="p">))</span>
            <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">period</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_period</span> <span class="o">=</span> <span class="n">period</span>

    <span class="c1">### SPECIAL METHODS ###</span>

<div class="viewcode-block" id="Retrograde.__add__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Retrograde.__add__">[docs]</a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Composes retrograde and ``operator``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Example segment:</span>

<span class="sd">            &gt;&gt;&gt; items = [0, 2, 4, 5]</span>
<span class="sd">            &gt;&gt;&gt; segment = abjad.PitchClassSegment(items=items)</span>
<span class="sd">            &gt;&gt;&gt; lilypond_file = abjad.illustrate(segment)</span>
<span class="sd">            &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">            Example operators:</span>

<span class="sd">            &gt;&gt;&gt; retrograde = abjad.Retrograde()</span>
<span class="sd">            &gt;&gt;&gt; transposition = abjad.Transposition(n=3)</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Transposition followed by retrograde:</span>

<span class="sd">            &gt;&gt;&gt; operator = retrograde + transposition</span>
<span class="sd">            &gt;&gt;&gt; str(operator)</span>
<span class="sd">            &#39;RT3&#39;</span>

<span class="sd">            &gt;&gt;&gt; segment_ = operator(segment)</span>
<span class="sd">            &gt;&gt;&gt; lilypond_file = abjad.illustrate(segment_)</span>
<span class="sd">            &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">            ..  docs::</span>

<span class="sd">                &gt;&gt;&gt; abjad.f(lilypond_file[abjad.Voice])</span>
<span class="sd">                \new Voice</span>
<span class="sd">                {</span>
<span class="sd">                    af&#39;8</span>
<span class="sd">                    g&#39;8</span>
<span class="sd">                    f&#39;8</span>
<span class="sd">                    ef&#39;8</span>
<span class="sd">                    \bar &quot;|.&quot; %! SCORE_1</span>
<span class="sd">                    \override Score.BarLine.transparent = ##f</span>
<span class="sd">                }</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Same as above because retrograde and transposition commute:</span>

<span class="sd">            &gt;&gt;&gt; operator = transposition + retrograde</span>
<span class="sd">            &gt;&gt;&gt; str(operator)</span>
<span class="sd">            &#39;T3R&#39;</span>

<span class="sd">            &gt;&gt;&gt; segment_ = operator(segment)</span>
<span class="sd">            &gt;&gt;&gt; lilypond_file = abjad.illustrate(segment_)</span>
<span class="sd">            &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">            ..  docs::</span>

<span class="sd">                &gt;&gt;&gt; abjad.f(lilypond_file[abjad.Voice])</span>
<span class="sd">                \new Voice</span>
<span class="sd">                {</span>
<span class="sd">                    af&#39;8</span>
<span class="sd">                    g&#39;8</span>
<span class="sd">                    f&#39;8</span>
<span class="sd">                    ef&#39;8</span>
<span class="sd">                    \bar &quot;|.&quot; %! SCORE_1</span>
<span class="sd">                    \override Score.BarLine.transparent = ##f</span>
<span class="sd">                }</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Returns compound operator:</span>

<span class="sd">            &gt;&gt;&gt; abjad.f(operator)</span>
<span class="sd">            abjad.CompoundOperator(</span>
<span class="sd">                operators=[</span>
<span class="sd">                    Retrograde(),</span>
<span class="sd">                    Transposition(n=3),</span>
<span class="sd">                    ],</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">CompoundOperator</span><span class="o">.</span><span class="n">_compose_operators</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">)</span></div>

<div class="viewcode-block" id="Retrograde.__call__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Retrograde.__call__">[docs]</a>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls retrograde on ``argument``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Gets retrograde pitch classes:</span>

<span class="sd">            &gt;&gt;&gt; retrograde = abjad.Retrograde()</span>
<span class="sd">            &gt;&gt;&gt; segment = abjad.PitchClassSegment([0, 1, 4, 7])</span>
<span class="sd">            &gt;&gt;&gt; retrograde(segment)</span>
<span class="sd">            PitchClassSegment([7, 4, 1, 0])</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Does not retrograde single pitches or pitch-classes:</span>

<span class="sd">            &gt;&gt;&gt; retrogresion = abjad.Retrograde()</span>
<span class="sd">            &gt;&gt;&gt; pitch_class = abjad.NumberedPitchClass(6)</span>
<span class="sd">            &gt;&gt;&gt; retrograde(pitch_class)</span>
<span class="sd">            NumberedPitchClass(6)</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Periodic retrograde:</span>

<span class="sd">            ..  todo:: Deprecated.</span>

<span class="sd">            &gt;&gt;&gt; retrograde = abjad.Retrograde(period=3)</span>
<span class="sd">            &gt;&gt;&gt; segment = abjad.PitchSegment(&quot;c&#39; d&#39; e&#39; f&#39; g&#39; a&#39; b&#39; c&#39;&#39;&quot;)</span>
<span class="sd">            &gt;&gt;&gt; retrograde(segment)</span>
<span class="sd">            PitchSegment(&quot;e&#39; d&#39; c&#39; a&#39; g&#39; f&#39; c&#39;&#39; b&#39;&quot;)</span>

<span class="sd">        Returns new object with type equal to that of ``argument``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="p">(</span><span class="n">Pitch</span><span class="p">,</span> <span class="n">PitchClass</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">argument</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="p">(</span><span class="n">PitchSegment</span><span class="p">,</span> <span class="n">PitchClassSegment</span><span class="p">)):</span>
            <span class="n">argument</span> <span class="o">=</span> <span class="n">PitchSegment</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">period</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">argument</span><span class="p">)(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">argument</span><span class="p">))</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">new</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">items</span><span class="o">=</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">shard</span> <span class="ow">in</span> <span class="n">Sequence</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span><span class="o">.</span><span class="n">partition_by_counts</span><span class="p">(</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">period</span><span class="p">],</span> <span class="n">cyclic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">overhang</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">):</span>
            <span class="n">shard</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">argument</span><span class="p">)(</span><span class="n">shard</span><span class="p">)</span>
            <span class="n">shard</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">argument</span><span class="p">)(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">shard</span><span class="p">))</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">+</span> <span class="n">shard</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="Retrograde.__eq__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Retrograde.__eq__">[docs]</a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when all initialization values of Abjad value object equal</span>
<span class="sd">        the initialization values of ``argument``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">StorageFormatManager</span><span class="o">.</span><span class="n">compare_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span></div>

<div class="viewcode-block" id="Retrograde.__hash__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Retrograde.__hash__">[docs]</a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Hashes Abjad value object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">hash_values</span> <span class="o">=</span> <span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_hash_values</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="n">hash_values</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;unhashable type: </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="Retrograde.__radd__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Retrograde.__radd__">[docs]</a>    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Right-addition not defined on retrograde.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; abjad.Retrograde().__radd__(abjad.Retrograde())</span>
<span class="sd">            Traceback (most recent call last):</span>
<span class="sd">                ...</span>
<span class="sd">            NotImplementedError: right-addition not defined on Retrograde.</span>

<span class="sd">        Raises not implemented error.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;right-addition not defined on </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="Retrograde.__repr__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Retrograde.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets interpreter representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_repr_format</span><span class="p">()</span></div>

<div class="viewcode-block" id="Retrograde.__str__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Retrograde.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets string representation of operator.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(abjad.Retrograde())</span>
<span class="sd">            &#39;R&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;R&quot;</span></div>

    <span class="c1">### PRIVATE METHODS ###</span>

    <span class="k">def</span> <span class="nf">_get_markup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">markups</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span><span class="s2">&quot;R&quot;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_is_identity_operator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1">### PUBLIC PROPERTIES ###</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">period</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets optional period of retrograde.</span>

<span class="sd">        ..  todo:: Deprecated. Use Expression followed by Retrograde instead.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; retrograde = abjad.Retrograde(period=3)</span>
<span class="sd">            &gt;&gt;&gt; retrograde.period</span>
<span class="sd">            3</span>

<span class="sd">        Returns integer or none.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_period</span></div>


<div class="viewcode-block" id="Rotation"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Rotation">[docs]</a><span class="k">class</span> <span class="nc">Rotation</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Rotation operator.</span>

<span class="sd">    ..  container:: example:</span>

<span class="sd">        &gt;&gt;&gt; abjad.Rotation()</span>
<span class="sd">        Rotation(n=0)</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        &gt;&gt;&gt; abjad.Rotation(n=1)</span>
<span class="sd">        Rotation(n=1)</span>

<span class="sd">    Object model of the twelve-tone rotation operator.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">### CLASS VARIABLES ###</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;_n&quot;</span><span class="p">,</span> <span class="s2">&quot;_period&quot;</span><span class="p">,</span> <span class="s2">&quot;_stravinsky&quot;</span><span class="p">)</span>

    <span class="c1">### INITIALIZER ###</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stravinsky</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">period</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">period</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">period</span><span class="p">))</span>
            <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">period</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_period</span> <span class="o">=</span> <span class="n">period</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stravinsky</span><span class="p">,</span> <span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">))),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">stravinsky</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stravinsky</span> <span class="o">=</span> <span class="n">stravinsky</span>

    <span class="c1">### SPECIAL METHODS ###</span>

<div class="viewcode-block" id="Rotation.__add__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Rotation.__add__">[docs]</a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Composes rotation and ``operator``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Example segment:</span>

<span class="sd">            &gt;&gt;&gt; items = [0, 2, 4, 5]</span>
<span class="sd">            &gt;&gt;&gt; segment = abjad.PitchClassSegment(items=items)</span>
<span class="sd">            &gt;&gt;&gt; lilypond_file = abjad.illustrate(segment)</span>
<span class="sd">            &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">            Example operators:</span>

<span class="sd">            &gt;&gt;&gt; rotation = abjad.Rotation(n=-1)</span>
<span class="sd">            &gt;&gt;&gt; transposition = abjad.Transposition(n=3)</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Transposition followed by rotation:</span>

<span class="sd">            &gt;&gt;&gt; operator = rotation + transposition</span>
<span class="sd">            &gt;&gt;&gt; str(operator)</span>
<span class="sd">            &#39;r-1T3&#39;</span>

<span class="sd">            &gt;&gt;&gt; segment_ = operator(segment)</span>
<span class="sd">            &gt;&gt;&gt; lilypond_file = abjad.illustrate(segment_)</span>
<span class="sd">            &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">            ..  docs::</span>

<span class="sd">                &gt;&gt;&gt; abjad.f(lilypond_file[abjad.Voice])</span>
<span class="sd">                \new Voice</span>
<span class="sd">                {</span>
<span class="sd">                    f&#39;8</span>
<span class="sd">                    g&#39;8</span>
<span class="sd">                    af&#39;8</span>
<span class="sd">                    ef&#39;8</span>
<span class="sd">                    \bar &quot;|.&quot; %! SCORE_1</span>
<span class="sd">                    \override Score.BarLine.transparent = ##f</span>
<span class="sd">                }</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Same as above because rotation and transposition commute:</span>

<span class="sd">            &gt;&gt;&gt; operator = transposition + rotation</span>
<span class="sd">            &gt;&gt;&gt; str(operator)</span>
<span class="sd">            &#39;T3r-1&#39;</span>

<span class="sd">            &gt;&gt;&gt; segment_ = operator(segment)</span>
<span class="sd">            &gt;&gt;&gt; lilypond_file = abjad.illustrate(segment_)</span>
<span class="sd">            &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">            ..  docs::</span>

<span class="sd">                &gt;&gt;&gt; abjad.f(lilypond_file[abjad.Voice])</span>
<span class="sd">                \new Voice</span>
<span class="sd">                {</span>
<span class="sd">                    f&#39;8</span>
<span class="sd">                    g&#39;8</span>
<span class="sd">                    af&#39;8</span>
<span class="sd">                    ef&#39;8</span>
<span class="sd">                    \bar &quot;|.&quot; %! SCORE_1</span>
<span class="sd">                    \override Score.BarLine.transparent = ##f</span>
<span class="sd">                }</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Returns compound operator:</span>

<span class="sd">            &gt;&gt;&gt; abjad.f(operator)</span>
<span class="sd">            abjad.CompoundOperator(</span>
<span class="sd">                operators=[</span>
<span class="sd">                    Rotation(n=-1),</span>
<span class="sd">                    Transposition(n=3),</span>
<span class="sd">                    ],</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">CompoundOperator</span><span class="o">.</span><span class="n">_compose_operators</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">)</span></div>

<div class="viewcode-block" id="Rotation.__call__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Rotation.__call__">[docs]</a>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls rotation on ``argument``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Rotates pitch classes:</span>

<span class="sd">            &gt;&gt;&gt; rotation = abjad.Rotation(n=1)</span>
<span class="sd">            &gt;&gt;&gt; pitch_classes = abjad.PitchClassSegment([0, 1, 4, 7])</span>
<span class="sd">            &gt;&gt;&gt; rotation(pitch_classes)</span>
<span class="sd">            PitchClassSegment([7, 0, 1, 4])</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Rotates pitch classes with Stravinsky-style back-transposition to</span>
<span class="sd">            zero:</span>

<span class="sd">            &gt;&gt;&gt; rotation = abjad.Rotation(n=1, stravinsky=True)</span>
<span class="sd">            &gt;&gt;&gt; pitch_classes = abjad.PitchClassSegment([0, 1, 4, 7])</span>
<span class="sd">            &gt;&gt;&gt; rotation(pitch_classes)</span>
<span class="sd">            PitchClassSegment([0, 5, 6, 9])</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Does not rotate single pitches or pitch-classes:</span>

<span class="sd">            &gt;&gt;&gt; rotation = abjad.Rotation(n=1)</span>
<span class="sd">            &gt;&gt;&gt; pitch_class = abjad.NumberedPitchClass(6)</span>
<span class="sd">            &gt;&gt;&gt; rotation(pitch_class)</span>
<span class="sd">            NumberedPitchClass(6)</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Periodic rotation:</span>

<span class="sd">            ..  todo:: Deprecated.</span>

<span class="sd">            &gt;&gt;&gt; rotation = abjad.Rotation(n=1, period=3)</span>
<span class="sd">            &gt;&gt;&gt; pitches = abjad.PitchSegment(&quot;c&#39; d&#39; e&#39; f&#39; g&#39; a&#39; b&#39; c&#39;&#39;&quot;)</span>
<span class="sd">            &gt;&gt;&gt; rotation(pitches)</span>
<span class="sd">            PitchSegment(&quot;e&#39; c&#39; d&#39; a&#39; f&#39; g&#39; c&#39;&#39; b&#39;&quot;)</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Stravinsky-style periodic rotation:</span>

<span class="sd">            ..  todo:: Deprecated.</span>

<span class="sd">            &gt;&gt;&gt; rotation = abjad.Rotation(</span>
<span class="sd">            ...     n=1,</span>
<span class="sd">            ...     period=3,</span>
<span class="sd">            ...     stravinsky=True,</span>
<span class="sd">            ...     )</span>
<span class="sd">            &gt;&gt;&gt; pitches = abjad.PitchSegment(&quot;c&#39; d&#39; e&#39; f&#39; g&#39; a&#39; b&#39; c&#39;&#39;&quot;)</span>
<span class="sd">            &gt;&gt;&gt; rotation(pitches)</span>
<span class="sd">            PitchSegment(&quot;c&#39; af bf f&#39; df&#39; ef&#39; b&#39; as&#39;&quot;)</span>

<span class="sd">        Returns new object with type equal to that of ``argument``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="p">(</span><span class="n">Pitch</span><span class="p">,</span> <span class="n">PitchClass</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">argument</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="p">(</span><span class="n">PitchSegment</span><span class="p">,</span> <span class="n">PitchClassSegment</span><span class="p">)):</span>
            <span class="n">argument</span> <span class="o">=</span> <span class="n">PitchSegment</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">period</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">argument</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="n">stravinsky</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stravinsky</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">new</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">items</span><span class="o">=</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">shard</span> <span class="ow">in</span> <span class="n">Sequence</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span><span class="o">.</span><span class="n">partition_by_counts</span><span class="p">(</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">period</span><span class="p">],</span> <span class="n">cyclic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">overhang</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">):</span>
            <span class="n">shard</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">argument</span><span class="p">)(</span><span class="n">shard</span><span class="p">)</span>
            <span class="n">shard</span> <span class="o">=</span> <span class="n">shard</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="n">stravinsky</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stravinsky</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">+</span> <span class="n">shard</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="Rotation.__eq__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Rotation.__eq__">[docs]</a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when all initialization values of Abjad value object equal</span>
<span class="sd">        the initialization values of ``argument``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">StorageFormatManager</span><span class="o">.</span><span class="n">compare_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span></div>

<div class="viewcode-block" id="Rotation.__hash__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Rotation.__hash__">[docs]</a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Hashes Abjad value object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">hash_values</span> <span class="o">=</span> <span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_hash_values</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="n">hash_values</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;unhashable type: </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="Rotation.__radd__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Rotation.__radd__">[docs]</a>    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Right-addition not defined on rotation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; abjad.Rotation().__radd__(abjad.Rotation())</span>
<span class="sd">            Traceback (most recent call last):</span>
<span class="sd">                ...</span>
<span class="sd">            NotImplementedError: right-addition not defined on Rotation.</span>

<span class="sd">        Raises not implemented error.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;right-addition not defined on </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="Rotation.__repr__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Rotation.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets interpreter representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_repr_format</span><span class="p">()</span></div>

<div class="viewcode-block" id="Rotation.__str__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Rotation.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets string representation of operator.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(abjad.Rotation())</span>
<span class="sd">            &#39;r0&#39;</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(abjad.Rotation(n=1))</span>
<span class="sd">            &#39;r1&#39;</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(abjad.Rotation(stravinsky=True))</span>
<span class="sd">            &#39;rs0&#39;</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(abjad.Rotation(n=1, stravinsky=True))</span>
<span class="sd">            &#39;rs1&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stravinsky</span><span class="p">:</span>
            <span class="n">string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;rs</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;r</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">string</span></div>

    <span class="c1">### PRIVATE METHODS ###</span>

    <span class="k">def</span> <span class="nf">_get_markup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">operator</span> <span class="o">=</span> <span class="n">markups</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">)</span>
        <span class="n">subscript</span> <span class="o">=</span> <span class="n">markups</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">sub</span><span class="p">()</span>
        <span class="n">hspace</span> <span class="o">=</span> <span class="n">markups</span><span class="o">.</span><span class="n">Markup</span><span class="o">.</span><span class="n">hspace</span><span class="p">(</span><span class="o">-</span><span class="mf">0.25</span><span class="p">)</span>
        <span class="n">markup</span> <span class="o">=</span> <span class="n">markups</span><span class="o">.</span><span class="n">Markup</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">operator</span><span class="p">,</span> <span class="n">hspace</span><span class="p">,</span> <span class="n">subscript</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">markup</span>

    <span class="k">def</span> <span class="nf">_is_identity_operator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1">### PUBLIC PROPERTIES ###</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">n</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets index of rotation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; rotation = abjad.Rotation()</span>
<span class="sd">            &gt;&gt;&gt; rotation.n</span>
<span class="sd">            0</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; rotation = abjad.Rotation(n=2)</span>
<span class="sd">            &gt;&gt;&gt; rotation.n</span>
<span class="sd">            2</span>

<span class="sd">        Returns integer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">period</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets period of rotation.</span>

<span class="sd">        ..  todo:: Deprecated.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; rotation = abjad.Rotation(n=2, period=3)</span>
<span class="sd">            &gt;&gt;&gt; rotation.period</span>
<span class="sd">            3</span>

<span class="sd">        Returns integer or none.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_period</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">stravinsky</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when rotation uses Stravinsky-style back-transposition to zero.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; rotation = abjad.Rotation(n=2, stravinsky=False)</span>
<span class="sd">            &gt;&gt;&gt; rotation.stravinsky</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stravinsky</span></div>


<div class="viewcode-block" id="Transposition"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Transposition">[docs]</a><span class="k">class</span> <span class="nc">Transposition</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Transposition operator.</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        &gt;&gt;&gt; abjad.Transposition()</span>
<span class="sd">        Transposition(n=0)</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        &gt;&gt;&gt; abjad.Transposition(n=2)</span>
<span class="sd">        Transposition(n=2)</span>

<span class="sd">    Object model of twelve-tone transposition operator.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">### CLASS VARIABLES ##</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;_n&quot;</span><span class="p">,)</span>

    <span class="c1">### INITIALIZER ###</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n</span> <span class="o">=</span> <span class="n">n</span>

    <span class="c1">### SPECIAL METHODS ###</span>

<div class="viewcode-block" id="Transposition.__add__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Transposition.__add__">[docs]</a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Composes transposition and ``operator``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Example segment:</span>

<span class="sd">            &gt;&gt;&gt; items = [0, 2, 4, 5]</span>
<span class="sd">            &gt;&gt;&gt; segment = abjad.PitchClassSegment(items=items)</span>
<span class="sd">            &gt;&gt;&gt; lilypond_file = abjad.illustrate(segment)</span>
<span class="sd">            &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">            Example operators:</span>

<span class="sd">            &gt;&gt;&gt; T_1 = abjad.Transposition(n=1)</span>
<span class="sd">            &gt;&gt;&gt; T_3 = abjad.Transposition(n=3)</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Successive transposition:</span>

<span class="sd">            &gt;&gt;&gt; operator = T_1 + T_3</span>
<span class="sd">            &gt;&gt;&gt; str(operator)</span>
<span class="sd">            &#39;T1T3&#39;</span>

<span class="sd">            &gt;&gt;&gt; segment_ = operator(segment)</span>
<span class="sd">            &gt;&gt;&gt; lilypond_file = abjad.illustrate(segment_)</span>
<span class="sd">            &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">            ..  docs::</span>

<span class="sd">                &gt;&gt;&gt; abjad.f(lilypond_file[abjad.Voice])</span>
<span class="sd">                \new Voice</span>
<span class="sd">                {</span>
<span class="sd">                    e&#39;8</span>
<span class="sd">                    fs&#39;8</span>
<span class="sd">                    af&#39;8</span>
<span class="sd">                    a&#39;8</span>
<span class="sd">                    \bar &quot;|.&quot; %! SCORE_1</span>
<span class="sd">                    \override Score.BarLine.transparent = ##f</span>
<span class="sd">                }</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Same as above because transposition commutes:</span>

<span class="sd">            &gt;&gt;&gt; operator = T_3 + T_1</span>
<span class="sd">            &gt;&gt;&gt; str(operator)</span>
<span class="sd">            &#39;T3T1&#39;</span>

<span class="sd">            &gt;&gt;&gt; segment_ = operator(segment)</span>
<span class="sd">            &gt;&gt;&gt; lilypond_file = abjad.illustrate(segment_)</span>
<span class="sd">            &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">            ..  docs::</span>

<span class="sd">                &gt;&gt;&gt; abjad.f(lilypond_file[abjad.Voice])</span>
<span class="sd">                \new Voice</span>
<span class="sd">                {</span>
<span class="sd">                    e&#39;8</span>
<span class="sd">                    fs&#39;8</span>
<span class="sd">                    af&#39;8</span>
<span class="sd">                    a&#39;8</span>
<span class="sd">                    \bar &quot;|.&quot; %! SCORE_1</span>
<span class="sd">                    \override Score.BarLine.transparent = ##f</span>
<span class="sd">                }</span>

<span class="sd">        Returns compound operator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">CompoundOperator</span><span class="o">.</span><span class="n">_compose_operators</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">)</span></div>

<div class="viewcode-block" id="Transposition.__call__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Transposition.__call__">[docs]</a>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls transposition on ``argument``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Transposes pitch-class:</span>

<span class="sd">            &gt;&gt;&gt; transposition = abjad.Transposition(n=2)</span>
<span class="sd">            &gt;&gt;&gt; pitch_class = abjad.NumberedPitchClass(1)</span>
<span class="sd">            &gt;&gt;&gt; transposition(pitch_class)</span>
<span class="sd">            NumberedPitchClass(3)</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Transposes pitch:</span>

<span class="sd">            &gt;&gt;&gt; transposition = abjad.Transposition(n=2)</span>
<span class="sd">            &gt;&gt;&gt; pitch = abjad.NumberedPitch(15)</span>
<span class="sd">            &gt;&gt;&gt; transposition(pitch)</span>
<span class="sd">            NumberedPitch(17)</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Transposes list of pitches:</span>

<span class="sd">            &gt;&gt;&gt; transposition = abjad.Transposition(n=2)</span>
<span class="sd">            &gt;&gt;&gt; pitches = [abjad.NumberedPitch(_) for _ in [15, 16]]</span>
<span class="sd">            &gt;&gt;&gt; transposition(pitches)</span>
<span class="sd">            [NumberedPitch(17), NumberedPitch(18)]</span>

<span class="sd">        Returns new object with type equal to that of ``argument``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="s2">&quot;transpose&quot;</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Iterable</span><span class="p">):</span>
            <span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">argument</span><span class="p">:</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
                <span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">argument</span><span class="p">)(</span><span class="n">items</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;do not know how to transpose: </span><span class="si">{</span><span class="n">argument</span><span class="si">!r}</span><span class="s2">.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="Transposition.__eq__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Transposition.__eq__">[docs]</a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when all initialization values of Abjad value object equal</span>
<span class="sd">        the initialization values of ``argument``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">StorageFormatManager</span><span class="o">.</span><span class="n">compare_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span></div>

<div class="viewcode-block" id="Transposition.__hash__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Transposition.__hash__">[docs]</a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Hashes Abjad value object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">hash_values</span> <span class="o">=</span> <span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_hash_values</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="n">hash_values</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;unhashable type: </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="Transposition.__radd__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Transposition.__radd__">[docs]</a>    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Right-addition not defined on transposition.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; abjad.Transposition().__radd__(abjad.Transposition())</span>
<span class="sd">            Traceback (most recent call last):</span>
<span class="sd">                ...</span>
<span class="sd">            NotImplementedError: right-addition not defined on Transposition.</span>

<span class="sd">        Raises not implemented error.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;right-addition not defined on </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="Transposition.__repr__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Transposition.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets interpreter representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_repr_format</span><span class="p">()</span></div>

<div class="viewcode-block" id="Transposition.__str__"><a class="viewcode-back" href="../../../api/abjad/pitch/operators.html#abjad.pitch.operators.Transposition.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets string representation of operator.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(abjad.Transposition())</span>
<span class="sd">            &#39;T0&#39;</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(abjad.Transposition(n=2))</span>
<span class="sd">            &#39;T2&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;T</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">string</span></div>

    <span class="c1">### PRIVATE METHODS ###</span>

    <span class="k">def</span> <span class="nf">_get_markup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">operator</span> <span class="o">=</span> <span class="n">markups</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">subscript</span> <span class="o">=</span> <span class="n">markups</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">sub</span><span class="p">()</span>
        <span class="n">markup</span> <span class="o">=</span> <span class="n">markups</span><span class="o">.</span><span class="n">Markup</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">operator</span><span class="p">,</span> <span class="n">subscript</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">markup</span>

    <span class="k">def</span> <span class="nf">_is_identity_operator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1">### PUBLIC PROPERTIES ###</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">n</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets index of transposition.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; transposition = abjad.Transposition()</span>
<span class="sd">            &gt;&gt;&gt; transposition.n</span>
<span class="sd">            0</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; transposition = abjad.Transposition(n=2)</span>
<span class="sd">            &gt;&gt;&gt; transposition.n</span>
<span class="sd">            2</span>

<span class="sd">        Set to integer, interval or none.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n</span></div>
</pre></div>

    </div>
    
    </div>
    

<footer>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

</div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>