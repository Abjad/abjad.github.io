<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>abjad.spanners &mdash; Abjad 3.5 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/abjad.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/uqbar.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/lightbox2/css/lightbox.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="canonical" href="https://abjad.github.io_modules/abjad/spanners.html"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script defer="defer" src="../../_static/copybutton.js"></script>
        <script src="../../_static/ga.js"></script>
        <script defer="defer" src="../../_static/lightbox2/js/lightbox.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #00ff55" >


    <a href="../../index.html" class="icon icon-home" alt="Documentation
    Home"> Abjad 3.5



    <img src="../../_static/abjad-logo.png" class="logo" alt="Logo"/>

</a>




<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">First steps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../first_steps/audience.html">Audience</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../first_steps/macos.html">macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../first_steps/linux.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../first_steps/windows.html">Windows</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview/about-the-docs.html">About the docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/containers.html">Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/containers-basic-operations-on.html">Containers, basic operations on</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/containers-retrieving-by-name.html">Containers, retrieving by name</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/containers-time-interpretation-of.html">Containers, time interpretation of</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/contexts-lilypond-type-of.html">Contexts, LilyPond type of</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/indicators.html">Indicators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/lilypond-files-preamble-of.html">LilyPond files, preamble of</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/lilypond-format-of-abjad-objects.html">LilyPond format, of Abjad objects</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../examples/corpus-selection.html">Corpus, figure selection from</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/design-by-dyads.html">Design, by dyads</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/enumeration.html">Enumeration, of rhythmic cells</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/magic-square-from-twelve-tone-row.html">Magic square, from twelve-tone row</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/scales-diatonic.html">Scales, diatonic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/score-fragment-piano.html">Score fragment, piano</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">All classes &amp; functions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">Abjad API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/best-practices.html">Best practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/changes.html">Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/developer-installation.html">Developer installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/lilypond-context-concatenation.html">LilyPond context concatenation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/publications.html">Publications</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Score gallery</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../gallery-2020.html">2020-16</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gallery-2015.html">2015-11</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gallery-2010.html">2010-00</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #00ff55" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Abjad</a>
      </nav>

      <div class="wy-nav-content">

<div class="rst-content">

    


    <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
    <div itemprop="articleBody">
    
  <h1>Source code for abjad.spanners</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Classes and functions for modeling spanners: beams, hairpins, slurs, etc.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">typing</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">_iterate</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">bind</span> <span class="k">as</span> <span class="n">_bind</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">duration</span> <span class="k">as</span> <span class="n">_duration</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">dynamic</span> <span class="k">as</span> <span class="n">_dynamic</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">enums</span> <span class="k">as</span> <span class="n">_enums</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">indicators</span> <span class="k">as</span> <span class="n">_indicators</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">iterate</span> <span class="k">as</span> <span class="n">iterate_</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">overrides</span> <span class="k">as</span> <span class="n">_overrides</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">parentage</span> <span class="k">as</span> <span class="n">_parentage</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">score</span> <span class="k">as</span> <span class="n">_score</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">selection</span> <span class="k">as</span> <span class="n">_selection</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">sequence</span> <span class="k">as</span> <span class="n">_sequence</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">tag</span> <span class="k">as</span> <span class="n">_tag</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">typings</span> <span class="k">as</span> <span class="n">_typings</span>


<span class="k">def</span> <span class="nf">_apply_tweaks</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">tweaks</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">tweaks</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">manager</span> <span class="o">=</span> <span class="n">_overrides</span><span class="o">.</span><span class="n">tweak</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">tweaks</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
            <span class="n">manager_</span><span class="p">,</span> <span class="n">i_</span> <span class="o">=</span> <span class="n">item</span>
            <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i_</span> <span class="ow">and</span> <span class="n">i_</span> <span class="o">!=</span> <span class="n">i</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">i_</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">i_</span> <span class="o">!=</span> <span class="o">-</span><span class="p">(</span><span class="n">total</span> <span class="o">-</span> <span class="n">i</span><span class="p">):</span>
                <span class="k">continue</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">manager_</span> <span class="o">=</span> <span class="n">item</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">manager_</span><span class="p">,</span> <span class="n">_overrides</span><span class="o">.</span><span class="n">TweakInterface</span><span class="p">)</span>
        <span class="n">tuples</span> <span class="o">=</span> <span class="n">manager_</span><span class="o">.</span><span class="n">_get_attribute_tuples</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">tuples</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">manager</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>


<div class="viewcode-block" id="beam"><a class="viewcode-back" href="../../api/abjad/spanners.html#abjad.spanners.beam">[docs]</a><span class="k">def</span> <span class="nf">beam</span><span class="p">(</span>
    <span class="n">argument</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">_score</span><span class="o">.</span><span class="n">Component</span><span class="p">,</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">beam_lone_notes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">beam_rests</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">durations</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">_duration</span><span class="o">.</span><span class="n">Duration</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="n">_selection</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">(),</span>
    <span class="n">span_beam_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">start_beam</span><span class="p">:</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StartBeam</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">stemlet_length</span><span class="p">:</span> <span class="n">_typings</span><span class="o">.</span><span class="n">Number</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">stop_beam</span><span class="p">:</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StopBeam</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">tag</span><span class="p">:</span> <span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Attaches beam indicators.</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;8 d&#39; e&#39; f&#39;&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.beam(staff[:])</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                c&#39;8</span>
<span class="sd">                [</span>
<span class="sd">                d&#39;8</span>
<span class="sd">                e&#39;8</span>
<span class="sd">                f&#39;8</span>
<span class="sd">                ]</span>
<span class="sd">            }</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">callable</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>
    <span class="n">argument</span> <span class="o">=</span> <span class="n">selector</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
    <span class="n">original_leaves</span> <span class="o">=</span> <span class="n">iterate_</span><span class="o">.</span><span class="n">leaves</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
    <span class="n">original_leaves</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">original_leaves</span><span class="p">)</span>

    <span class="n">silent_prototype</span> <span class="o">=</span> <span class="p">(</span><span class="n">_score</span><span class="o">.</span><span class="n">MultimeasureRest</span><span class="p">,</span> <span class="n">_score</span><span class="o">.</span><span class="n">Rest</span><span class="p">,</span> <span class="n">_score</span><span class="o">.</span><span class="n">Skip</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_is_beamable</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">beam_rests</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="p">(</span><span class="n">_score</span><span class="o">.</span><span class="n">Chord</span><span class="p">,</span> <span class="n">_score</span><span class="o">.</span><span class="n">Note</span><span class="p">)):</span>
            <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">argument</span><span class="o">.</span><span class="n">written_duration</span><span class="o">.</span><span class="n">flag_count</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">beam_rests</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">silent_prototype</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="n">leaves</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">leaf</span> <span class="ow">in</span> <span class="n">original_leaves</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">_is_beamable</span><span class="p">(</span><span class="n">leaf</span><span class="p">,</span> <span class="n">beam_rests</span><span class="o">=</span><span class="n">beam_rests</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">leaves</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">leaf</span><span class="p">)</span>
    <span class="c1"># print(leaves, &quot;LLL&quot;)</span>
    <span class="n">runs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">run</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">run</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">leaves</span><span class="p">[:</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">leaf</span> <span class="ow">in</span> <span class="n">leaves</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
        <span class="n">this_index</span> <span class="o">=</span> <span class="n">original_leaves</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">run</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">that_index</span> <span class="o">=</span> <span class="n">original_leaves</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">leaf</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">this_index</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">that_index</span><span class="p">:</span>
            <span class="n">run</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">leaf</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">selection</span> <span class="o">=</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">(</span><span class="n">run</span><span class="p">)</span>
            <span class="n">runs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span>
            <span class="n">run</span> <span class="o">=</span> <span class="p">[</span><span class="n">leaf</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">run</span><span class="p">:</span>
        <span class="n">selection</span> <span class="o">=</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">(</span><span class="n">run</span><span class="p">)</span>
        <span class="n">runs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span>
    <span class="n">runs_</span> <span class="o">=</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">(</span><span class="n">runs</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">runs_</span><span class="p">,</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">runs_</span><span class="p">)</span>
    <span class="c1"># print(runs, &quot;RRR&quot;, len(runs))</span>
    <span class="c1"># print()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">beam_lone_notes</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">runs_</span><span class="o">.</span><span class="n">nontrivial</span><span class="p">()</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="n">runs_</span> <span class="o">=</span> <span class="n">result</span>
    <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="n">runs_</span><span class="p">:</span>
        <span class="c1"># print(run, &quot;RRR&quot;)</span>
        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">silent_prototype</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">run</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">start_leaf</span> <span class="o">=</span> <span class="n">run</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">stop_leaf</span> <span class="o">=</span> <span class="n">run</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">start_beam_</span> <span class="o">=</span> <span class="n">start_beam</span> <span class="ow">or</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StartBeam</span><span class="p">()</span>
        <span class="n">stop_beam_</span> <span class="o">=</span> <span class="n">stop_beam</span> <span class="ow">or</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StopBeam</span><span class="p">()</span>
        <span class="n">_bind</span><span class="o">.</span><span class="n">detach</span><span class="p">(</span><span class="n">_indicators</span><span class="o">.</span><span class="n">StartBeam</span><span class="p">,</span> <span class="n">start_leaf</span><span class="p">)</span>
        <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">start_beam_</span><span class="p">,</span> <span class="n">start_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
        <span class="n">_bind</span><span class="o">.</span><span class="n">detach</span><span class="p">(</span><span class="n">_indicators</span><span class="o">.</span><span class="n">StopBeam</span><span class="p">,</span> <span class="n">stop_leaf</span><span class="p">)</span>
        <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">stop_beam_</span><span class="p">,</span> <span class="n">stop_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">stemlet_length</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">staff</span> <span class="o">=</span> <span class="n">_parentage</span><span class="o">.</span><span class="n">Parentage</span><span class="p">(</span><span class="n">start_leaf</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">_score</span><span class="o">.</span><span class="n">Staff</span><span class="p">)</span>
        <span class="n">lilypond_type</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">staff</span><span class="p">,</span> <span class="s2">&quot;lilypond_type&quot;</span><span class="p">,</span> <span class="s2">&quot;Staff&quot;</span><span class="p">)</span>
        <span class="n">string</span> <span class="o">=</span> <span class="sa">rf</span><span class="s2">&quot;\override </span><span class="si">{</span><span class="n">lilypond_type</span><span class="si">}</span><span class="s2">.Stem.stemlet-length = </span><span class="si">{</span><span class="n">stemlet_length</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">literal</span> <span class="o">=</span> <span class="n">_overrides</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">indicator</span> <span class="ow">in</span> <span class="n">start_leaf</span><span class="o">.</span><span class="n">_get_indicators</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">indicator</span> <span class="o">==</span> <span class="n">literal</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">start_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
        <span class="n">staff</span> <span class="o">=</span> <span class="n">_parentage</span><span class="o">.</span><span class="n">Parentage</span><span class="p">(</span><span class="n">stop_leaf</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">_score</span><span class="o">.</span><span class="n">Staff</span><span class="p">)</span>
        <span class="n">lilypond_type</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">staff</span><span class="p">,</span> <span class="s2">&quot;lilypond_type&quot;</span><span class="p">,</span> <span class="s2">&quot;Staff&quot;</span><span class="p">)</span>
        <span class="n">string</span> <span class="o">=</span> <span class="sa">rf</span><span class="s2">&quot;\revert </span><span class="si">{</span><span class="n">lilypond_type</span><span class="si">}</span><span class="s2">.Stem.stemlet-length&quot;</span>
        <span class="n">literal</span> <span class="o">=</span> <span class="n">_overrides</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">indicator</span> <span class="ow">in</span> <span class="n">stop_leaf</span><span class="o">.</span><span class="n">_get_indicators</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">indicator</span> <span class="o">==</span> <span class="n">literal</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">stop_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">durations</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">original_leaves</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">def</span> <span class="nf">_leaf_neighbors</span><span class="p">(</span><span class="n">leaf</span><span class="p">,</span> <span class="n">original_leaves</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">leaf</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">original_leaves</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">assert</span> <span class="n">leaf</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">original_leaves</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">this_index</span> <span class="o">=</span> <span class="n">original_leaves</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">leaf</span><span class="p">)</span>
        <span class="n">previous_leaf</span> <span class="o">=</span> <span class="n">original_leaves</span><span class="p">[</span><span class="n">this_index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">previous</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">_is_beamable</span><span class="p">(</span><span class="n">previous_leaf</span><span class="p">,</span> <span class="n">beam_rests</span><span class="o">=</span><span class="n">beam_rests</span><span class="p">):</span>
            <span class="n">previous</span> <span class="o">=</span> <span class="n">previous_leaf</span><span class="o">.</span><span class="n">written_duration</span><span class="o">.</span><span class="n">flag_count</span>
        <span class="n">next_leaf</span> <span class="o">=</span> <span class="n">original_leaves</span><span class="p">[</span><span class="n">this_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">next_</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">_is_beamable</span><span class="p">(</span><span class="n">next_leaf</span><span class="p">,</span> <span class="n">beam_rests</span><span class="o">=</span><span class="n">beam_rests</span><span class="p">):</span>
            <span class="n">next_</span> <span class="o">=</span> <span class="n">next_leaf</span><span class="o">.</span><span class="n">written_duration</span><span class="o">.</span><span class="n">flag_count</span>
        <span class="k">return</span> <span class="n">previous</span><span class="p">,</span> <span class="n">next_</span>

    <span class="n">span_beam_count</span> <span class="o">=</span> <span class="n">span_beam_count</span> <span class="ow">or</span> <span class="mi">1</span>
    <span class="n">durations</span> <span class="o">=</span> <span class="p">[</span><span class="n">_duration</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">durations</span><span class="p">]</span>
    <span class="n">leaf_durations</span> <span class="o">=</span> <span class="p">[</span><span class="n">_</span><span class="o">.</span><span class="n">_get_duration</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">original_leaves</span><span class="p">]</span>
    <span class="n">leaf_durations_</span> <span class="o">=</span> <span class="n">_sequence</span><span class="o">.</span><span class="n">Sequence</span><span class="p">(</span><span class="n">leaf_durations</span><span class="p">)</span>
    <span class="n">parts</span> <span class="o">=</span> <span class="n">leaf_durations_</span><span class="o">.</span><span class="n">partition_by_weights</span><span class="p">(</span><span class="n">durations</span><span class="p">,</span> <span class="n">overhang</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">part_counts</span> <span class="o">=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">parts</span><span class="p">]</span>
    <span class="n">original_leaves</span> <span class="o">=</span> <span class="n">_sequence</span><span class="o">.</span><span class="n">Sequence</span><span class="p">(</span><span class="n">original_leaves</span><span class="p">)</span>
    <span class="n">parts</span> <span class="o">=</span> <span class="n">original_leaves</span><span class="o">.</span><span class="n">partition_by_counts</span><span class="p">(</span><span class="n">part_counts</span><span class="p">)</span>
    <span class="n">total_parts</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">part</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parts</span><span class="p">):</span>
        <span class="n">is_first_part</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">is_first_part</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">is_last_part</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">total_parts</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">is_last_part</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">first_leaf</span> <span class="o">=</span> <span class="n">part</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">flag_count</span> <span class="o">=</span> <span class="n">first_leaf</span><span class="o">.</span><span class="n">written_duration</span><span class="o">.</span><span class="n">flag_count</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">part</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">_is_beamable</span><span class="p">(</span><span class="n">first_leaf</span><span class="p">,</span> <span class="n">beam_rests</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">flag_count</span>
            <span class="n">right</span> <span class="o">=</span> <span class="n">flag_count</span>
            <span class="n">beam_count</span> <span class="o">=</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">BeamCount</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
            <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">beam_count</span><span class="p">,</span> <span class="n">first_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">_is_beamable</span><span class="p">(</span><span class="n">first_leaf</span><span class="p">,</span> <span class="n">beam_rests</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">is_first_part</span><span class="p">:</span>
                <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">left</span> <span class="o">=</span> <span class="n">span_beam_count</span>
            <span class="n">beam_count</span> <span class="o">=</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">BeamCount</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">flag_count</span><span class="p">)</span>
            <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">beam_count</span><span class="p">,</span> <span class="n">first_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
        <span class="n">last_leaf</span> <span class="o">=</span> <span class="n">part</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">_is_beamable</span><span class="p">(</span><span class="n">last_leaf</span><span class="p">,</span> <span class="n">beam_rests</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="n">flag_count</span> <span class="o">=</span> <span class="n">last_leaf</span><span class="o">.</span><span class="n">written_duration</span><span class="o">.</span><span class="n">flag_count</span>
            <span class="k">if</span> <span class="n">is_last_part</span><span class="p">:</span>
                <span class="n">left</span> <span class="o">=</span> <span class="n">flag_count</span>
                <span class="n">right</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">previous</span><span class="p">,</span> <span class="n">next_</span> <span class="o">=</span> <span class="n">_leaf_neighbors</span><span class="p">(</span><span class="n">last_leaf</span><span class="p">,</span> <span class="n">original_leaves</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">previous</span> <span class="o">==</span> <span class="n">next_</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">left</span> <span class="o">=</span> <span class="n">right</span> <span class="o">=</span> <span class="n">flag_count</span>
                <span class="k">elif</span> <span class="n">previous</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">right</span> <span class="o">=</span> <span class="n">flag_count</span>
                <span class="k">elif</span> <span class="n">next_</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">left</span> <span class="o">=</span> <span class="n">flag_count</span>
                    <span class="n">right</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">elif</span> <span class="n">previous</span> <span class="o">==</span> <span class="n">flag_count</span><span class="p">:</span>
                    <span class="n">left</span> <span class="o">=</span> <span class="n">flag_count</span>
                    <span class="n">right</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">span_beam_count</span><span class="p">,</span> <span class="n">next_</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">flag_count</span> <span class="o">==</span> <span class="n">next_</span><span class="p">:</span>
                    <span class="n">left</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">previous</span><span class="p">,</span> <span class="n">flag_count</span><span class="p">)</span>
                    <span class="n">right</span> <span class="o">=</span> <span class="n">flag_count</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">left</span> <span class="o">=</span> <span class="n">flag_count</span>
                    <span class="n">right</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">previous</span><span class="p">,</span> <span class="n">flag_count</span><span class="p">)</span>
            <span class="n">beam_count</span> <span class="o">=</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">BeamCount</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
            <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">beam_count</span><span class="p">,</span> <span class="n">last_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>

        <span class="c1"># TODO: eventually remove middle leaf beam counts?</span>
        <span class="k">for</span> <span class="n">middle_leaf</span> <span class="ow">in</span> <span class="n">part</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">_is_beamable</span><span class="p">(</span><span class="n">middle_leaf</span><span class="p">,</span> <span class="n">beam_rests</span><span class="o">=</span><span class="n">beam_rests</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">middle_leaf</span><span class="p">,</span> <span class="n">silent_prototype</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">flag_count</span> <span class="o">=</span> <span class="n">middle_leaf</span><span class="o">.</span><span class="n">written_duration</span><span class="o">.</span><span class="n">flag_count</span>
            <span class="n">previous</span><span class="p">,</span> <span class="n">next_</span> <span class="o">=</span> <span class="n">_leaf_neighbors</span><span class="p">(</span><span class="n">middle_leaf</span><span class="p">,</span> <span class="n">original_leaves</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">previous</span> <span class="o">==</span> <span class="n">next_</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">left</span> <span class="o">=</span> <span class="n">right</span> <span class="o">=</span> <span class="n">flag_count</span>
            <span class="k">elif</span> <span class="n">previous</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">right</span> <span class="o">=</span> <span class="n">flag_count</span>
            <span class="k">elif</span> <span class="n">next_</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">left</span> <span class="o">=</span> <span class="n">flag_count</span>
                <span class="n">right</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="n">previous</span> <span class="o">==</span> <span class="n">flag_count</span><span class="p">:</span>
                <span class="n">left</span> <span class="o">=</span> <span class="n">flag_count</span>
                <span class="n">right</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">flag_count</span><span class="p">,</span> <span class="n">next_</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">flag_count</span> <span class="o">==</span> <span class="n">next_</span><span class="p">:</span>
                <span class="n">left</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">previous</span><span class="p">,</span> <span class="n">flag_count</span><span class="p">)</span>
                <span class="n">right</span> <span class="o">=</span> <span class="n">flag_count</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">left</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">previous</span><span class="p">,</span> <span class="n">flag_count</span><span class="p">)</span>
                <span class="n">right</span> <span class="o">=</span> <span class="n">flag_count</span>
            <span class="n">beam_count</span> <span class="o">=</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">BeamCount</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
            <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">beam_count</span><span class="p">,</span> <span class="n">middle_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span></div>


<div class="viewcode-block" id="glissando"><a class="viewcode-back" href="../../api/abjad/spanners.html#abjad.spanners.glissando">[docs]</a><span class="k">def</span> <span class="nf">glissando</span><span class="p">(</span>
    <span class="n">argument</span><span class="p">,</span>
    <span class="o">*</span><span class="n">tweaks</span><span class="p">:</span> <span class="n">_overrides</span><span class="o">.</span><span class="n">IndexedTweakManager</span><span class="p">,</span>
    <span class="n">allow_repeats</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">allow_ties</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">hide_middle_note_heads</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">hide_middle_stems</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">hide_stem_selector</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">left_broken</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">parenthesize_repeats</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">right_broken</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">right_broken_show_next</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">tag</span><span class="p">:</span> <span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">zero_padding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Attaches glissando indicators.</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;8 d&#39;8 e&#39;8 f&#39;8&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.glissando(staff[:])</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                c&#39;8</span>
<span class="sd">                \glissando</span>
<span class="sd">                d&#39;8</span>
<span class="sd">                \glissando</span>
<span class="sd">                e&#39;8</span>
<span class="sd">                \glissando</span>
<span class="sd">                f&#39;8</span>
<span class="sd">            }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        Glissando avoids bend-after indicators:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;8 d&#39;8 e&#39;8 f&#39;8&quot;)</span>
<span class="sd">        &gt;&gt;&gt; bend_after = abjad.BendAfter()</span>
<span class="sd">        &gt;&gt;&gt; abjad.attach(bend_after, staff[1])</span>
<span class="sd">        &gt;&gt;&gt; abjad.glissando(staff[:])</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                c&#39;8</span>
<span class="sd">                \glissando</span>
<span class="sd">                d&#39;8</span>
<span class="sd">                - \bendAfter #&#39;-4</span>
<span class="sd">                e&#39;8</span>
<span class="sd">                \glissando</span>
<span class="sd">                f&#39;8</span>
<span class="sd">            }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        Does not allow repeated pitches:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;a8 a8 b8 ~ b8 c&#39;8 c&#39;8 d&#39;8 ~ d&#39;8&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.glissando(</span>
<span class="sd">        ...     staff[:],</span>
<span class="sd">        ...     allow_repeats=False,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                a8</span>
<span class="sd">                a8</span>
<span class="sd">                \glissando</span>
<span class="sd">                b8</span>
<span class="sd">                ~</span>
<span class="sd">                b8</span>
<span class="sd">                \glissando</span>
<span class="sd">                c&#39;8</span>
<span class="sd">                c&#39;8</span>
<span class="sd">                \glissando</span>
<span class="sd">                d&#39;8</span>
<span class="sd">                ~</span>
<span class="sd">                d&#39;8</span>
<span class="sd">            }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        Allows repeated pitches (but not ties):</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;a8 a8 b8 ~ b8 c&#39;8 c&#39;8 d&#39;8 ~ d&#39;8&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.glissando(</span>
<span class="sd">        ...     staff[:],</span>
<span class="sd">        ...     allow_repeats=True,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                a8</span>
<span class="sd">                \glissando</span>
<span class="sd">                a8</span>
<span class="sd">                \glissando</span>
<span class="sd">                b8</span>
<span class="sd">                ~</span>
<span class="sd">                b8</span>
<span class="sd">                \glissando</span>
<span class="sd">                c&#39;8</span>
<span class="sd">                \glissando</span>
<span class="sd">                c&#39;8</span>
<span class="sd">                \glissando</span>
<span class="sd">                d&#39;8</span>
<span class="sd">                ~</span>
<span class="sd">                d&#39;8</span>
<span class="sd">            }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        Allows both repeated pitches and ties:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;a8 a8 b8 ~ b8 c&#39;8 c&#39;8 d&#39;8 ~ d&#39;8&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.glissando(</span>
<span class="sd">        ...     staff[:],</span>
<span class="sd">        ...     allow_repeats=True,</span>
<span class="sd">        ...     allow_ties=True,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                a8</span>
<span class="sd">                \glissando</span>
<span class="sd">                a8</span>
<span class="sd">                \glissando</span>
<span class="sd">                b8</span>
<span class="sd">                ~</span>
<span class="sd">                \glissando</span>
<span class="sd">                b8</span>
<span class="sd">                \glissando</span>
<span class="sd">                c&#39;8</span>
<span class="sd">                \glissando</span>
<span class="sd">                c&#39;8</span>
<span class="sd">                \glissando</span>
<span class="sd">                d&#39;8</span>
<span class="sd">                ~</span>
<span class="sd">                \glissando</span>
<span class="sd">                d&#39;8</span>
<span class="sd">            }</span>

<span class="sd">        Ties are excluded when repeated pitches are not allowed because all</span>
<span class="sd">        ties comprise repeated pitches.</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        Spans and parenthesizes repeated pitches:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;a8 a8 b8 ~ b8 c&#39;8 c&#39;8 d&#39;8 ~ d&#39;8&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.glissando(</span>
<span class="sd">        ...     staff[:],</span>
<span class="sd">        ...     allow_repeats=True,</span>
<span class="sd">        ...     parenthesize_repeats=True,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                a8</span>
<span class="sd">                \glissando</span>
<span class="sd">                \parenthesize</span>
<span class="sd">                a8</span>
<span class="sd">                \glissando</span>
<span class="sd">                b8</span>
<span class="sd">                ~</span>
<span class="sd">                \parenthesize</span>
<span class="sd">                b8</span>
<span class="sd">                \glissando</span>
<span class="sd">                c&#39;8</span>
<span class="sd">                \glissando</span>
<span class="sd">                \parenthesize</span>
<span class="sd">                c&#39;8</span>
<span class="sd">                \glissando</span>
<span class="sd">                d&#39;8</span>
<span class="sd">                ~</span>
<span class="sd">                \parenthesize</span>
<span class="sd">                d&#39;8</span>
<span class="sd">            }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        Parenthesizes (but does not span) repeated pitches:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;a8 a8 b8 ~ b8 c&#39;8 c&#39;8 d&#39;8 ~ d&#39;8&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.glissando(</span>
<span class="sd">        ...     staff[:],</span>
<span class="sd">        ...     parenthesize_repeats=True,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                a8</span>
<span class="sd">                \parenthesize</span>
<span class="sd">                a8</span>
<span class="sd">                \glissando</span>
<span class="sd">                b8</span>
<span class="sd">                ~</span>
<span class="sd">                \parenthesize</span>
<span class="sd">                b8</span>
<span class="sd">                \glissando</span>
<span class="sd">                c&#39;8</span>
<span class="sd">                \parenthesize</span>
<span class="sd">                c&#39;8</span>
<span class="sd">                \glissando</span>
<span class="sd">                d&#39;8</span>
<span class="sd">                ~</span>
<span class="sd">                \parenthesize</span>
<span class="sd">                d&#39;8</span>
<span class="sd">            }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        With ``hide_middle_note_heads`` set to true:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;8 d&#39;8 e&#39;8 f&#39;8&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.glissando(</span>
<span class="sd">        ...     staff[:],</span>
<span class="sd">        ...     hide_middle_note_heads=True,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                c&#39;8</span>
<span class="sd">                \glissando</span>
<span class="sd">                \hide NoteHead</span>
<span class="sd">                \override Accidental.stencil = ##f</span>
<span class="sd">                \override NoteColumn.glissando-skip = ##t</span>
<span class="sd">                \override NoteHead.no-ledgers = ##t</span>
<span class="sd">                d&#39;8</span>
<span class="sd">                e&#39;8</span>
<span class="sd">                \revert Accidental.stencil</span>
<span class="sd">                \revert NoteColumn.glissando-skip</span>
<span class="sd">                \revert NoteHead.no-ledgers</span>
<span class="sd">                \undo \hide NoteHead</span>
<span class="sd">                f&#39;8</span>
<span class="sd">            }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        With ``hide_middle_note_heads`` and ``hide_middle_stems`` both set to</span>
<span class="sd">        true:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;8 d&#39;8 e&#39;8 f&#39;8&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.glissando(</span>
<span class="sd">        ...     staff[:],</span>
<span class="sd">        ...     hide_middle_note_heads=True,</span>
<span class="sd">        ...     hide_middle_stems=True,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                c&#39;8</span>
<span class="sd">                \glissando</span>
<span class="sd">                \hide NoteHead</span>
<span class="sd">                \override Accidental.stencil = ##f</span>
<span class="sd">                \override NoteColumn.glissando-skip = ##t</span>
<span class="sd">                \override NoteHead.no-ledgers = ##t</span>
<span class="sd">                \override Dots.transparent = ##t</span>
<span class="sd">                \override Stem.transparent = ##t</span>
<span class="sd">                d&#39;8</span>
<span class="sd">                e&#39;8</span>
<span class="sd">                \revert Accidental.stencil</span>
<span class="sd">                \revert NoteColumn.glissando-skip</span>
<span class="sd">                \revert NoteHead.no-ledgers</span>
<span class="sd">                \undo \hide NoteHead</span>
<span class="sd">                \revert Dots.transparent</span>
<span class="sd">                \revert Stem.transparent</span>
<span class="sd">                f&#39;8</span>
<span class="sd">            }</span>

<span class="sd">        ..  note:: Respects ``hide_middle_stems`` only when</span>
<span class="sd">            ``hide_middle_note_heads`` is set to true.</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        With right-broken set to true:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;8 d&#39;8 e&#39;8 f&#39;8&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.glissando(</span>
<span class="sd">        ...     staff[:],</span>
<span class="sd">        ...     right_broken=True,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        LilyPond output looks like this:</span>

<span class="sd">        &gt;&gt;&gt; string = abjad.lilypond(staff, tags=True)</span>
<span class="sd">        &gt;&gt;&gt; print(string)</span>
<span class="sd">        \new Staff</span>
<span class="sd">        {</span>
<span class="sd">            c&#39;8</span>
<span class="sd">            %! abjad.glissando(7)</span>
<span class="sd">            \glissando</span>
<span class="sd">            d&#39;8</span>
<span class="sd">            %! abjad.glissando(7)</span>
<span class="sd">            \glissando</span>
<span class="sd">            e&#39;8</span>
<span class="sd">            %! abjad.glissando(7)</span>
<span class="sd">            \glissando</span>
<span class="sd">            f&#39;8</span>
<span class="sd">            %! abjad.glissando(7)</span>
<span class="sd">            %! SHOW_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %@% \glissando</span>
<span class="sd">        }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        With right-broken set to true and ``hide_middle_note_heads`` set to</span>
<span class="sd">        true:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;8 d&#39;8 e&#39;8 f&#39;8&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.glissando(</span>
<span class="sd">        ...     staff[:],</span>
<span class="sd">        ...     right_broken=True,</span>
<span class="sd">        ...     hide_middle_note_heads=True,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        LilyPond output looks like this:</span>

<span class="sd">        &gt;&gt;&gt; string = abjad.lilypond(staff, tags=True)</span>
<span class="sd">        &gt;&gt;&gt; print(string)</span>
<span class="sd">        \new Staff</span>
<span class="sd">        {</span>
<span class="sd">            c&#39;8</span>
<span class="sd">            %! abjad.glissando(7)</span>
<span class="sd">            \glissando</span>
<span class="sd">            %! abjad.glissando(0)</span>
<span class="sd">            %! SHOW_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! RIGHT_BROKEN</span>
<span class="sd">            \hide NoteHead</span>
<span class="sd">            %! abjad.glissando(0)</span>
<span class="sd">            %! SHOW_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! RIGHT_BROKEN</span>
<span class="sd">            \override Accidental.stencil = ##f</span>
<span class="sd">            %! abjad.glissando(0)</span>
<span class="sd">            %! SHOW_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! RIGHT_BROKEN</span>
<span class="sd">            \override NoteColumn.glissando-skip = ##t</span>
<span class="sd">            %! abjad.glissando(0)</span>
<span class="sd">            %! SHOW_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! RIGHT_BROKEN</span>
<span class="sd">            \override NoteHead.no-ledgers = ##t</span>
<span class="sd">            d&#39;8</span>
<span class="sd">            e&#39;8</span>
<span class="sd">            %! abjad.glissando(4)</span>
<span class="sd">            %! HIDE_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! RIGHT_BROKEN</span>
<span class="sd">            \revert Accidental.stencil</span>
<span class="sd">            %! abjad.glissando(4)</span>
<span class="sd">            %! HIDE_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! RIGHT_BROKEN</span>
<span class="sd">            \revert NoteColumn.glissando-skip</span>
<span class="sd">            %! abjad.glissando(4)</span>
<span class="sd">            %! HIDE_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! RIGHT_BROKEN</span>
<span class="sd">            \revert NoteHead.no-ledgers</span>
<span class="sd">            %! abjad.glissando(4)</span>
<span class="sd">            %! HIDE_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! RIGHT_BROKEN</span>
<span class="sd">            \undo \hide NoteHead</span>
<span class="sd">            f&#39;8</span>
<span class="sd">        }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        With ``right_broken``, ``hide_middle_note_heads`` and</span>
<span class="sd">        ``right_broken_show_next`` all set to true:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;8 d&#39;8 e&#39;8 f&#39;8&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.glissando(</span>
<span class="sd">        ...     staff[:],</span>
<span class="sd">        ...     hide_middle_note_heads=True,</span>
<span class="sd">        ...     right_broken=True,</span>
<span class="sd">        ...     right_broken_show_next=True,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        LilyPond output looks like this:</span>

<span class="sd">        &gt;&gt;&gt; string = abjad.lilypond(staff, tags=True)</span>
<span class="sd">        &gt;&gt;&gt; print(string)</span>
<span class="sd">        \new Staff</span>
<span class="sd">        {</span>
<span class="sd">            c&#39;8</span>
<span class="sd">            %! abjad.glissando(7)</span>
<span class="sd">            \glissando</span>
<span class="sd">            %! abjad.glissando(0)</span>
<span class="sd">            %! SHOW_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! RIGHT_BROKEN</span>
<span class="sd">            \hide NoteHead</span>
<span class="sd">            %! abjad.glissando(0)</span>
<span class="sd">            %! SHOW_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! RIGHT_BROKEN</span>
<span class="sd">            \override Accidental.stencil = ##f</span>
<span class="sd">            %! abjad.glissando(0)</span>
<span class="sd">            %! SHOW_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! RIGHT_BROKEN</span>
<span class="sd">            \override NoteColumn.glissando-skip = ##t</span>
<span class="sd">            %! abjad.glissando(0)</span>
<span class="sd">            %! SHOW_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! RIGHT_BROKEN</span>
<span class="sd">            \override NoteHead.no-ledgers = ##t</span>
<span class="sd">            d&#39;8</span>
<span class="sd">            e&#39;8</span>
<span class="sd">            %! abjad.glissando(4)</span>
<span class="sd">            %! HIDE_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! RIGHT_BROKEN</span>
<span class="sd">            \revert Accidental.stencil</span>
<span class="sd">            %! abjad.glissando(4)</span>
<span class="sd">            %! HIDE_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! RIGHT_BROKEN</span>
<span class="sd">            \revert NoteColumn.glissando-skip</span>
<span class="sd">            %! abjad.glissando(4)</span>
<span class="sd">            %! HIDE_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! RIGHT_BROKEN</span>
<span class="sd">            \revert NoteHead.no-ledgers</span>
<span class="sd">            %! abjad.glissando(4)</span>
<span class="sd">            %! HIDE_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! RIGHT_BROKEN</span>
<span class="sd">            \undo \hide NoteHead</span>
<span class="sd">            f&#39;8</span>
<span class="sd">            %! abjad.glissando(5)</span>
<span class="sd">            %! SHOW_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! RIGHT_BROKEN_SHOW_NEXT</span>
<span class="sd">            %@% \revert Accidental.stencil</span>
<span class="sd">            %! abjad.glissando(5)</span>
<span class="sd">            %! SHOW_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! RIGHT_BROKEN_SHOW_NEXT</span>
<span class="sd">            %@% \revert NoteColumn.glissando-skip</span>
<span class="sd">            %! abjad.glissando(5)</span>
<span class="sd">            %! SHOW_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! RIGHT_BROKEN_SHOW_NEXT</span>
<span class="sd">            %@% \revert NoteHead.no-ledgers</span>
<span class="sd">            %! abjad.glissando(5)</span>
<span class="sd">            %! SHOW_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! RIGHT_BROKEN_SHOW_NEXT</span>
<span class="sd">            %@% \undo \hide NoteHead</span>
<span class="sd">        }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        With left-broken set to true (and ``hide_middle_note_heads`` set to</span>
<span class="sd">        true):</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;8 d&#39;8 e&#39;8 f&#39;8&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.glissando(</span>
<span class="sd">        ...     staff[:],</span>
<span class="sd">        ...     left_broken=True,</span>
<span class="sd">        ...     hide_middle_note_heads=True,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        LilyPond output looks like this:</span>

<span class="sd">        &gt;&gt;&gt; string = abjad.lilypond(staff, tags=True)</span>
<span class="sd">        &gt;&gt;&gt; print(string)</span>
<span class="sd">        \new Staff</span>
<span class="sd">        {</span>
<span class="sd">            %! abjad.glissando(2)</span>
<span class="sd">            %! HIDE_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! LEFT_BROKEN</span>
<span class="sd">            \hide NoteHead</span>
<span class="sd">            %! abjad.glissando(2)</span>
<span class="sd">            %! HIDE_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! LEFT_BROKEN</span>
<span class="sd">            \override Accidental.stencil = ##f</span>
<span class="sd">            %! abjad.glissando(2)</span>
<span class="sd">            %! HIDE_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! LEFT_BROKEN</span>
<span class="sd">            \override NoteHead.no-ledgers = ##t</span>
<span class="sd">            c&#39;8</span>
<span class="sd">            %! abjad.glissando(7)</span>
<span class="sd">            \glissando</span>
<span class="sd">            %! abjad.glissando(3)</span>
<span class="sd">            %! HIDE_TO_JOIN_BROKEN_SPANNERS</span>
<span class="sd">            %! LEFT_BROKEN</span>
<span class="sd">            \override NoteColumn.glissando-skip = ##t</span>
<span class="sd">            d&#39;8</span>
<span class="sd">            e&#39;8</span>
<span class="sd">            %! abjad.glissando(6)</span>
<span class="sd">            \revert Accidental.stencil</span>
<span class="sd">            %! abjad.glissando(6)</span>
<span class="sd">            \revert NoteColumn.glissando-skip</span>
<span class="sd">            %! abjad.glissando(6)</span>
<span class="sd">            \revert NoteHead.no-ledgers</span>
<span class="sd">            %! abjad.glissando(6)</span>
<span class="sd">            \undo \hide NoteHead</span>
<span class="sd">            f&#39;8</span>
<span class="sd">        }</span>

<span class="sd">        ..  note:: Respects left-broken only with ``hide_middle_note_heads``</span>
<span class="sd">            set to true.</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        With tweaks applied to every glissando command:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;8 d&#39;8 e&#39;8 f&#39;8&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.glissando(</span>
<span class="sd">        ...     staff[:],</span>
<span class="sd">        ...     abjad.tweak(&quot;#&#39;trill&quot;).style,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                c&#39;8</span>
<span class="sd">                - \tweak style #&#39;trill</span>
<span class="sd">                \glissando</span>
<span class="sd">                d&#39;8</span>
<span class="sd">                - \tweak style #&#39;trill</span>
<span class="sd">                \glissando</span>
<span class="sd">                e&#39;8</span>
<span class="sd">                - \tweak style #&#39;trill</span>
<span class="sd">                \glissando</span>
<span class="sd">                f&#39;8</span>
<span class="sd">            }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        With zero padding on fixed pitch:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;d&#39;8 d&#39;4. d&#39;4. d&#39;8&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.glissando(</span>
<span class="sd">        ...     staff[:],</span>
<span class="sd">        ...     allow_repeats=True,</span>
<span class="sd">        ...     zero_padding=True,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; for note in staff[1:]:</span>
<span class="sd">        ...     abjad.override(note).NoteHead.transparent = True</span>
<span class="sd">        ...     abjad.override(note).NoteHead.X_extent = &quot;#&#39;(0 . 0)&quot;</span>
<span class="sd">        ...</span>
<span class="sd">        &gt;&gt;&gt; lilypond_file = abjad.LilyPondFile([r&#39;\include &quot;abjad.ily&quot;&#39;, staff])</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                d&#39;8</span>
<span class="sd">                - \abjad-zero-padding-glissando</span>
<span class="sd">                \glissando</span>
<span class="sd">                \once \override NoteHead.X-extent = #&#39;(0 . 0)</span>
<span class="sd">                \once \override NoteHead.transparent = ##t</span>
<span class="sd">                d&#39;4.</span>
<span class="sd">                - \abjad-zero-padding-glissando</span>
<span class="sd">                \glissando</span>
<span class="sd">                \once \override NoteHead.X-extent = #&#39;(0 . 0)</span>
<span class="sd">                \once \override NoteHead.transparent = ##t</span>
<span class="sd">                d&#39;4.</span>
<span class="sd">                - \abjad-zero-padding-glissando</span>
<span class="sd">                \glissando</span>
<span class="sd">                \once \override NoteHead.X-extent = #&#39;(0 . 0)</span>
<span class="sd">                \once \override NoteHead.transparent = ##t</span>
<span class="sd">                d&#39;8</span>
<span class="sd">            }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        With zero padding on moving pitch:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;8. d&#39;8. e&#39;8. f&#39;8.&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.glissando(</span>
<span class="sd">        ...     staff[:],</span>
<span class="sd">        ...     zero_padding=True,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; for note in staff[1:-1]:</span>
<span class="sd">        ...     abjad.override(note).NoteHead.transparent = True</span>
<span class="sd">        ...     abjad.override(note).NoteHead.X_extent = &quot;#&#39;(0 . 0)&quot;</span>
<span class="sd">        ...</span>
<span class="sd">        &gt;&gt;&gt; lilypond_file = abjad.LilyPondFile([r&#39;\include &quot;abjad.ily&quot;&#39;, staff])</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                c&#39;8.</span>
<span class="sd">                - \abjad-zero-padding-glissando</span>
<span class="sd">                \glissando</span>
<span class="sd">                \once \override NoteHead.X-extent = #&#39;(0 . 0)</span>
<span class="sd">                \once \override NoteHead.transparent = ##t</span>
<span class="sd">                d&#39;8.</span>
<span class="sd">                - \abjad-zero-padding-glissando</span>
<span class="sd">                \glissando</span>
<span class="sd">                \once \override NoteHead.X-extent = #&#39;(0 . 0)</span>
<span class="sd">                \once \override NoteHead.transparent = ##t</span>
<span class="sd">                e&#39;8.</span>
<span class="sd">                - \abjad-zero-padding-glissando</span>
<span class="sd">                \glissando</span>
<span class="sd">                f&#39;8.</span>
<span class="sd">            }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        With indexed tweaks:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;d&#39;4 d&#39; d&#39; d&#39;&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.glissando(</span>
<span class="sd">        ...     staff[:],</span>
<span class="sd">        ...     (abjad.tweak(&quot;#red&quot;).color, 0),</span>
<span class="sd">        ...     (abjad.tweak(&quot;#red&quot;).color, -1),</span>
<span class="sd">        ...     allow_repeats=True,</span>
<span class="sd">        ...     zero_padding=True,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; for note in staff[1:-1]:</span>
<span class="sd">        ...     abjad.override(note).NoteHead.transparent = True</span>
<span class="sd">        ...     abjad.override(note).NoteHead.X_extent = &quot;#&#39;(0 . 0)&quot;</span>
<span class="sd">        ...</span>
<span class="sd">        &gt;&gt;&gt; lilypond_file = abjad.LilyPondFile([r&#39;\include &quot;abjad.ily&quot;&#39;, staff])</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                d&#39;4</span>
<span class="sd">                - \abjad-zero-padding-glissando</span>
<span class="sd">                - \tweak color #red</span>
<span class="sd">                \glissando</span>
<span class="sd">                \once \override NoteHead.X-extent = #&#39;(0 . 0)</span>
<span class="sd">                \once \override NoteHead.transparent = ##t</span>
<span class="sd">                d&#39;4</span>
<span class="sd">                - \abjad-zero-padding-glissando</span>
<span class="sd">                \glissando</span>
<span class="sd">                \once \override NoteHead.X-extent = #&#39;(0 . 0)</span>
<span class="sd">                \once \override NoteHead.transparent = ##t</span>
<span class="sd">                d&#39;4</span>
<span class="sd">                - \abjad-zero-padding-glissando</span>
<span class="sd">                - \tweak color #red</span>
<span class="sd">                \glissando</span>
<span class="sd">                d&#39;4</span>
<span class="sd">            }</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tag</span> <span class="o">=</span> <span class="n">tag</span> <span class="ow">or</span> <span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">right_broken_show_next</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">right_broken</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;set right_broken_show_next only when right_broken is true.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">hide_middle_stems</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">hide_middle_note_heads</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;set hide_middle_stems only when&quot;</span>
        <span class="n">message</span> <span class="o">+=</span> <span class="s2">&quot; hide_middle_note_heads is true.&quot;</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_is_last_in_tie_chain</span><span class="p">(</span><span class="n">leaf</span><span class="p">):</span>
        <span class="n">logical_tie</span> <span class="o">=</span> <span class="n">_iterate</span><span class="o">.</span><span class="n">_get_logical_tie_leaves</span><span class="p">(</span><span class="n">leaf</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">leaf</span> <span class="ow">is</span> <span class="n">logical_tie</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_next_leaf_changes_current_pitch</span><span class="p">(</span><span class="n">leaf</span><span class="p">):</span>
        <span class="n">next_leaf</span> <span class="o">=</span> <span class="n">_iterate</span><span class="o">.</span><span class="n">_get_leaf</span><span class="p">(</span><span class="n">leaf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">leaf</span><span class="p">,</span> <span class="n">_score</span><span class="o">.</span><span class="n">Note</span><span class="p">)</span>
            <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">next_leaf</span><span class="p">,</span> <span class="n">_score</span><span class="o">.</span><span class="n">Note</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">leaf</span><span class="o">.</span><span class="n">written_pitch</span> <span class="o">==</span> <span class="n">next_leaf</span><span class="o">.</span><span class="n">written_pitch</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">leaf</span><span class="p">,</span> <span class="n">_score</span><span class="o">.</span><span class="n">Chord</span><span class="p">)</span>
            <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">next_leaf</span><span class="p">,</span> <span class="n">_score</span><span class="o">.</span><span class="n">Chord</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">leaf</span><span class="o">.</span><span class="n">written_pitches</span> <span class="o">==</span> <span class="n">next_leaf</span><span class="o">.</span><span class="n">written_pitches</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_parenthesize_leaf</span><span class="p">(</span><span class="n">leaf</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">leaf</span><span class="p">,</span> <span class="n">_score</span><span class="o">.</span><span class="n">Note</span><span class="p">):</span>
            <span class="n">leaf</span><span class="o">.</span><span class="n">note_head</span><span class="o">.</span><span class="n">is_parenthesized</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">leaf</span><span class="p">,</span> <span class="n">_score</span><span class="o">.</span><span class="n">Chord</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">note_head</span> <span class="ow">in</span> <span class="n">leaf</span><span class="o">.</span><span class="n">note_heads</span><span class="p">:</span>
                <span class="n">note_head</span><span class="o">.</span><span class="n">is_parenthesized</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_previous_leaf_changes_current_pitch</span><span class="p">(</span><span class="n">leaf</span><span class="p">):</span>
        <span class="n">previous_leaf</span> <span class="o">=</span> <span class="n">_iterate</span><span class="o">.</span><span class="n">_get_leaf</span><span class="p">(</span><span class="n">leaf</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">leaf</span><span class="p">,</span> <span class="n">_score</span><span class="o">.</span><span class="n">Note</span><span class="p">)</span>
            <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">previous_leaf</span><span class="p">,</span> <span class="n">_score</span><span class="o">.</span><span class="n">Note</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">leaf</span><span class="o">.</span><span class="n">written_pitch</span> <span class="o">==</span> <span class="n">previous_leaf</span><span class="o">.</span><span class="n">written_pitch</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">leaf</span><span class="p">,</span> <span class="n">_score</span><span class="o">.</span><span class="n">Chord</span><span class="p">)</span>
            <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">previous_leaf</span><span class="p">,</span> <span class="n">_score</span><span class="o">.</span><span class="n">Chord</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">leaf</span><span class="o">.</span><span class="n">written_pitches</span> <span class="o">==</span> <span class="n">previous_leaf</span><span class="o">.</span><span class="n">written_pitches</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="n">should_hide_stem</span> <span class="o">=</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">hide_stem_selector</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">should_hide_stem</span> <span class="o">=</span> <span class="n">hide_stem_selector</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>

    <span class="n">leaves</span> <span class="o">=</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">()</span>
    <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">leaves</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">leaf</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">leaves</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">leaf</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">leaves</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">parenthesize_repeats</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">_previous_leaf_changes_current_pitch</span><span class="p">(</span><span class="n">leaf</span><span class="p">):</span>
                    <span class="n">_parenthesize_leaf</span><span class="p">(</span><span class="n">leaf</span><span class="p">)</span>
        <span class="n">should_attach_glissando</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">deactivate_glissando</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">leaf</span><span class="o">.</span><span class="n">_has_indicator</span><span class="p">(</span><span class="n">_indicators</span><span class="o">.</span><span class="n">BendAfter</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="n">leaf</span> <span class="ow">is</span> <span class="n">leaves</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">right_broken</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">should_attach_glissando</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">deactivate_glissando</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">leaf</span><span class="p">,</span> <span class="p">(</span><span class="n">_score</span><span class="o">.</span><span class="n">Chord</span><span class="p">,</span> <span class="n">_score</span><span class="o">.</span><span class="n">Note</span><span class="p">)):</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="n">allow_repeats</span> <span class="ow">and</span> <span class="n">allow_ties</span><span class="p">:</span>
            <span class="n">should_attach_glissando</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">allow_repeats</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">allow_ties</span><span class="p">:</span>
            <span class="n">should_attach_glissando</span> <span class="o">=</span> <span class="n">_is_last_in_tie_chain</span><span class="p">(</span><span class="n">leaf</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">allow_repeats</span> <span class="ow">and</span> <span class="n">allow_ties</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">_next_leaf_changes_current_pitch</span><span class="p">(</span><span class="n">leaf</span><span class="p">):</span>
                <span class="n">should_attach_glissando</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">allow_repeats</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">allow_ties</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">_next_leaf_changes_current_pitch</span><span class="p">(</span><span class="n">leaf</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">_is_last_in_tie_chain</span><span class="p">(</span><span class="n">leaf</span><span class="p">):</span>
                    <span class="n">should_attach_glissando</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">leaf</span> <span class="ow">in</span> <span class="n">should_hide_stem</span><span class="p">:</span>
            <span class="n">strings</span> <span class="o">=</span> <span class="p">[</span>
                <span class="sa">r</span><span class="s2">&quot;\once \override Dots.transparent = ##t&quot;</span><span class="p">,</span>
                <span class="sa">r</span><span class="s2">&quot;\once \override Stem.transparent = ##t&quot;</span><span class="p">,</span>
            <span class="p">]</span>
            <span class="n">literal</span> <span class="o">=</span> <span class="n">_overrides</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="n">strings</span><span class="p">)</span>
            <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s2">&quot;abjad.glissando(-1)&quot;</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">hide_middle_note_heads</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">leaf</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">leaves</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">should_attach_glissando</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">left_broken</span> <span class="ow">and</span> <span class="n">leaf</span> <span class="ow">is</span> <span class="n">leaves</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">strings</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="sa">r</span><span class="s2">&quot;\hide NoteHead&quot;</span><span class="p">,</span>
                    <span class="sa">r</span><span class="s2">&quot;\override Accidental.stencil = ##f&quot;</span><span class="p">,</span>
                    <span class="sa">r</span><span class="s2">&quot;\override NoteColumn.glissando-skip = ##t&quot;</span><span class="p">,</span>
                    <span class="sa">r</span><span class="s2">&quot;\override NoteHead.no-ledgers = ##t&quot;</span><span class="p">,</span>
                <span class="p">]</span>
                <span class="k">if</span> <span class="n">hide_middle_stems</span><span class="p">:</span>
                    <span class="n">strings</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                        <span class="p">[</span>
                            <span class="sa">r</span><span class="s2">&quot;\override Dots.transparent = ##t&quot;</span><span class="p">,</span>
                            <span class="sa">r</span><span class="s2">&quot;\override Stem.transparent = ##t&quot;</span><span class="p">,</span>
                        <span class="p">]</span>
                    <span class="p">)</span>
                <span class="n">literal</span> <span class="o">=</span> <span class="n">_overrides</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="n">strings</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">right_broken</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span>
                        <span class="n">literal</span><span class="p">,</span>
                        <span class="n">leaf</span><span class="p">,</span>
                        <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s2">&quot;abjad.glissando(0)&quot;</span><span class="p">))</span>
                        <span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s2">&quot;SHOW_TO_JOIN_BROKEN_SPANNERS&quot;</span><span class="p">))</span>
                        <span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s2">&quot;RIGHT_BROKEN&quot;</span><span class="p">)),</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span>
                        <span class="n">literal</span><span class="p">,</span>
                        <span class="n">leaf</span><span class="p">,</span>
                        <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s2">&quot;abjad.glissando(1)&quot;</span><span class="p">)),</span>
                    <span class="p">)</span>
            <span class="k">elif</span> <span class="n">left_broken</span> <span class="ow">and</span> <span class="n">leaf</span> <span class="ow">is</span> <span class="n">leaves</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">strings</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="sa">r</span><span class="s2">&quot;\hide NoteHead&quot;</span><span class="p">,</span>
                    <span class="sa">r</span><span class="s2">&quot;\override Accidental.stencil = ##f&quot;</span><span class="p">,</span>
                    <span class="sa">r</span><span class="s2">&quot;\override NoteHead.no-ledgers = ##t&quot;</span><span class="p">,</span>
                <span class="p">]</span>
                <span class="k">if</span> <span class="n">hide_middle_stems</span><span class="p">:</span>
                    <span class="n">strings</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                        <span class="p">[</span>
                            <span class="sa">r</span><span class="s2">&quot;\override Dots.transparent = ##t&quot;</span><span class="p">,</span>
                            <span class="sa">r</span><span class="s2">&quot;\override Stem.transparent = ##t&quot;</span><span class="p">,</span>
                        <span class="p">]</span>
                    <span class="p">)</span>
                <span class="n">literal</span> <span class="o">=</span> <span class="n">_overrides</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="n">strings</span><span class="p">)</span>
                <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span>
                    <span class="n">literal</span><span class="p">,</span>
                    <span class="n">leaf</span><span class="p">,</span>
                    <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s2">&quot;abjad.glissando(2)&quot;</span><span class="p">))</span>
                    <span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s2">&quot;HIDE_TO_JOIN_BROKEN_SPANNERS&quot;</span><span class="p">))</span>
                    <span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s2">&quot;LEFT_BROKEN&quot;</span><span class="p">)),</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">left_broken</span> <span class="ow">and</span> <span class="n">leaf</span> <span class="ow">is</span> <span class="n">leaves</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">string</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;\override NoteColumn.glissando-skip = ##t&quot;</span>
                <span class="n">literal</span> <span class="o">=</span> <span class="n">_overrides</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
                <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span>
                    <span class="n">literal</span><span class="p">,</span>
                    <span class="n">leaf</span><span class="p">,</span>
                    <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s2">&quot;abjad.glissando(3)&quot;</span><span class="p">))</span>
                    <span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s2">&quot;HIDE_TO_JOIN_BROKEN_SPANNERS&quot;</span><span class="p">))</span>
                    <span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s2">&quot;LEFT_BROKEN&quot;</span><span class="p">)),</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="n">leaf</span> <span class="ow">is</span> <span class="n">leaves</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">strings</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="sa">r</span><span class="s2">&quot;\revert Accidental.stencil&quot;</span><span class="p">,</span>
                    <span class="sa">r</span><span class="s2">&quot;\revert NoteColumn.glissando-skip&quot;</span><span class="p">,</span>
                    <span class="sa">r</span><span class="s2">&quot;\revert NoteHead.no-ledgers&quot;</span><span class="p">,</span>
                    <span class="sa">r</span><span class="s2">&quot;\undo \hide NoteHead&quot;</span><span class="p">,</span>
                <span class="p">]</span>
                <span class="k">if</span> <span class="n">hide_middle_stems</span><span class="p">:</span>
                    <span class="n">strings</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                        <span class="p">[</span><span class="sa">r</span><span class="s2">&quot;\revert Dots.transparent&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;\revert Stem.transparent&quot;</span><span class="p">]</span>
                    <span class="p">)</span>
                <span class="k">if</span> <span class="n">right_broken</span><span class="p">:</span>
                    <span class="n">deactivate_glissando</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">literal</span> <span class="o">=</span> <span class="n">_overrides</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="n">strings</span><span class="p">)</span>
                    <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span>
                        <span class="n">literal</span><span class="p">,</span>
                        <span class="n">leaf</span><span class="p">,</span>
                        <span class="n">deactivate</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s2">&quot;abjad.glissando(4)&quot;</span><span class="p">))</span>
                        <span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s2">&quot;HIDE_TO_JOIN_BROKEN_SPANNERS&quot;</span><span class="p">))</span>
                        <span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s2">&quot;RIGHT_BROKEN&quot;</span><span class="p">)),</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="n">right_broken_show_next</span><span class="p">:</span>
                        <span class="n">literal</span> <span class="o">=</span> <span class="n">_overrides</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span>
                            <span class="n">strings</span><span class="p">,</span> <span class="n">format_slot</span><span class="o">=</span><span class="s2">&quot;after&quot;</span>
                        <span class="p">)</span>
                        <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span>
                            <span class="n">literal</span><span class="p">,</span>
                            <span class="n">leaf</span><span class="p">,</span>
                            <span class="n">deactivate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s2">&quot;abjad.glissando(5)&quot;</span><span class="p">))</span>
                            <span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s2">&quot;SHOW_TO_JOIN_BROKEN_SPANNERS&quot;</span><span class="p">))</span>
                            <span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s2">&quot;RIGHT_BROKEN_SHOW_NEXT&quot;</span><span class="p">)),</span>
                        <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">literal</span> <span class="o">=</span> <span class="n">_overrides</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="n">strings</span><span class="p">)</span>
                    <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span>
                        <span class="n">literal</span><span class="p">,</span>
                        <span class="n">leaf</span><span class="p">,</span>
                        <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s2">&quot;abjad.glissando(6)&quot;</span><span class="p">)),</span>
                    <span class="p">)</span>
        <span class="k">if</span> <span class="n">should_attach_glissando</span><span class="p">:</span>
            <span class="n">glissando</span> <span class="o">=</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">Glissando</span><span class="p">(</span><span class="n">zero_padding</span><span class="o">=</span><span class="n">zero_padding</span><span class="p">)</span>
            <span class="n">_apply_tweaks</span><span class="p">(</span><span class="n">glissando</span><span class="p">,</span> <span class="n">tweaks</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="n">total</span><span class="p">)</span>
            <span class="n">tag_</span> <span class="o">=</span> <span class="n">tag</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s2">&quot;abjad.glissando(7)&quot;</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">deactivate_glissando</span><span class="p">:</span>
                <span class="n">tag_</span> <span class="o">=</span> <span class="n">tag_</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s2">&quot;SHOW_TO_JOIN_BROKEN_SPANNERS&quot;</span><span class="p">))</span>
            <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">glissando</span><span class="p">,</span> <span class="n">leaf</span><span class="p">,</span> <span class="n">deactivate</span><span class="o">=</span><span class="n">deactivate_glissando</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag_</span><span class="p">)</span></div>


<div class="viewcode-block" id="hairpin"><a class="viewcode-back" href="../../api/abjad/spanners.html#abjad.spanners.hairpin">[docs]</a><span class="k">def</span> <span class="nf">hairpin</span><span class="p">(</span>
    <span class="n">descriptor</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">argument</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">_score</span><span class="o">.</span><span class="n">Component</span><span class="p">,</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="n">_selection</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">(),</span>
    <span class="n">tag</span><span class="p">:</span> <span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Attaches hairpin indicators.</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        With three-part string descriptor:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;4 d&#39; e&#39; f&#39;&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.hairpin(&quot;p &lt; f&quot;, staff[:])</span>
<span class="sd">        &gt;&gt;&gt; abjad.override(staff[0]).DynamicLineSpanner.staff_padding = 4</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                \once \override DynamicLineSpanner.staff-padding = 4</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                \p</span>
<span class="sd">                \&lt;</span>
<span class="sd">                d&#39;4</span>
<span class="sd">                e&#39;4</span>
<span class="sd">                f&#39;4</span>
<span class="sd">                \f</span>
<span class="sd">            }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        With two-part string descriptor:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;4 d&#39; e&#39; f&#39;&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.hairpin(&quot;&lt; !&quot;, staff[:])</span>
<span class="sd">        &gt;&gt;&gt; abjad.override(staff[0]).DynamicLineSpanner.staff_padding = 4</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                \once \override DynamicLineSpanner.staff-padding = 4</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                \&lt;</span>
<span class="sd">                d&#39;4</span>
<span class="sd">                e&#39;4</span>
<span class="sd">                f&#39;4</span>
<span class="sd">                \!</span>
<span class="sd">            }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        With dynamic objects:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;4 d&#39; e&#39; f&#39;&quot;)</span>
<span class="sd">        &gt;&gt;&gt; start_dynamic = abjad.Dynamic(&quot;niente&quot;, command=r&quot;\!&quot;)</span>
<span class="sd">        &gt;&gt;&gt; start_hairpin = abjad.StartHairpin(&quot;o&lt;|&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.tweak(start_hairpin).color = &quot;#blue&quot;</span>
<span class="sd">        &gt;&gt;&gt; stop_dynamic = abjad.Dynamic(&#39;&quot;f&quot;&#39;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.hairpin([start_dynamic, start_hairpin, stop_dynamic], staff[:])</span>
<span class="sd">        &gt;&gt;&gt; abjad.override(staff[0]).DynamicLineSpanner.staff_padding = 4</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                \once \override DynamicLineSpanner.staff-padding = 4</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                \!</span>
<span class="sd">                - \tweak color #blue</span>
<span class="sd">                - \tweak circled-tip ##t</span>
<span class="sd">                - \tweak stencil #abjad-flared-hairpin</span>
<span class="sd">                \&lt;</span>
<span class="sd">                d&#39;4</span>
<span class="sd">                e&#39;4</span>
<span class="sd">                f&#39;4</span>
<span class="sd">                _ #(make-dynamic-script</span>
<span class="sd">                    (markup</span>
<span class="sd">                        #:whiteout</span>
<span class="sd">                        #:line (</span>
<span class="sd">                            #:general-align Y -2 #:normal-text #:larger &quot;“&quot;</span>
<span class="sd">                            #:hspace -0.4</span>
<span class="sd">                            #:dynamic &quot;f&quot;</span>
<span class="sd">                            #:hspace -0.2</span>
<span class="sd">                            #:general-align Y -2 #:normal-text #:larger &quot;”&quot;</span>
<span class="sd">                            )</span>
<span class="sd">                        )</span>
<span class="sd">                    )</span>
<span class="sd">            }</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">indicators</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">start_dynamic</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">_dynamic</span><span class="o">.</span><span class="n">Dynamic</span><span class="p">]</span>
    <span class="n">hairpin</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">_indicators</span><span class="o">.</span><span class="n">StartHairpin</span><span class="p">]</span>
    <span class="n">stop_dynamic</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">_dynamic</span><span class="o">.</span><span class="n">Dynamic</span><span class="p">]</span>
    <span class="n">known_shapes</span> <span class="o">=</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StartHairpin</span><span class="p">(</span><span class="s2">&quot;&lt;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">known_shapes</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">descriptor</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="n">descriptor</span><span class="o">.</span><span class="n">split</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">string</span> <span class="ow">in</span> <span class="n">known_shapes</span><span class="p">:</span>
                <span class="n">hairpin</span> <span class="o">=</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StartHairpin</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
                <span class="n">indicators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hairpin</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;!&quot;</span><span class="p">:</span>
                <span class="n">stop_hairpin</span> <span class="o">=</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StopHairpin</span><span class="p">()</span>
                <span class="n">indicators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stop_hairpin</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">dynamic</span> <span class="o">=</span> <span class="n">_dynamic</span><span class="o">.</span><span class="n">Dynamic</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
                <span class="n">indicators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dynamic</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">descriptor</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">descriptor</span><span class="p">)</span>
        <span class="n">indicators</span> <span class="o">=</span> <span class="n">descriptor</span>

    <span class="n">start_dynamic</span><span class="p">,</span> <span class="n">hairpin</span><span class="p">,</span> <span class="n">stop_dynamic</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indicators</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">indicators</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">_dynamic</span><span class="o">.</span><span class="n">Dynamic</span><span class="p">):</span>
            <span class="n">start_dynamic</span> <span class="o">=</span> <span class="n">indicators</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">hairpin</span> <span class="o">=</span> <span class="n">indicators</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">indicators</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">indicators</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">_dynamic</span><span class="o">.</span><span class="n">Dynamic</span><span class="p">):</span>
            <span class="n">start_dynamic</span> <span class="o">=</span> <span class="n">indicators</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">hairpin</span> <span class="o">=</span> <span class="n">indicators</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">hairpin</span> <span class="o">=</span> <span class="n">indicators</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">stop_dynamic</span> <span class="o">=</span> <span class="n">indicators</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">indicators</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">start_dynamic</span><span class="p">,</span> <span class="n">hairpin</span><span class="p">,</span> <span class="n">stop_dynamic</span> <span class="o">=</span> <span class="n">indicators</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">indicators</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">start_dynamic</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">start_dynamic</span><span class="p">,</span> <span class="n">_dynamic</span><span class="o">.</span><span class="n">Dynamic</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">start_dynamic</span><span class="p">)</span>

    <span class="k">assert</span> <span class="n">callable</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>
    <span class="n">argument</span> <span class="o">=</span> <span class="n">selector</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
    <span class="n">leaves</span> <span class="o">=</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">()</span>
    <span class="n">start_leaf</span> <span class="o">=</span> <span class="n">leaves</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">stop_leaf</span> <span class="o">=</span> <span class="n">leaves</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">start_dynamic</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">start_dynamic</span><span class="p">,</span> <span class="n">start_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">hairpin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">hairpin</span><span class="p">,</span> <span class="n">start_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">stop_dynamic</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">stop_dynamic</span><span class="p">,</span> <span class="n">stop_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span></div>


<div class="viewcode-block" id="horizontal_bracket"><a class="viewcode-back" href="../../api/abjad/spanners.html#abjad.spanners.horizontal_bracket">[docs]</a><span class="k">def</span> <span class="nf">horizontal_bracket</span><span class="p">(</span>
    <span class="n">argument</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">_score</span><span class="o">.</span><span class="n">Component</span><span class="p">,</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="n">_selection</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">(),</span>
    <span class="n">start_group</span><span class="p">:</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StartGroup</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">stop_group</span><span class="p">:</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StopGroup</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">tag</span><span class="p">:</span> <span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Attaches group indicators.</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;4 d&#39; e&#39; f&#39;&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.horizontal_bracket(staff[:])</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                \startGroup</span>
<span class="sd">                d&#39;4</span>
<span class="sd">                e&#39;4</span>
<span class="sd">                f&#39;4</span>
<span class="sd">                \stopGroup</span>
<span class="sd">            }</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">start_group</span> <span class="o">=</span> <span class="n">start_group</span> <span class="ow">or</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StartGroup</span><span class="p">()</span>
    <span class="n">stop_group</span> <span class="o">=</span> <span class="n">stop_group</span> <span class="ow">or</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StopGroup</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">callable</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>
    <span class="n">argument</span> <span class="o">=</span> <span class="n">selector</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
    <span class="n">leaves</span> <span class="o">=</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">()</span>
    <span class="n">start_leaf</span> <span class="o">=</span> <span class="n">leaves</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">stop_leaf</span> <span class="o">=</span> <span class="n">leaves</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">start_group</span><span class="p">,</span> <span class="n">start_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
    <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">stop_group</span><span class="p">,</span> <span class="n">stop_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span></div>


<div class="viewcode-block" id="ottava"><a class="viewcode-back" href="../../api/abjad/spanners.html#abjad.spanners.ottava">[docs]</a><span class="k">def</span> <span class="nf">ottava</span><span class="p">(</span>
    <span class="n">argument</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">_score</span><span class="o">.</span><span class="n">Component</span><span class="p">,</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="n">_selection</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">(),</span>
    <span class="n">start_ottava</span><span class="p">:</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">Ottava</span> <span class="o">=</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">Ottava</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
    <span class="n">stop_ottava</span><span class="p">:</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">Ottava</span> <span class="o">=</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">Ottava</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">format_slot</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">),</span>
    <span class="n">tag</span><span class="p">:</span> <span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Attaches ottava indicators.</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;4 d&#39; e&#39; f&#39;&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.ottava(staff[:])</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                \ottava 1</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                d&#39;4</span>
<span class="sd">                e&#39;4</span>
<span class="sd">                f&#39;4</span>
<span class="sd">                \ottava 0</span>
<span class="sd">            }</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">start_ottava</span><span class="p">,</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">Ottava</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">start_ottava</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stop_ottava</span><span class="p">,</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">Ottava</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">stop_ottava</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">callable</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>
    <span class="n">argument</span> <span class="o">=</span> <span class="n">selector</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
    <span class="n">leaves</span> <span class="o">=</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">()</span>
    <span class="n">start_leaf</span> <span class="o">=</span> <span class="n">leaves</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">stop_leaf</span> <span class="o">=</span> <span class="n">leaves</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">start_ottava</span><span class="p">,</span> <span class="n">start_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
    <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">stop_ottava</span><span class="p">,</span> <span class="n">stop_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span></div>


<div class="viewcode-block" id="phrasing_slur"><a class="viewcode-back" href="../../api/abjad/spanners.html#abjad.spanners.phrasing_slur">[docs]</a><span class="k">def</span> <span class="nf">phrasing_slur</span><span class="p">(</span>
    <span class="n">argument</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">_score</span><span class="o">.</span><span class="n">Component</span><span class="p">,</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="n">_selection</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">(),</span>
    <span class="n">start_phrasing_slur</span><span class="p">:</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StartPhrasingSlur</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">stop_phrasing_slur</span><span class="p">:</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StopPhrasingSlur</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">tag</span><span class="p">:</span> <span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Attaches phrasing slur indicators.</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;4 d&#39; e&#39; f&#39;&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.phrasing_slur(staff[:])</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                \(</span>
<span class="sd">                d&#39;4</span>
<span class="sd">                e&#39;4</span>
<span class="sd">                f&#39;4</span>
<span class="sd">                \)</span>
<span class="sd">            }</span>


<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">start_phrasing_slur</span> <span class="o">=</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StartPhrasingSlur</span><span class="p">()</span>
    <span class="n">stop_phrasing_slur</span> <span class="o">=</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StopPhrasingSlur</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">callable</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>
    <span class="n">argument</span> <span class="o">=</span> <span class="n">selector</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
    <span class="n">leaves</span> <span class="o">=</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">()</span>
    <span class="n">start_leaf</span> <span class="o">=</span> <span class="n">leaves</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">stop_leaf</span> <span class="o">=</span> <span class="n">leaves</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">start_phrasing_slur</span> <span class="o">=</span> <span class="n">start_phrasing_slur</span> <span class="ow">or</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StartPhrasingSlur</span><span class="p">()</span>
    <span class="n">stop_phrasing_slur</span> <span class="o">=</span> <span class="n">stop_phrasing_slur</span> <span class="ow">or</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StopPhrasingSlur</span><span class="p">()</span>
    <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">start_phrasing_slur</span><span class="p">,</span> <span class="n">start_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
    <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">stop_phrasing_slur</span><span class="p">,</span> <span class="n">stop_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span></div>


<div class="viewcode-block" id="piano_pedal"><a class="viewcode-back" href="../../api/abjad/spanners.html#abjad.spanners.piano_pedal">[docs]</a><span class="k">def</span> <span class="nf">piano_pedal</span><span class="p">(</span>
    <span class="n">argument</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">_score</span><span class="o">.</span><span class="n">Component</span><span class="p">,</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="n">_selection</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">(),</span>
    <span class="n">start_piano_pedal</span><span class="p">:</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StartPianoPedal</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">stop_piano_pedal</span><span class="p">:</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StopPianoPedal</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">tag</span><span class="p">:</span> <span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Attaches piano pedal indicators.</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;4 d&#39; e&#39; f&#39;&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.piano_pedal(staff[:])</span>
<span class="sd">        &gt;&gt;&gt; abjad.setting(staff).pedalSustainStyle = &quot;#&#39;mixed&quot;</span>
<span class="sd">        &gt;&gt;&gt; abjad.override(staff).SustainPedalLineSpanner.staff_padding = 5</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            \with</span>
<span class="sd">            {</span>
<span class="sd">                \override SustainPedalLineSpanner.staff-padding = 5</span>
<span class="sd">                pedalSustainStyle = #&#39;mixed</span>
<span class="sd">            }</span>
<span class="sd">            {</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                \sustainOn</span>
<span class="sd">                d&#39;4</span>
<span class="sd">                e&#39;4</span>
<span class="sd">                f&#39;4</span>
<span class="sd">                \sustainOff</span>
<span class="sd">            }</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">start_piano_pedal</span> <span class="o">=</span> <span class="n">start_piano_pedal</span> <span class="ow">or</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StartPianoPedal</span><span class="p">()</span>
    <span class="n">stop_piano_pedal</span> <span class="o">=</span> <span class="n">stop_piano_pedal</span> <span class="ow">or</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StopPianoPedal</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">callable</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>
    <span class="n">argument</span> <span class="o">=</span> <span class="n">selector</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
    <span class="n">leaves</span> <span class="o">=</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">()</span>
    <span class="n">start_leaf</span> <span class="o">=</span> <span class="n">leaves</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">stop_leaf</span> <span class="o">=</span> <span class="n">leaves</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">start_piano_pedal</span><span class="p">,</span> <span class="n">start_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
    <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">stop_piano_pedal</span><span class="p">,</span> <span class="n">stop_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span></div>


<div class="viewcode-block" id="slur"><a class="viewcode-back" href="../../api/abjad/spanners.html#abjad.spanners.slur">[docs]</a><span class="k">def</span> <span class="nf">slur</span><span class="p">(</span>
    <span class="n">argument</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">_score</span><span class="o">.</span><span class="n">Component</span><span class="p">,</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="n">_selection</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">(),</span>
    <span class="n">start_slur</span><span class="p">:</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StartSlur</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">stop_slur</span><span class="p">:</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StopSlur</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">tag</span><span class="p">:</span> <span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Attaches slur indicators.</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;4 d&#39; e&#39; f&#39;&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.slur(staff[:])</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                (</span>
<span class="sd">                d&#39;4</span>
<span class="sd">                e&#39;4</span>
<span class="sd">                f&#39;4</span>
<span class="sd">                )</span>
<span class="sd">            }</span>


<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">start_slur</span> <span class="o">=</span> <span class="n">start_slur</span> <span class="ow">or</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StartSlur</span><span class="p">()</span>
    <span class="n">stop_slur</span> <span class="o">=</span> <span class="n">stop_slur</span> <span class="ow">or</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StopSlur</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">callable</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>
    <span class="n">argument</span> <span class="o">=</span> <span class="n">selector</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
    <span class="n">leaves</span> <span class="o">=</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">()</span>
    <span class="n">start_leaf</span> <span class="o">=</span> <span class="n">leaves</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">stop_leaf</span> <span class="o">=</span> <span class="n">leaves</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">start_slur</span><span class="p">,</span> <span class="n">start_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
    <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">stop_slur</span><span class="p">,</span> <span class="n">stop_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span></div>


<div class="viewcode-block" id="text_spanner"><a class="viewcode-back" href="../../api/abjad/spanners.html#abjad.spanners.text_spanner">[docs]</a><span class="k">def</span> <span class="nf">text_spanner</span><span class="p">(</span>
    <span class="n">argument</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">_score</span><span class="o">.</span><span class="n">Component</span><span class="p">,</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="n">_selection</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">(),</span>
    <span class="n">start_text_span</span><span class="p">:</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StartTextSpan</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">stop_text_span</span><span class="p">:</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StopTextSpan</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">tag</span><span class="p">:</span> <span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Attaches text span indicators.</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        Single spanner:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;4 d&#39; e&#39; f&#39;&quot;)</span>
<span class="sd">        &gt;&gt;&gt; start_text_span = abjad.StartTextSpan(</span>
<span class="sd">        ...     left_text=abjad.Markup(r&quot;\upright pont.&quot;),</span>
<span class="sd">        ...     right_text=abjad.Markup(r&quot;\markup \upright tasto&quot;),</span>
<span class="sd">        ...     style=&quot;solid-line-with-arrow&quot;,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; abjad.text_spanner(staff[:], start_text_span=start_text_span)</span>
<span class="sd">        &gt;&gt;&gt; abjad.override(staff[0]).TextSpanner.staff_padding = 4</span>
<span class="sd">        &gt;&gt;&gt; lilypond_file = abjad.LilyPondFile([r&#39;\include &quot;abjad.ily&quot;&#39;, staff])</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                \once \override TextSpanner.staff-padding = 4</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                - \abjad-solid-line-with-arrow</span>
<span class="sd">                - \tweak bound-details.left.text \markup \concat { \upright pont. \hspace #0.5 }</span>
<span class="sd">                - \tweak bound-details.right.text \markup \upright tasto</span>
<span class="sd">                \startTextSpan</span>
<span class="sd">                d&#39;4</span>
<span class="sd">                e&#39;4</span>
<span class="sd">                f&#39;4</span>
<span class="sd">                \stopTextSpan</span>
<span class="sd">            }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        Enchained spanners:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;4 d&#39; e&#39; f&#39; r&quot;)</span>
<span class="sd">        &gt;&gt;&gt; start_text_span = abjad.StartTextSpan(</span>
<span class="sd">        ...     left_text=abjad.Markup(r&quot;\upright pont.&quot;),</span>
<span class="sd">        ...     style=&quot;dashed-line-with-arrow&quot;,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; abjad.text_spanner(staff[:3], start_text_span=start_text_span)</span>
<span class="sd">        &gt;&gt;&gt; start_text_span = abjad.StartTextSpan(</span>
<span class="sd">        ...     left_text=abjad.Markup(r&quot;\upright tasto&quot;),</span>
<span class="sd">        ...     right_text=abjad.Markup(r&quot;\markup \upright pont.&quot;),</span>
<span class="sd">        ...     style=&quot;dashed-line-with-arrow&quot;,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; abjad.text_spanner(staff[-3:], start_text_span=start_text_span)</span>
<span class="sd">        &gt;&gt;&gt; abjad.override(staff).TextSpanner.staff_padding = 4</span>
<span class="sd">        &gt;&gt;&gt; lilypond_file = abjad.LilyPondFile([r&#39;\include &quot;abjad.ily&quot;&#39;, staff])</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            \with</span>
<span class="sd">            {</span>
<span class="sd">                \override TextSpanner.staff-padding = 4</span>
<span class="sd">            }</span>
<span class="sd">            {</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                - \abjad-dashed-line-with-arrow</span>
<span class="sd">                - \tweak bound-details.left.text \markup \concat { \upright pont. \hspace #0.5 }</span>
<span class="sd">                \startTextSpan</span>
<span class="sd">                d&#39;4</span>
<span class="sd">                e&#39;4</span>
<span class="sd">                \stopTextSpan</span>
<span class="sd">                - \abjad-dashed-line-with-arrow</span>
<span class="sd">                - \tweak bound-details.left.text \markup \concat { \upright tasto \hspace #0.5 }</span>
<span class="sd">                - \tweak bound-details.right.text \markup \upright pont.</span>
<span class="sd">                \startTextSpan</span>
<span class="sd">                f&#39;4</span>
<span class="sd">                r4</span>
<span class="sd">                \stopTextSpan</span>
<span class="sd">            }</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;4 d&#39; e&#39; f&#39; r&quot;)</span>
<span class="sd">        &gt;&gt;&gt; start_text_span = abjad.StartTextSpan(</span>
<span class="sd">        ...     left_text=abjad.Markup(r&quot;\upright pont.&quot;),</span>
<span class="sd">        ...     style=&quot;dashed-line-with-arrow&quot;,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; abjad.text_spanner(staff[:3], start_text_span=start_text_span)</span>
<span class="sd">        &gt;&gt;&gt; start_text_span = abjad.StartTextSpan(</span>
<span class="sd">        ...     left_text=abjad.Markup(r&quot;\upright tasto&quot;),</span>
<span class="sd">        ...     style=&quot;solid-line-with-hook&quot;,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; abjad.text_spanner(staff[-3:], start_text_span=start_text_span)</span>
<span class="sd">        &gt;&gt;&gt; abjad.override(staff).TextSpanner.staff_padding = 4</span>
<span class="sd">        &gt;&gt;&gt; lilypond_file = abjad.LilyPondFile([r&#39;\include &quot;abjad.ily&quot;&#39;, staff])</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(lilypond_file) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            \with</span>
<span class="sd">            {</span>
<span class="sd">                \override TextSpanner.staff-padding = 4</span>
<span class="sd">            }</span>
<span class="sd">            {</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                - \abjad-dashed-line-with-arrow</span>
<span class="sd">                - \tweak bound-details.left.text \markup \concat { \upright pont. \hspace #0.5 }</span>
<span class="sd">                \startTextSpan</span>
<span class="sd">                d&#39;4</span>
<span class="sd">                e&#39;4</span>
<span class="sd">                \stopTextSpan</span>
<span class="sd">                - \abjad-solid-line-with-hook</span>
<span class="sd">                - \tweak bound-details.left.text \markup \concat { \upright tasto \hspace #0.5 }</span>
<span class="sd">                \startTextSpan</span>
<span class="sd">                f&#39;4</span>
<span class="sd">                r4</span>
<span class="sd">                \stopTextSpan</span>
<span class="sd">            }</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">start_text_span</span> <span class="o">=</span> <span class="n">start_text_span</span> <span class="ow">or</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StartTextSpan</span><span class="p">()</span>
    <span class="n">stop_text_span</span> <span class="o">=</span> <span class="n">stop_text_span</span> <span class="ow">or</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StopTextSpan</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">callable</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>
    <span class="n">argument</span> <span class="o">=</span> <span class="n">selector</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
    <span class="n">leaves</span> <span class="o">=</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">()</span>
    <span class="n">start_leaf</span> <span class="o">=</span> <span class="n">leaves</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">stop_leaf</span> <span class="o">=</span> <span class="n">leaves</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">start_text_span</span><span class="p">,</span> <span class="n">start_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
    <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">stop_text_span</span><span class="p">,</span> <span class="n">stop_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span></div>


<div class="viewcode-block" id="tie"><a class="viewcode-back" href="../../api/abjad/spanners.html#abjad.spanners.tie">[docs]</a><span class="k">def</span> <span class="nf">tie</span><span class="p">(</span>
    <span class="n">argument</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">_score</span><span class="o">.</span><span class="n">Component</span><span class="p">,</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">direction</span><span class="p">:</span> <span class="n">_enums</span><span class="o">.</span><span class="n">VerticalAlignment</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">repeat</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
        <span class="nb">bool</span><span class="p">,</span> <span class="n">_typings</span><span class="o">.</span><span class="n">IntegerPair</span><span class="p">,</span> <span class="n">_selection</span><span class="o">.</span><span class="n">DurationInequality</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="n">_selection</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">(),</span>
    <span class="n">tag</span><span class="p">:</span> <span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Attaches tie indicators.</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;4 c&#39; c&#39; c&#39;&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.tie(staff[:])</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                ~</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                ~</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                ~</span>
<span class="sd">                c&#39;4</span>
<span class="sd">            }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        With repeat ties:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;4 c&#39; c&#39; c&#39;&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.tie(staff[:], repeat=True)</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                \repeatTie</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                \repeatTie</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                \repeatTie</span>
<span class="sd">            }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        Removes any existing ties before attaching new tie:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;4 ~ c&#39; ~ c&#39; ~ c&#39;&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.tie(staff[:])</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                ~</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                ~</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                ~</span>
<span class="sd">                c&#39;4</span>
<span class="sd">            }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        Ties consecutive chords if all adjacent pairs have at least one pitch</span>
<span class="sd">        in common:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;&lt;c&#39;&gt;4 &lt;c&#39; d&#39;&gt;4 &lt;d&#39;&gt;4&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.tie(staff[:])</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                &lt;c&#39;&gt;4</span>
<span class="sd">                ~</span>
<span class="sd">                &lt;c&#39; d&#39;&gt;4</span>
<span class="sd">                ~</span>
<span class="sd">                &lt;d&#39;&gt;4</span>
<span class="sd">            }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        Enharmonics are allowed:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;4 bs c&#39; dff&#39;&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.tie(staff[:])</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                ~</span>
<span class="sd">                bs4</span>
<span class="sd">                ~</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                ~</span>
<span class="sd">                dff&#39;4</span>
<span class="sd">            }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        Repeat tie threshold works like this:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;d&#39;4. d&#39;2 d&#39;4. d&#39;2&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.tie(staff[:], repeat=(4, 8))</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                d&#39;4.</span>
<span class="sd">                ~</span>
<span class="sd">                d&#39;2</span>
<span class="sd">                d&#39;4.</span>
<span class="sd">                \repeatTie</span>
<span class="sd">                ~</span>
<span class="sd">                d&#39;2</span>
<span class="sd">            }</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        Detaches ties before attach:</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;d&#39;2 ~ d&#39;8 ~ d&#39;8 ~ d&#39;8 ~ d&#39;8&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                d&#39;2</span>
<span class="sd">                ~</span>
<span class="sd">                d&#39;8</span>
<span class="sd">                ~</span>
<span class="sd">                d&#39;8</span>
<span class="sd">                ~</span>
<span class="sd">                d&#39;8</span>
<span class="sd">                ~</span>
<span class="sd">                d&#39;8</span>
<span class="sd">            }</span>

<span class="sd">        &gt;&gt;&gt; abjad.tie(staff[:], repeat=(4, 8))</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                d&#39;2</span>
<span class="sd">                d&#39;8</span>
<span class="sd">                \repeatTie</span>
<span class="sd">                ~</span>
<span class="sd">                d&#39;8</span>
<span class="sd">                ~</span>
<span class="sd">                d&#39;8</span>
<span class="sd">                ~</span>
<span class="sd">                d&#39;8</span>
<span class="sd">            }</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">repeat</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
        <span class="n">inequality</span> <span class="o">=</span> <span class="n">_selection</span><span class="o">.</span><span class="n">DurationInequality</span><span class="p">(</span><span class="s2">&quot;&lt;&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">repeat</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">inequality</span> <span class="o">=</span> <span class="n">_selection</span><span class="o">.</span><span class="n">DurationInequality</span><span class="p">(</span><span class="s2">&quot;&gt;=&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">repeat</span><span class="p">,</span> <span class="n">_selection</span><span class="o">.</span><span class="n">DurationInequality</span><span class="p">):</span>
        <span class="n">inequality</span> <span class="o">=</span> <span class="n">repeat</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">repeat</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">repeat</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">repeat</span><span class="p">)</span>
        <span class="n">inequality</span> <span class="o">=</span> <span class="n">_selection</span><span class="o">.</span><span class="n">DurationInequality</span><span class="p">(</span><span class="s2">&quot;&gt;=&quot;</span><span class="p">,</span> <span class="n">repeat</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">inequality</span><span class="p">,</span> <span class="n">_selection</span><span class="o">.</span><span class="n">DurationInequality</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">inequality</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">callable</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>
    <span class="n">argument</span> <span class="o">=</span> <span class="n">selector</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
    <span class="n">leaves</span> <span class="o">=</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">()</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">leaves</span><span class="p">,</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">leaves</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">leaves</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;must be two or more notes (not </span><span class="si">{</span><span class="n">leaves</span><span class="si">!r}</span><span class="s2">).&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">leaf</span> <span class="ow">in</span> <span class="n">leaves</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">leaf</span><span class="p">,</span> <span class="p">(</span><span class="n">_score</span><span class="o">.</span><span class="n">Note</span><span class="p">,</span> <span class="n">_score</span><span class="o">.</span><span class="n">Chord</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">rf</span><span class="s2">&quot;tie note or chord (not </span><span class="si">{</span><span class="n">leaf</span><span class="si">!r}</span><span class="s2">).&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">current_leaf</span><span class="p">,</span> <span class="n">next_leaf</span> <span class="ow">in</span> <span class="n">_sequence</span><span class="o">.</span><span class="n">Sequence</span><span class="p">(</span><span class="n">leaves</span><span class="p">)</span><span class="o">.</span><span class="n">nwise</span><span class="p">():</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="n">current_leaf</span><span class="o">.</span><span class="n">_get_duration</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">inequality</span><span class="p">(</span><span class="n">duration</span><span class="p">):</span>
            <span class="n">_bind</span><span class="o">.</span><span class="n">detach</span><span class="p">(</span><span class="n">_indicators</span><span class="o">.</span><span class="n">Tie</span><span class="p">,</span> <span class="n">current_leaf</span><span class="p">)</span>
            <span class="n">_bind</span><span class="o">.</span><span class="n">detach</span><span class="p">(</span><span class="n">_indicators</span><span class="o">.</span><span class="n">RepeatTie</span><span class="p">,</span> <span class="n">next_leaf</span><span class="p">)</span>
            <span class="n">repeat_tie</span> <span class="o">=</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">RepeatTie</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">)</span>
            <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">repeat_tie</span><span class="p">,</span> <span class="n">next_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_bind</span><span class="o">.</span><span class="n">detach</span><span class="p">(</span><span class="n">_indicators</span><span class="o">.</span><span class="n">Tie</span><span class="p">,</span> <span class="n">current_leaf</span><span class="p">)</span>
            <span class="n">_bind</span><span class="o">.</span><span class="n">detach</span><span class="p">(</span><span class="n">_indicators</span><span class="o">.</span><span class="n">RepeatTie</span><span class="p">,</span> <span class="n">next_leaf</span><span class="p">)</span>
            <span class="n">tie</span> <span class="o">=</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">Tie</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">)</span>
            <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">tie</span><span class="p">,</span> <span class="n">current_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span></div>


<div class="viewcode-block" id="trill_spanner"><a class="viewcode-back" href="../../api/abjad/spanners.html#abjad.spanners.trill_spanner">[docs]</a><span class="k">def</span> <span class="nf">trill_spanner</span><span class="p">(</span>
    <span class="n">argument</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">_score</span><span class="o">.</span><span class="n">Component</span><span class="p">,</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="n">_selection</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">(),</span>
    <span class="n">start_trill_span</span><span class="p">:</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StartTrillSpan</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">stop_trill_span</span><span class="p">:</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StopTrillSpan</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">tag</span><span class="p">:</span> <span class="n">_tag</span><span class="o">.</span><span class="n">Tag</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Attaches trill spanner indicators.</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        &gt;&gt;&gt; staff = abjad.Staff(&quot;c&#39;4 d&#39; e&#39; f&#39;&quot;)</span>
<span class="sd">        &gt;&gt;&gt; abjad.trill_spanner(staff[:])</span>
<span class="sd">        &gt;&gt;&gt; abjad.show(staff) # doctest: +SKIP</span>

<span class="sd">        ..  docs::</span>

<span class="sd">            &gt;&gt;&gt; string = abjad.lilypond(staff)</span>
<span class="sd">            &gt;&gt;&gt; print(string)</span>
<span class="sd">            \new Staff</span>
<span class="sd">            {</span>
<span class="sd">                c&#39;4</span>
<span class="sd">                \startTrillSpan</span>
<span class="sd">                d&#39;4</span>
<span class="sd">                e&#39;4</span>
<span class="sd">                f&#39;4</span>
<span class="sd">                \stopTrillSpan</span>
<span class="sd">            }</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">start_trill_span</span> <span class="o">=</span> <span class="n">start_trill_span</span> <span class="ow">or</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StartTrillSpan</span><span class="p">()</span>
    <span class="n">stop_trill_span</span> <span class="o">=</span> <span class="n">stop_trill_span</span> <span class="ow">or</span> <span class="n">_indicators</span><span class="o">.</span><span class="n">StopTrillSpan</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">callable</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>
    <span class="n">argument</span> <span class="o">=</span> <span class="n">selector</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
    <span class="n">leaves</span> <span class="o">=</span> <span class="n">_selection</span><span class="o">.</span><span class="n">Selection</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">()</span>
    <span class="n">start_leaf</span> <span class="o">=</span> <span class="n">leaves</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">stop_leaf</span> <span class="o">=</span> <span class="n">leaves</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">start_trill_span</span><span class="p">,</span> <span class="n">start_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
    <span class="n">_bind</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">stop_trill_span</span><span class="p">,</span> <span class="n">stop_leaf</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span></div>
</pre></div>

    </div>
    
    </div>
    

<footer>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

</div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>