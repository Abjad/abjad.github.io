

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Score fragment, strings &mdash; Abjad 3.29 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/abjad.css?v=1f187528" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../_static/uqbar.css?v=e6773f5c" />
      <link rel="stylesheet" type="text/css" href="../_static/lightbox2/css/lightbox.css?v=d2ef71d2" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://abjad.github.io_mothballed/score-fragment-strings.html"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=b1e510ba"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/ga.js?v=c455bbd5"></script>
      <script src="../_static/toggleprompt.js?v=5801b3bb"></script>
      <script defer="defer" src="../_static/lightbox2/js/lightbox.js?v=bc25c2e6"></script>
      <script src="../_static/inject-autosummary-fqns.js?v=49afa734"></script>
      <script src="../_static/inject-fqns.js?v=c5423c1b"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #55EE77" >


    <a href="../index.html" class="icon icon-home" alt="Documentation
    Home"> Abjad 3.29



</a>




<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">First steps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../first_steps/audience.html">Audience</a></li>
<li class="toctree-l1"><a class="reference internal" href="../first_steps/macos.html">macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../first_steps/linux.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../first_steps/windows.html">Windows</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/containers.html">Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/containers-basic-operations-on.html">Containers, basic operations on</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/containers-retrieving-by-name.html">Containers, retrieving by name</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/containers-time-interpretation-of.html">Containers, time interpretation of</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/contexts-lilypond-type-of.html">Contexts, LilyPond type of</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/indicators.html">Indicators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/lilypond-files-preamble-of.html">LilyPond files, preamble of</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/lilypond-format-of-abjad-objects.html">LilyPond format, of Abjad objects</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/corpus-selection.html">Corpus, figure selection from</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/design-by-dyads.html">Design, by dyads</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/enumeration.html">Enumeration, of rhythmic cells</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/magic-square-from-twelve-tone-row.html">Magic square, from twelve-tone row</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/scales-diatonic.html">Scales, diatonic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/score-fragment-piano.html">Score fragment, piano</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">All classes &amp; functions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Abjad API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendices/best-practices.html">Best practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/changes.html">Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/developer-installation.html">Developer installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/lilypond-context-concatenation.html">LilyPond context concatenation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/publications.html">Publications</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Score gallery</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../gallery-2020.html">2016-present</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery-2015.html">2015-11</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery-2010.html">2010-00</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #55EE77" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Abjad</a>
      </nav>

      <div class="wy-nav-content">

<div class="rst-content style-external-links">

    


    <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
    <div itemprop="articleBody">
    
  <section id="score-fragment-strings">
<h1>Score fragment, strings<a class="headerlink" href="#score-fragment-strings" title="Link to this heading"></a></h1>
<p>This example models the first two pages of Arvo Pärt’s <em>Cantus in Memory of Benjamin
Britten</em>. First, we generate basic pitches and rhythms for the strings. Then we make
edits to the material by hand. The entire process is encapsulated in a function. The
pitch material is the same for all of the strings: a descending a-minor scale, generally
decorated with dyads. But, each instrument uses a different overall range, with the lower
instrument playing slower than the higher instruments, creating a sort of mensuration
canon. For each instrument, the descending scale is fragmented into what we’ll call
“descents.” The first descent uses only the first note of that instrument’s scale, while
the second descent adds the second note, and the third another. We’ll generate as many
descents per instruments as there are pitches in its overall scale.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">make_scalar_descents</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="gp">... </span><span class="s2">        a, b, c d e f g</span>
<span class="gp">... </span><span class="s2">        a b c&#39; d&#39; e&#39; f&#39; g&#39;</span>
<span class="gp">... </span><span class="s2">        a&#39; b&#39; c&#39;&#39; d&#39;&#39; e&#39;&#39; f&#39;&#39; g&#39;&#39;</span>
<span class="gp">... </span><span class="s2">        a&#39;&#39; b&#39;&#39; c&#39;&#39;&#39; d&#39;&#39;&#39; e&#39;&#39;&#39; f&#39;&#39;&#39; g&#39;&#39;&#39; a&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s2">    &quot;&quot;&quot;</span>
<span class="gp">... </span>    <span class="n">gamut</span> <span class="o">=</span> <span class="p">[</span><span class="n">abjad</span><span class="o">.</span><span class="n">NamedPitch</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>
<span class="gp">... </span>    <span class="n">pitch_ranges</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;Violin_1&quot;</span><span class="p">:</span> <span class="n">abjad</span><span class="o">.</span><span class="n">PitchRange</span><span class="p">(</span><span class="s2">&quot;[C4, A6]&quot;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="s2">&quot;Violin_2&quot;</span><span class="p">:</span> <span class="n">abjad</span><span class="o">.</span><span class="n">PitchRange</span><span class="p">(</span><span class="s2">&quot;[A3, A5]&quot;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="s2">&quot;Viola&quot;</span><span class="p">:</span> <span class="n">abjad</span><span class="o">.</span><span class="n">PitchRange</span><span class="p">(</span><span class="s2">&quot;[E3, A4]&quot;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="s2">&quot;Cello&quot;</span><span class="p">:</span> <span class="n">abjad</span><span class="o">.</span><span class="n">PitchRange</span><span class="p">(</span><span class="s2">&quot;[A2, A3]&quot;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="s2">&quot;Bass&quot;</span><span class="p">:</span> <span class="n">abjad</span><span class="o">.</span><span class="n">PitchRange</span><span class="p">(</span><span class="s2">&quot;[C3, A3]&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span>    <span class="n">voice_name_to_descents</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">voice_name</span><span class="p">,</span> <span class="n">pitch_range</span> <span class="ow">in</span> <span class="n">pitch_ranges</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="gp">... </span>        <span class="n">start</span> <span class="o">=</span> <span class="n">gamut</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">pitch_range</span><span class="o">.</span><span class="n">start_pitch</span><span class="p">())</span>
<span class="gp">... </span>        <span class="n">stop</span> <span class="o">=</span> <span class="n">gamut</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">pitch_range</span><span class="o">.</span><span class="n">stop_pitch</span><span class="p">())</span>
<span class="gp">... </span>        <span class="n">pitches</span> <span class="o">=</span> <span class="n">gamut</span><span class="p">[</span><span class="n">start</span> <span class="p">:</span> <span class="n">stop</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">... </span>        <span class="n">pitches</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="gp">... </span>        <span class="n">pitch_descents</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pitches</span><span class="p">)):</span>
<span class="gp">... </span>            <span class="n">descent</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">pitches</span><span class="p">[:</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
<span class="gp">... </span>            <span class="n">pitch_descents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">descent</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">voice_name_to_descents</span><span class="p">[</span><span class="n">voice_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">pitch_descents</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">voice_name_to_descents</span>
<span class="gp">... </span>
</pre></div>
</div>
<p>Here are the violin descents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">voice_name_to_descents</span> <span class="o">=</span> <span class="n">make_scalar_descents</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">descents</span> <span class="o">=</span> <span class="n">voice_name_to_descents</span><span class="p">[</span><span class="s2">&quot;Violin_1&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">descent</span> <span class="ow">in</span> <span class="n">descents</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">descent</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>
<span class="go">NamedPitch(&quot;a&#39;&#39;&#39;&quot;)</span>
<span class="go">NamedPitch(&quot;a&#39;&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&#39;&quot;)</span>
<span class="go">NamedPitch(&quot;a&#39;&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&#39;&quot;)</span>
<span class="go">NamedPitch(&quot;a&#39;&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&#39;&quot;)</span>
<span class="go">NamedPitch(&quot;a&#39;&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&#39;&quot;)</span>
<span class="go">NamedPitch(&quot;a&#39;&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&#39;&quot;)</span>
<span class="go">NamedPitch(&quot;a&#39;&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&#39;&quot;)</span>
<span class="go">NamedPitch(&quot;a&#39;&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&#39;&quot;) NamedPitch(&quot;a&#39;&#39;&quot;)</span>
<span class="go">NamedPitch(&quot;a&#39;&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&#39;&quot;) NamedPitch(&quot;a&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&quot;)</span>
<span class="go">NamedPitch(&quot;a&#39;&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&#39;&quot;) NamedPitch(&quot;a&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&quot;)</span>
<span class="go">NamedPitch(&quot;a&#39;&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&#39;&quot;) NamedPitch(&quot;a&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&quot;)</span>
<span class="go">NamedPitch(&quot;a&#39;&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&#39;&quot;) NamedPitch(&quot;a&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&quot;)</span>
<span class="go">NamedPitch(&quot;a&#39;&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&#39;&quot;) NamedPitch(&quot;a&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&quot;)</span>
<span class="go">NamedPitch(&quot;a&#39;&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&#39;&quot;) NamedPitch(&quot;a&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&quot;)</span>
<span class="go">NamedPitch(&quot;a&#39;&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&#39;&quot;) NamedPitch(&quot;a&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&quot;) NamedPitch(&quot;a&#39;&quot;)</span>
<span class="go">NamedPitch(&quot;a&#39;&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&#39;&quot;) NamedPitch(&quot;a&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&quot;) NamedPitch(&quot;a&#39;&quot;) NamedPitch(&quot;g&#39;&quot;)</span>
<span class="go">NamedPitch(&quot;a&#39;&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&#39;&quot;) NamedPitch(&quot;a&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&quot;) NamedPitch(&quot;a&#39;&quot;) NamedPitch(&quot;g&#39;&quot;) NamedPitch(&quot;f&#39;&quot;)</span>
<span class="go">NamedPitch(&quot;a&#39;&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&#39;&quot;) NamedPitch(&quot;a&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&quot;) NamedPitch(&quot;a&#39;&quot;) NamedPitch(&quot;g&#39;&quot;) NamedPitch(&quot;f&#39;&quot;) NamedPitch(&quot;e&#39;&quot;)</span>
<span class="go">NamedPitch(&quot;a&#39;&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&#39;&quot;) NamedPitch(&quot;a&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&quot;) NamedPitch(&quot;a&#39;&quot;) NamedPitch(&quot;g&#39;&quot;) NamedPitch(&quot;f&#39;&quot;) NamedPitch(&quot;e&#39;&quot;) NamedPitch(&quot;d&#39;&quot;)</span>
<span class="go">NamedPitch(&quot;a&#39;&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&#39;&quot;) NamedPitch(&quot;a&#39;&#39;&quot;) NamedPitch(&quot;g&#39;&#39;&quot;) NamedPitch(&quot;f&#39;&#39;&quot;) NamedPitch(&quot;e&#39;&#39;&quot;) NamedPitch(&quot;d&#39;&#39;&quot;) NamedPitch(&quot;c&#39;&#39;&quot;) NamedPitch(&quot;b&#39;&quot;) NamedPitch(&quot;a&#39;&quot;) NamedPitch(&quot;g&#39;&quot;) NamedPitch(&quot;f&#39;&quot;) NamedPitch(&quot;e&#39;&quot;) NamedPitch(&quot;d&#39;&quot;) NamedPitch(&quot;c&#39;&quot;)</span>
</pre></div>
</div>
<p>Next we add dyads to all of the descents, except for the viola’s. We’ll use a dictionary
as a lookup table, to tell us what interval to add below a given pitch class. Nonfinal
descents are treated one way; the final descent in each voice is treated another way:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">make_pitch_pair_descents</span><span class="p">(</span><span class="n">voice_to_scalar_descents</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">pc_to_interval</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">4</span><span class="p">}</span>
<span class="gp">... </span>    <span class="n">pc_to_interval</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">2</span><span class="p">})</span>
<span class="gp">... </span>    <span class="n">voice_to_pitch_pair_descents</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">voice_name</span><span class="p">,</span> <span class="n">scalar_descents</span> <span class="ow">in</span> <span class="n">voice_to_scalar_descents</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="n">voice_name</span> <span class="o">==</span> <span class="s2">&quot;Viola&quot;</span><span class="p">:</span>
<span class="gp">... </span>            <span class="n">voice_to_pitch_pair_descents</span><span class="p">[</span><span class="s2">&quot;Viola&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">scalar_descents</span>
<span class="gp">... </span>            <span class="k">continue</span>
<span class="gp">... </span>        <span class="n">pitch_pair_descents</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">scalar_descent</span> <span class="ow">in</span> <span class="n">scalar_descents</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
<span class="gp">... </span>            <span class="n">pitch_pair_descent</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">... </span>            <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="n">scalar_descent</span><span class="p">:</span>
<span class="gp">... </span>                <span class="n">pitch_class</span> <span class="o">=</span> <span class="n">pitch</span><span class="o">.</span><span class="n">pitch_class</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">()</span>
<span class="gp">... </span>                <span class="n">shadow_pitch</span> <span class="o">=</span> <span class="n">pitch</span> <span class="o">+</span> <span class="n">pc_to_interval</span><span class="p">[</span><span class="n">pitch_class</span><span class="p">]</span>
<span class="gp">... </span>                <span class="n">pitch_pair</span> <span class="o">=</span> <span class="p">(</span><span class="n">shadow_pitch</span><span class="p">,</span> <span class="n">pitch</span><span class="p">)</span>
<span class="gp">... </span>                <span class="n">pitch_pair_descent</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pitch_pair</span><span class="p">)</span>
<span class="gp">... </span>            <span class="n">pitch_pair_descents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">pitch_pair_descent</span><span class="p">))</span>
<span class="gp">... </span>        <span class="n">final_pitch_pair_descent</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="n">scalar_descents</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
<span class="gp">... </span>            <span class="n">pitch_class</span> <span class="o">=</span> <span class="n">pitch</span><span class="o">.</span><span class="n">pitch_class</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">()</span>
<span class="gp">... </span>            <span class="n">shadow_pitch</span> <span class="o">=</span> <span class="n">pitch</span> <span class="o">+</span> <span class="n">pc_to_interval</span><span class="p">[</span><span class="n">pitch_class</span><span class="p">]</span>
<span class="gp">... </span>            <span class="n">pitch_pair</span> <span class="o">=</span> <span class="p">(</span><span class="n">shadow_pitch</span><span class="p">,</span> <span class="n">pitch</span><span class="p">)</span>
<span class="gp">... </span>            <span class="n">final_pitch_pair_descent</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pitch_pair</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">final_pitch_pair_descent</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">scalar_descents</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">... </span>        <span class="n">pitch_pair_descents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">final_pitch_pair_descent</span><span class="p">))</span>
<span class="gp">... </span>        <span class="n">voice_to_pitch_pair_descents</span><span class="p">[</span><span class="n">voice_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">pitch_pair_descents</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">voice_to_pitch_pair_descents</span>
<span class="gp">... </span>
</pre></div>
</div>
<p>Here’s what’s inside:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">voice_to_descents</span> <span class="o">=</span> <span class="n">make_scalar_descents</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">voice_to_descents</span> <span class="o">=</span> <span class="n">make_pitch_pair_descents</span><span class="p">(</span><span class="n">voice_to_descents</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">descents</span> <span class="o">=</span> <span class="n">voice_to_descents</span><span class="p">[</span><span class="s2">&quot;Violin_1&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">descent</span> <span class="ow">in</span> <span class="n">descents</span><span class="p">[:</span><span class="mi">7</span><span class="p">]:</span>
<span class="gp">... </span>    <span class="n">strings</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">descent</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
<span class="gp">... </span>            <span class="n">string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="si">}</span><span class="s2">)&quot;</span>
<span class="gp">... </span>        <span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>            <span class="n">string</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">strings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">strings</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>
<span class="go">(NamedPitch(&quot;e&#39;&#39;&#39;&quot;), NamedPitch(&quot;a&#39;&#39;&#39;&quot;))</span>
<span class="go">(NamedPitch(&quot;e&#39;&#39;&#39;&quot;), NamedPitch(&quot;a&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;e&#39;&#39;&#39;&quot;), NamedPitch(&quot;g&#39;&#39;&#39;&quot;))</span>
<span class="go">(NamedPitch(&quot;e&#39;&#39;&#39;&quot;), NamedPitch(&quot;a&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;e&#39;&#39;&#39;&quot;), NamedPitch(&quot;g&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;e&#39;&#39;&#39;&quot;), NamedPitch(&quot;f&#39;&#39;&#39;&quot;))</span>
<span class="go">(NamedPitch(&quot;e&#39;&#39;&#39;&quot;), NamedPitch(&quot;a&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;e&#39;&#39;&#39;&quot;), NamedPitch(&quot;g&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;e&#39;&#39;&#39;&quot;), NamedPitch(&quot;f&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;c&#39;&#39;&#39;&quot;), NamedPitch(&quot;e&#39;&#39;&#39;&quot;))</span>
<span class="go">(NamedPitch(&quot;e&#39;&#39;&#39;&quot;), NamedPitch(&quot;a&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;e&#39;&#39;&#39;&quot;), NamedPitch(&quot;g&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;e&#39;&#39;&#39;&quot;), NamedPitch(&quot;f&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;c&#39;&#39;&#39;&quot;), NamedPitch(&quot;e&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;c&#39;&#39;&#39;&quot;), NamedPitch(&quot;d&#39;&#39;&#39;&quot;))</span>
<span class="go">(NamedPitch(&quot;e&#39;&#39;&#39;&quot;), NamedPitch(&quot;a&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;e&#39;&#39;&#39;&quot;), NamedPitch(&quot;g&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;e&#39;&#39;&#39;&quot;), NamedPitch(&quot;f&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;c&#39;&#39;&#39;&quot;), NamedPitch(&quot;e&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;c&#39;&#39;&#39;&quot;), NamedPitch(&quot;d&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;a&#39;&#39;&quot;), NamedPitch(&quot;c&#39;&#39;&#39;&quot;))</span>
<span class="go">(NamedPitch(&quot;e&#39;&#39;&#39;&quot;), NamedPitch(&quot;a&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;e&#39;&#39;&#39;&quot;), NamedPitch(&quot;g&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;e&#39;&#39;&#39;&quot;), NamedPitch(&quot;f&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;c&#39;&#39;&#39;&quot;), NamedPitch(&quot;e&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;c&#39;&#39;&#39;&quot;), NamedPitch(&quot;d&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;a&#39;&#39;&quot;), NamedPitch(&quot;c&#39;&#39;&#39;&quot;)) (NamedPitch(&quot;a&#39;&#39;&quot;), NamedPitch(&quot;b&#39;&#39;&quot;))</span>
</pre></div>
</div>
<p>Now we’ll add rhythms to the descents we’ve been constructing. Each string instrument
plays twice as slow as the string instrument above it in the score. Additionally, all the
strings start with some rests, and use a long-short pattern for their rhythms:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">make_chord_descents</span><span class="p">(</span><span class="n">voice_to_pitch_pair_descents</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">voice_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Violin_1&quot;</span><span class="p">,</span> <span class="s2">&quot;Violin_2&quot;</span><span class="p">,</span> <span class="s2">&quot;Viola&quot;</span><span class="p">,</span> <span class="s2">&quot;Cello&quot;</span><span class="p">,</span> <span class="s2">&quot;Bass&quot;</span><span class="p">]</span>
<span class="gp">... </span>    <span class="n">voice_to_descents</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">voice_name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">voice_names</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">long_duration</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="n">i</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">short_duration</span> <span class="o">=</span> <span class="n">long_duration</span> <span class="o">/</span> <span class="mi">2</span>
<span class="gp">... </span>        <span class="n">rest_duration</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">long_duration</span>
<span class="gp">... </span>        <span class="n">div</span> <span class="o">=</span> <span class="n">rest_duration</span> <span class="o">//</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">mod</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="n">rest_duration</span> <span class="o">%</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">... </span>        <span class="n">initial_rest</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">div</span><span class="p">):</span>
<span class="gp">... </span>            <span class="n">rest</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">MultimeasureRest</span><span class="p">(</span><span class="s2">&quot;R1.&quot;</span><span class="p">)</span>
<span class="gp">... </span>            <span class="n">initial_rest</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rest</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="n">mod</span><span class="p">:</span>
<span class="gp">... </span>            <span class="n">rest</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Rest</span><span class="o">.</span><span class="n">from_duration</span><span class="p">(</span><span class="n">mod</span><span class="p">)</span>
<span class="gp">... </span>            <span class="n">initial_rest</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rest</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">chord_descents</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">initial_rest</span><span class="p">)]</span>
<span class="gp">... </span>        <span class="n">pitch_pair_descents</span> <span class="o">=</span> <span class="n">voice_to_pitch_pair_descents</span><span class="p">[</span><span class="n">voice_name</span><span class="p">]</span>
<span class="gp">... </span>        <span class="n">durations</span> <span class="o">=</span> <span class="p">[</span><span class="n">long_duration</span><span class="p">,</span> <span class="n">short_duration</span><span class="p">]</span>
<span class="gp">... </span>        <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">pitch_pair_descent</span> <span class="ow">in</span> <span class="n">pitch_pair_descents</span><span class="p">:</span>
<span class="gp">... </span>            <span class="n">chord_descent</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">... </span>            <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="n">pitch_pair_descent</span><span class="p">:</span>
<span class="gp">... </span>                <span class="n">duration</span> <span class="o">=</span> <span class="n">durations</span><span class="p">[</span><span class="n">counter</span><span class="p">]</span>
<span class="gp">... </span>                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pitch</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
<span class="gp">... </span>                    <span class="n">chord</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Chord</span><span class="o">.</span><span class="n">from_duration_and_pitches</span><span class="p">(</span>
<span class="gp">... </span>                        <span class="n">duration</span><span class="p">,</span> <span class="n">pitch</span>
<span class="gp">... </span>                    <span class="p">)</span>
<span class="gp">... </span>                    <span class="n">chord_descent</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">chord</span><span class="p">)</span>
<span class="gp">... </span>                <span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>                    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pitch</span><span class="p">,</span> <span class="n">abjad</span><span class="o">.</span><span class="n">NamedPitch</span><span class="p">)</span>
<span class="gp">... </span>                    <span class="n">note</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Note</span><span class="o">.</span><span class="n">from_duration_and_pitch</span><span class="p">(</span><span class="n">duration</span><span class="p">,</span> <span class="n">pitch</span><span class="p">)</span>
<span class="gp">... </span>                    <span class="n">chord_descent</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">note</span><span class="p">)</span>
<span class="gp">... </span>                <span class="n">counter</span> <span class="o">=</span> <span class="p">(</span><span class="n">counter</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span>
<span class="gp">... </span>            <span class="n">chord_descents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">chord_descent</span><span class="p">))</span>
<span class="gp">... </span>        <span class="n">voice_to_descents</span><span class="p">[</span><span class="n">voice_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">chord_descents</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">voice_to_descents</span>
<span class="gp">... </span>
</pre></div>
</div>
<p>Let’s see what a few of these look like. Here are the first ten violin 1 descents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">voice_to_descents</span> <span class="o">=</span> <span class="n">make_scalar_descents</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">voice_to_descents</span> <span class="o">=</span> <span class="n">make_pitch_pair_descents</span><span class="p">(</span><span class="n">voice_to_descents</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">voice_to_descents</span> <span class="o">=</span> <span class="n">make_chord_descents</span><span class="p">(</span><span class="n">voice_to_descents</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">descents</span> <span class="o">=</span> <span class="n">voice_to_descents</span><span class="p">[</span><span class="s2">&quot;Violin_1&quot;</span><span class="p">][:</span><span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">descent</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">descents</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="sa">rf</span><span class="s2">&quot;\markup \rounded-box \bold </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="gp">... </span>    <span class="n">markup</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">descent</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">direction</span><span class="o">=</span><span class="n">abjad</span><span class="o">.</span><span class="n">UP</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">leaves</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">sequence</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">descents</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">leaves</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Score</span><span class="p">([</span><span class="n">staff</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Score&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_signature</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">leaf</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">leaf</span><span class="p">(</span><span class="n">staff</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">time_signature</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-ebbf0792d62bfe2692bb3764adcabfc6ce8d53c224faeef536d49e059599916e.ly"><img src="../_images/lilypond-ebbf0792d62bfe2692bb3764adcabfc6ce8d53c224faeef536d49e059599916e.cropped.svg"/></a>
</div><p>Here are the first ten violin 2 descents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">descents</span> <span class="o">=</span> <span class="n">voice_to_descents</span><span class="p">[</span><span class="s2">&quot;Violin_2&quot;</span><span class="p">][:</span><span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">descent</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">descents</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="sa">rf</span><span class="s2">&quot;\markup \rounded-box \bold </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="gp">... </span>    <span class="n">markup</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">descent</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">direction</span><span class="o">=</span><span class="n">abjad</span><span class="o">.</span><span class="n">UP</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">leaves</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">sequence</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">descents</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">leaves</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Score</span><span class="p">([</span><span class="n">staff</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Score&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_signature</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">leaf</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">leaf</span><span class="p">(</span><span class="n">staff</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">time_signature</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-dcec8a1e886b33052008ab5490dbc2e139fafa37f033411cf48af0a2a9997ba8.ly"><img src="../_images/lilypond-dcec8a1e886b33052008ab5490dbc2e139fafa37f033411cf48af0a2a9997ba8.cropped.svg"/></a>
</div><p>Here are the first ten viola descents. They have some longer notes, so we’ll split their
music cyclically every 3 half notes, just so nothing crosses the bar lines accidentally.
You can see how each part is twice as slow as the previous, and starts a little bit later
too:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">descents</span> <span class="o">=</span> <span class="n">voice_to_descents</span><span class="p">[</span><span class="s2">&quot;Viola&quot;</span><span class="p">][:</span><span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">descent</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">descents</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="sa">rf</span><span class="s2">&quot;\markup \rounded-box \bold </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="gp">... </span>    <span class="n">markup</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">descent</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">direction</span><span class="o">=</span><span class="n">abjad</span><span class="o">.</span><span class="n">UP</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">notes</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">sequence</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">descents</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Score</span><span class="p">([</span><span class="n">staff</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Score&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">duration</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lists</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">staff</span><span class="p">[:],</span> <span class="p">[</span><span class="n">duration</span><span class="p">],</span> <span class="n">cyclic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_signature</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">leaf</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">leaf</span><span class="p">(</span><span class="n">staff</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">time_signature</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-5f661894e79dcc983548955f244dc1e3da87693613529e4e629c325ebea81f6f.ly"><img src="../_images/lilypond-5f661894e79dcc983548955f244dc1e3da87693613529e4e629c325ebea81f6f.cropped.svg"/></a>
</div><hr class="docutils" />
<p>We define more functions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">make_lilypond_file</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">preamble</span><span class="p">,</span> <span class="n">dynamic_commands</span><span class="p">,</span> <span class="n">markup_commands</span><span class="p">,</span> <span class="n">rehearsal_marks</span><span class="p">,</span> <span class="n">breaks</span>
<span class="gp">... </span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">score</span> <span class="o">=</span> <span class="n">make_empty_score</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">add_bell_music</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">add_string_music</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">attach_contexted_indicators</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">attach_bow_marks</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">handle_dynamic_commands</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">dynamic_commands</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">handle_markup_commands</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">markup_commands</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">attach_page_breaks</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">breaks</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">attach_rehearsal_marks</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">rehearsal_marks</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">lilypond_file</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">LilyPondFile</span><span class="p">([</span><span class="n">preamble</span><span class="p">,</span> <span class="n">score</span><span class="p">])</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">lilypond_file</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">make_empty_score</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">bell_voice</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Bell_Voice&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">bell_staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">bell_voice</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Bell_Staff&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">violin_1_voice</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Violin_1_Voice&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">violin_1_staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">violin_1_voice</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Violin_1_Staff&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">violin_2_voice</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Violin_2_Voice&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">violin_2_staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">violin_2_voice</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Violin_2_Staff&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">viola_voice</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Viola_Voice&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">viola_staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">viola_voice</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Viola_Staff&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">cello_voice</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Cello_Voice&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">cello_staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">cello_voice</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Cello_Staff&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">bass_voice</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Bass_Voice&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">bass_staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">bass_voice</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Bass_Staff&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">staves</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>        <span class="n">violin_1_staff</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">violin_2_staff</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">viola_staff</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">cello_staff</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">bass_staff</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">]</span>
<span class="gp">... </span>    <span class="n">strings_staff_group</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">StaffGroup</span><span class="p">(</span><span class="n">staves</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Strings_Staff_Group&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">score</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Score</span><span class="p">([</span><span class="n">bell_staff</span><span class="p">,</span> <span class="n">strings_staff_group</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Score&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">score</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">add_bell_music</span><span class="p">(</span><span class="n">score</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">bell_voice</span> <span class="o">=</span> <span class="n">score</span><span class="p">[</span><span class="s2">&quot;Bell_Voice&quot;</span><span class="p">]</span>
<span class="gp">... </span>    <span class="n">strings</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="p">[</span><span class="sa">r</span><span class="s2">&quot;{ r2. a&#39;2. \laissezVibrer }&quot;</span><span class="p">,</span> <span class="s2">&quot;{ R1. }&quot;</span><span class="p">]</span>
<span class="gp">... </span>    <span class="n">strings</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;{ R1. }&quot;</span><span class="p">,</span> <span class="s2">&quot;{ R1. }&quot;</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">strings</span> <span class="o">=</span> <span class="mi">11</span> <span class="o">*</span> <span class="n">strings</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="n">strings</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">bell_voice</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">strings</span> <span class="o">=</span> <span class="mi">19</span> <span class="o">*</span> <span class="p">[</span><span class="s2">&quot;{ R1. }&quot;</span><span class="p">]</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="n">strings</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">bell_voice</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">bell_voice</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;{ a&#39;1. \laissezVibrer }&quot;</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">add_string_music</span><span class="p">(</span><span class="n">score</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">voice_to_descents</span> <span class="o">=</span> <span class="n">make_scalar_descents</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">voice_to_descents</span> <span class="o">=</span> <span class="n">make_pitch_pair_descents</span><span class="p">(</span><span class="n">voice_to_descents</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">voice_to_descents</span> <span class="o">=</span> <span class="n">make_chord_descents</span><span class="p">(</span><span class="n">voice_to_descents</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">descents</span> <span class="ow">in</span> <span class="n">voice_to_descents</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="gp">... </span>        <span class="n">instrument_voice</span> <span class="o">=</span> <span class="n">score</span><span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_Voice&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">]</span>
<span class="gp">... </span>        <span class="n">instrument_voice</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="s2">&quot;R1. R1. R1. R1. R1. R1.&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">descent</span> <span class="ow">in</span> <span class="n">descents</span><span class="p">:</span>
<span class="gp">... </span>            <span class="n">instrument_voice</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">descent</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">extra_components</span> <span class="o">=</span> <span class="n">make_scalar_descents</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">extra_components</span> <span class="o">=</span> <span class="n">make_pitch_pair_descents</span><span class="p">(</span><span class="n">extra_components</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">extra_components</span> <span class="o">=</span> <span class="n">make_chord_descents</span><span class="p">(</span><span class="n">extra_components</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">edit_violin_1</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">extra_components</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">edit_violin_2</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">extra_components</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">edit_viola</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">extra_components</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">edit_cello</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">extra_components</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">edit_bass</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">extra_components</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">strings_staff_group</span> <span class="o">=</span> <span class="n">score</span><span class="p">[</span><span class="s2">&quot;Strings_Staff_Group&quot;</span><span class="p">]</span>
<span class="gp">... </span>    <span class="n">duration</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">voice</span> <span class="ow">in</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">components</span><span class="p">(</span><span class="n">strings_staff_group</span><span class="p">,</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">lists</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">voice</span><span class="p">[:],</span> <span class="p">[</span><span class="n">duration</span><span class="p">],</span> <span class="n">cyclic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">components</span> <span class="ow">in</span> <span class="n">lists</span><span class="p">:</span>
<span class="gp">... </span>            <span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">()</span>
<span class="gp">... </span>            <span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="n">components</span><span class="p">,</span> <span class="n">container</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">edit_violin_1</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">voice_to_descents</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">voice</span> <span class="o">=</span> <span class="n">score</span><span class="p">[</span><span class="s2">&quot;Violin_1_Voice&quot;</span><span class="p">]</span>
<span class="gp">... </span>    <span class="n">descents</span> <span class="o">=</span> <span class="n">voice_to_descents</span><span class="p">[</span><span class="s2">&quot;Violin_1&quot;</span><span class="p">]</span>
<span class="gp">... </span>    <span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="n">descents</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">pitch</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">NamedPitch</span><span class="p">(</span><span class="s2">&quot;c&#39;&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">duration</span> <span class="ow">in</span> <span class="mi">43</span> <span class="o">*</span> <span class="p">[</span><span class="n">abjad</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]:</span>
<span class="gp">... </span>        <span class="n">note</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Note</span><span class="o">.</span><span class="n">from_duration_and_pitch</span><span class="p">(</span><span class="n">duration</span><span class="p">,</span> <span class="n">pitch</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">tie</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Tie</span><span class="p">()</span>
<span class="gp">... </span>        <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">tie</span><span class="p">,</span> <span class="n">note</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">container</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">note</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">container</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="s2">&quot;c&#39;2 r4 r2.&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">voice</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">edit_violin_2</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">voice_to_descents</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">voice</span> <span class="o">=</span> <span class="n">score</span><span class="p">[</span><span class="s2">&quot;Violin_2_Voice&quot;</span><span class="p">]</span>
<span class="gp">... </span>    <span class="n">descents</span> <span class="o">=</span> <span class="n">voice_to_descents</span><span class="p">[</span><span class="s2">&quot;Violin_2&quot;</span><span class="p">]</span>
<span class="gp">... </span>    <span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="n">descents</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">duration</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">container</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_written_duration</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">container</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;a2&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">leaf</span> <span class="ow">in</span> <span class="n">container</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">articulation</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Articulation</span><span class="p">(</span><span class="s2">&quot;accent&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">articulation</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">articulation</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Articulation</span><span class="p">(</span><span class="s2">&quot;tenuto&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">articulation</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">voice</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="mi">32</span> <span class="o">*</span> <span class="p">[</span><span class="s2">&quot;a1.&quot;</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; a2&quot;</span>
<span class="gp">... </span>    <span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">articulation</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Articulation</span><span class="p">(</span><span class="s2">&quot;accent&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">articulation</span><span class="p">,</span> <span class="n">container</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">articulation</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Articulation</span><span class="p">(</span><span class="s2">&quot;tenuto&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">articulation</span><span class="p">,</span> <span class="n">container</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">leaf</span> <span class="ow">in</span> <span class="n">container</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
<span class="gp">... </span>        <span class="n">tie</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Tie</span><span class="p">()</span>
<span class="gp">... </span>        <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">tie</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">container</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="s2">&quot;r4 r2.&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">voice</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">edit_viola</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">voice_to_descents</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">voice</span> <span class="o">=</span> <span class="n">score</span><span class="p">[</span><span class="s2">&quot;Viola_Voice&quot;</span><span class="p">]</span>
<span class="gp">... </span>    <span class="n">descents</span> <span class="o">=</span> <span class="n">voice_to_descents</span><span class="p">[</span><span class="s2">&quot;Viola&quot;</span><span class="p">]</span>
<span class="gp">... </span>    <span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="n">descents</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">leaf</span> <span class="ow">in</span> <span class="n">container</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="n">leaf</span><span class="o">.</span><span class="n">written_duration</span><span class="p">()</span> <span class="o">==</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
<span class="gp">... </span>            <span class="n">leaf</span><span class="o">.</span><span class="n">set_written_duration</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">... </span>        <span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>            <span class="n">leaf</span><span class="o">.</span><span class="n">set_written_duration</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">... </span>        <span class="n">articulation</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Articulation</span><span class="p">(</span><span class="s2">&quot;accent&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">articulation</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">articulation</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Articulation</span><span class="p">(</span><span class="s2">&quot;tenuto&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">articulation</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">container</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;e1&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">articulation</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Articulation</span><span class="p">(</span><span class="s2">&quot;tenuto&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">articulation</span><span class="p">,</span> <span class="n">container</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">articulation</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Articulation</span><span class="p">(</span><span class="s2">&quot;accent&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">articulation</span><span class="p">,</span> <span class="n">container</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">container</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;e1.&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">articulation</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Articulation</span><span class="p">(</span><span class="s2">&quot;accent&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">articulation</span><span class="p">,</span> <span class="n">container</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">articulation</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Articulation</span><span class="p">(</span><span class="s2">&quot;tenuto&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">articulation</span><span class="p">,</span> <span class="n">container</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">tie</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Tie</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">tie</span><span class="p">,</span> <span class="n">container</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">pitch</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">NamedPitch</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">duration</span> <span class="ow">in</span> <span class="mi">20</span> <span class="o">*</span> <span class="p">[</span><span class="n">abjad</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]:</span>
<span class="gp">... </span>        <span class="n">note</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Note</span><span class="o">.</span><span class="n">from_duration_and_pitch</span><span class="p">(</span><span class="n">duration</span><span class="p">,</span> <span class="n">pitch</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">tie</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Tie</span><span class="p">()</span>
<span class="gp">... </span>        <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">tie</span><span class="p">,</span> <span class="n">note</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">container</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">note</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">container</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="s2">&quot;e2 r4 r2.&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">voice</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">edit_cello</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">voice_to_descents</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">voice</span> <span class="o">=</span> <span class="n">score</span><span class="p">[</span><span class="s2">&quot;Cello_Voice&quot;</span><span class="p">]</span>
<span class="gp">... </span>    <span class="n">logical_tie</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">logical_tie</span><span class="p">(</span><span class="n">voice</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">pitches</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">pitches</span><span class="p">(</span><span class="s2">&quot;e a&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">leaf</span> <span class="ow">in</span> <span class="n">logical_tie</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">duration</span> <span class="o">=</span> <span class="n">leaf</span><span class="o">.</span><span class="n">written_duration</span><span class="p">()</span>
<span class="gp">... </span>        <span class="n">chord</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Chord</span><span class="o">.</span><span class="n">from_duration_and_pitches</span><span class="p">(</span><span class="n">duration</span><span class="p">,</span> <span class="n">pitches</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">leaf</span><span class="p">,</span> <span class="n">chord</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">descents</span> <span class="o">=</span> <span class="n">voice_to_descents</span><span class="p">[</span><span class="s2">&quot;Cello&quot;</span><span class="p">]</span>
<span class="gp">... </span>    <span class="n">descent</span> <span class="o">=</span> <span class="n">descents</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">... </span>    <span class="n">voice</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">descent</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">chord</span> <span class="ow">in</span> <span class="n">descent</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">chord</span><span class="p">,</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Note</span><span class="p">):</span>
<span class="gp">... </span>            <span class="k">continue</span>
<span class="gp">... </span>        <span class="n">pitch</span> <span class="o">=</span> <span class="n">chord</span><span class="o">.</span><span class="n">written_pitches</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">... </span>        <span class="n">duration</span> <span class="o">=</span> <span class="n">chord</span><span class="o">.</span><span class="n">written_duration</span><span class="p">()</span>
<span class="gp">... </span>        <span class="n">note</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Note</span><span class="o">.</span><span class="n">from_duration_and_pitch</span><span class="p">(</span><span class="n">duration</span><span class="p">,</span> <span class="n">pitch</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">articulation</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Articulation</span><span class="p">(</span><span class="s2">&quot;accent&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">articulation</span><span class="p">,</span> <span class="n">note</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">articulation</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Articulation</span><span class="p">(</span><span class="s2">&quot;tenuto&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">articulation</span><span class="p">,</span> <span class="n">note</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">chord</span><span class="p">,</span> <span class="n">note</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">voice</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="s2">&quot;a,1. ~ a,2&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">voice</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="s2">&quot;b,1 ~ b,1. ~ b,1.&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">voice</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="s2">&quot;a,1. ~ a,1. ~ a,1. ~ a,1. ~ a,1. ~ a,2&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">voice</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="s2">&quot;r4 r2.&quot;</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">edit_bass</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">voice_to_descents</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;&lt;e, e&gt;1. ~ &lt;e, e&gt;1. ~ &lt;e, e&gt;1 ~ &lt;e, e&gt;2 ~&quot;</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">+=</span> <span class="sa">r</span><span class="s2">&quot; &lt;e, e&gt;1. ~ &lt;e, e&gt;1. ~ &lt;e, e&gt;2&quot;</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">+=</span> <span class="sa">r</span><span class="s2">&quot; &lt;d, d&gt;\longa &lt;c, c&gt;\maxima&quot;</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">+=</span> <span class="sa">r</span><span class="s2">&quot; &lt;b,&gt;\longa &lt;a,&gt;\maxima r4 r2.&quot;</span>
<span class="gp">... </span>    <span class="n">score</span><span class="p">[</span><span class="s2">&quot;Bass_Voice&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span> <span class="o">=</span> <span class="n">string</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">attach_contexted_indicators</span><span class="p">(</span><span class="n">score</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">leaf</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">leaf</span><span class="p">(</span><span class="n">score</span><span class="p">[</span><span class="s2">&quot;Bell_Staff&quot;</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">metronome_mark</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">MetronomeMark</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">112</span><span class="p">,</span> <span class="mi">120</span><span class="p">))</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">metronome_mark</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">time_signature</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">time_signature</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">instrument</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Instrument</span><span class="p">(</span><span class="n">pitch_range</span><span class="o">=</span><span class="n">abjad</span><span class="o">.</span><span class="n">PitchRange</span><span class="p">(</span><span class="s2">&quot;[C4, C6]&quot;</span><span class="p">))</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">instrument</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\markup &quot;Campana (La)&quot;&#39;</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="sa">rf</span><span class="s2">&quot;\set Staff.instrumentName = </span><span class="si">{</span><span class="n">string</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="gp">... </span>    <span class="n">literal</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\markup \hcenter-in #8 &quot;Camp.&quot;&#39;</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="sa">rf</span><span class="s2">&quot;\set Staff.shortInstrumentName = </span><span class="si">{</span><span class="n">string</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="gp">... </span>    <span class="n">literal</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">clef</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s2">&quot;treble&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">clef</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">leaf</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">leaf</span><span class="p">(</span><span class="n">score</span><span class="p">[</span><span class="s2">&quot;Violin_1_Staff&quot;</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">instrument</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Violin</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">instrument</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\markup \hcenter-in #8 &quot;Vn. I&quot;&#39;</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="sa">rf</span><span class="s2">&quot;\set Staff.shortInstrumentName = </span><span class="si">{</span><span class="n">string</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="gp">... </span>    <span class="n">literal</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">clef</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s2">&quot;treble&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">clef</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">leaf</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">leaf</span><span class="p">(</span><span class="n">score</span><span class="p">[</span><span class="s2">&quot;Violin_2_Staff&quot;</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">instrument</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Violin</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">instrument</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\markup \hcenter-in #8 &quot;Vn. II&quot;&#39;</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="sa">rf</span><span class="s2">&quot;\set Staff.shortInstrumentName = </span><span class="si">{</span><span class="n">string</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="gp">... </span>    <span class="n">literal</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">clef</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s2">&quot;treble&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">clef</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">leaf</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">leaf</span><span class="p">(</span><span class="n">score</span><span class="p">[</span><span class="s2">&quot;Viola_Staff&quot;</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">instrument</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Viola</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">instrument</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\markup \hcenter-in #8 &quot;Va.&quot;&#39;</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="sa">rf</span><span class="s2">&quot;\set Staff.shortInstrumentName = </span><span class="si">{</span><span class="n">string</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="gp">... </span>    <span class="n">literal</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">clef</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s2">&quot;alto&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">clef</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">leaf</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">leaf</span><span class="p">(</span><span class="n">score</span><span class="p">[</span><span class="s2">&quot;Cello_Staff&quot;</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">instrument</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Cello</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">instrument</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\markup \hcenter-in #8 &quot;Vc.&quot;&#39;</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="sa">rf</span><span class="s2">&quot;\set Staff.shortInstrumentName = </span><span class="si">{</span><span class="n">string</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="gp">... </span>    <span class="n">literal</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">clef</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s2">&quot;bass&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">clef</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">leaf</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">leaf</span><span class="p">(</span><span class="n">score</span><span class="p">[</span><span class="s2">&quot;Bass_Staff&quot;</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">instrument</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Contrabass</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">instrument</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\markup \hcenter-in #8 &quot;Cb.&quot;&#39;</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="sa">rf</span><span class="s2">&quot;\set Staff.shortInstrumentName = </span><span class="si">{</span><span class="n">string</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="gp">... </span>    <span class="n">literal</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">clef</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s2">&quot;bass&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">clef</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">leaf</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">leaf</span><span class="p">(</span><span class="n">score</span><span class="p">[</span><span class="s2">&quot;Bass_Staff&quot;</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">bar_line</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">BarLine</span><span class="p">(</span><span class="s2">&quot;|.&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">bar_line</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">attach_bow_marks</span><span class="p">(</span><span class="n">score</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">measure</span> <span class="ow">in</span> <span class="n">score</span><span class="p">[</span><span class="s2">&quot;Violin_1_Voice&quot;</span><span class="p">][</span><span class="mi">6</span><span class="p">:</span><span class="mi">8</span><span class="p">]:</span>
<span class="gp">... </span>        <span class="n">chords</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">components</span><span class="p">(</span><span class="n">measure</span><span class="p">,</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Chord</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">chord</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">chords</span><span class="p">):</span>
<span class="gp">... </span>            <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="gp">... </span>                <span class="n">articulation</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Articulation</span><span class="p">(</span><span class="s2">&quot;downbow&quot;</span><span class="p">)</span>
<span class="gp">... </span>            <span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>                <span class="n">articulation</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Articulation</span><span class="p">(</span><span class="s2">&quot;upbow&quot;</span><span class="p">)</span>
<span class="gp">... </span>            <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">articulation</span><span class="p">,</span> <span class="n">chord</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;&#39;&#39;\markup \concat { \musicglyph &quot;scripts.downbow&quot;&#39;&#39;&#39;</span>
<span class="gp">... </span>    <span class="n">string</span> <span class="o">+=</span> <span class="sa">r</span><span class="s2">&quot;&quot;&quot; \hspace #1 \musicglyph &quot;scripts.upbow&quot; }&quot;&quot;&quot;</span>
<span class="gp">... </span>    <span class="n">markup</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">score</span><span class="p">[</span><span class="s2">&quot;Violin_1_Voice&quot;</span><span class="p">][</span><span class="mi">65</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">markup</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">score</span><span class="p">[</span><span class="s2">&quot;Violin_2_Voice&quot;</span><span class="p">][</span><span class="mi">76</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">markup</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">score</span><span class="p">[</span><span class="s2">&quot;Viola_Voice&quot;</span><span class="p">][</span><span class="mi">87</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">handle_dynamic_commands</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">commands</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">command</span> <span class="ow">in</span> <span class="n">commands</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">voice_name</span><span class="p">,</span> <span class="n">measure_index</span><span class="p">,</span> <span class="n">leaf_index</span><span class="p">,</span> <span class="n">string</span> <span class="o">=</span> <span class="n">command</span>
<span class="gp">... </span>        <span class="n">voice_name</span> <span class="o">=</span> <span class="n">voice_name</span> <span class="o">+</span> <span class="s2">&quot;_Voice&quot;</span>
<span class="gp">... </span>        <span class="n">voice</span> <span class="o">=</span> <span class="n">score</span><span class="p">[</span><span class="n">voice_name</span><span class="p">]</span>
<span class="gp">... </span>        <span class="n">leaf</span> <span class="o">=</span> <span class="n">voice</span><span class="p">[</span><span class="n">measure_index</span><span class="p">][</span><span class="n">leaf_index</span><span class="p">]</span>
<span class="gp">... </span>        <span class="n">dynamic</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Dynamic</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">dynamic</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">handle_markup_commands</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">commands</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">command</span> <span class="ow">in</span> <span class="n">commands</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">voice_name</span><span class="p">,</span> <span class="n">measure_index</span><span class="p">,</span> <span class="n">leaf_index</span><span class="p">,</span> <span class="n">string</span> <span class="o">=</span> <span class="n">command</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
<span class="gp">... </span>            <span class="n">direction</span> <span class="o">=</span> <span class="n">command</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
<span class="gp">... </span>        <span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>            <span class="n">direction</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">UP</span>
<span class="gp">... </span>        <span class="n">voice_name</span> <span class="o">=</span> <span class="n">voice_name</span> <span class="o">+</span> <span class="s2">&quot;_Voice&quot;</span>
<span class="gp">... </span>        <span class="n">voice</span> <span class="o">=</span> <span class="n">score</span><span class="p">[</span><span class="n">voice_name</span><span class="p">]</span>
<span class="gp">... </span>        <span class="n">leaf</span> <span class="o">=</span> <span class="n">voice</span><span class="p">[</span><span class="n">measure_index</span><span class="p">][</span><span class="n">leaf_index</span><span class="p">]</span>
<span class="gp">... </span>        <span class="n">string</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;\markup &quot;</span> <span class="o">+</span> <span class="n">string</span>
<span class="gp">... </span>        <span class="n">markup</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">leaf</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">attach_rehearsal_marks</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">measure_indices</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">bell_voice</span> <span class="o">=</span> <span class="n">score</span><span class="p">[</span><span class="s2">&quot;Bell_Voice&quot;</span><span class="p">]</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">measure_index</span> <span class="ow">in</span> <span class="n">measure_indices</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">command</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\mark \default&quot;</span><span class="p">,</span> <span class="n">site</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">bell_voice</span><span class="p">[</span><span class="n">measure_index</span><span class="p">])</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">attach_page_breaks</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">measure_indices</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">bell_voice</span> <span class="o">=</span> <span class="n">score</span><span class="p">[</span><span class="s2">&quot;Bell_Voice&quot;</span><span class="p">]</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">measure_index</span> <span class="ow">in</span> <span class="n">measure_indices</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">command</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\break&quot;</span><span class="p">,</span> <span class="n">site</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">bell_voice</span><span class="p">[</span><span class="n">measure_index</span><span class="p">])</span>
<span class="gp">... </span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">preamble</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;&quot;&quot;#(set-global-staff-size 8)</span>
<span class="gp">... </span>
<span class="gp">... </span><span class="s2">\header {</span>
<span class="gp">... </span><span class="s2">    tagline = ##f</span>
<span class="gp">... </span><span class="s2">    composer = \markup { &quot;Arvo Pärt&quot; }</span>
<span class="gp">... </span><span class="s2">    title = \markup { &quot;Cantus in Memory of Benjamin Britten (1980)&quot; }</span>
<span class="gp">... </span><span class="s2">}</span>
<span class="gp">... </span>
<span class="gp">... </span><span class="s2">\layout {</span>
<span class="gp">... </span><span class="s2">    \context {</span>
<span class="gp">... </span><span class="s2">        \Staff</span>
<span class="gp">... </span><span class="s2">        \RemoveEmptyStaves</span>
<span class="gp">... </span><span class="s2">        \override VerticalAxisGroup.remove-first = ##t</span>
<span class="gp">... </span><span class="s2">    }</span>
<span class="gp">... </span><span class="s2">    \context {</span>
<span class="gp">... </span><span class="s2">        \Score</span>
<span class="gp">... </span><span class="s2">        \override StaffGrouper.staff-staff-spacing = #&#39;(</span>
<span class="gp">... </span><span class="s2">            (basic-distance . 0) (minimum-distance . 0)</span>
<span class="gp">... </span><span class="s2">            (padding . 8) (stretchability . 0))</span>
<span class="gp">... </span><span class="s2">        \override StaffSymbol.thickness = #0.5</span>
<span class="gp">... </span><span class="s2">        \override VerticalAxisGroup.staff-staff-spacing = #&#39;(</span>
<span class="gp">... </span><span class="s2">            (basic-distance . 0) (minimum-distance . 0)</span>
<span class="gp">... </span><span class="s2">            (padding . 8) (stretchability . 0))</span>
<span class="gp">... </span><span class="s2">        markFormatter = #format-mark-box-numbers</span>
<span class="gp">... </span><span class="s2">    }</span>
<span class="gp">... </span><span class="s2">}</span>
<span class="gp">... </span>
<span class="gp">... </span><span class="s2">\paper {</span>
<span class="gp">... </span><span class="s2">    system-separator-markup = #slashSeparator</span>
<span class="gp">... </span><span class="s2">    bottom-margin = 0.5\in</span>
<span class="gp">... </span><span class="s2">    top-margin = 0.5\in</span>
<span class="gp">... </span><span class="s2">    left-margin = 0.75\in</span>
<span class="gp">... </span><span class="s2">    right-margin = 0.5\in</span>
<span class="gp">... </span><span class="s2">    paper-width = 5.25\in</span>
<span class="gp">... </span><span class="s2">    paper-height = 7.25\in</span>
<span class="gp">... </span><span class="s2">}&quot;&quot;&quot;</span>
</pre></div>
</div>
<hr class="docutils" />
<p>We define commands like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dynamic_commands</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bell&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;ppp&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bell&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;pp&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bell&quot;</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bell&quot;</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;mp&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bell&quot;</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;mf&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bell&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bell&quot;</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;ff&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bell&quot;</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;fff&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bell&quot;</span><span class="p">,</span> <span class="mi">68</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;ff&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bell&quot;</span><span class="p">,</span> <span class="mi">76</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bell&quot;</span><span class="p">,</span> <span class="mi">84</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;mf&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bell&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;pp&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_1&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;ppp&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_1&quot;</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;pp&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_1&quot;</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_1&quot;</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;mp&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_1&quot;</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;mf&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_1&quot;</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_1&quot;</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;ff&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_1&quot;</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;fff&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_2&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;pp&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_2&quot;</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_2&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_2&quot;</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;mp&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_2&quot;</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;mf&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_2&quot;</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_2&quot;</span><span class="p">,</span> <span class="mi">54</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;ff&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_2&quot;</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;fff&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Viola&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Viola&quot;</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;mp&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Viola&quot;</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;mf&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Viola&quot;</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Viola&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Viola&quot;</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;ff&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Viola&quot;</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;fff&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Cello&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Cello&quot;</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;mp&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Cello&quot;</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;mf&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Cello&quot;</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Cello&quot;</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;ff&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Cello&quot;</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;fff&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bass&quot;</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;mp&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bass&quot;</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;mf&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bass&quot;</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bass&quot;</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;ff&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bass&quot;</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;fff&quot;</span><span class="p">),</span>
<span class="gp">... </span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">markup_commands</span> <span class="o">=</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_1&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;\left-column { div. \line { con sord. } }&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_1&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;sim.&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_1&quot;</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;uniti&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_1&quot;</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;div.&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_1&quot;</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;uniti&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_2&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;div.&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_2&quot;</span><span class="p">,</span> <span class="mi">66</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;uniti&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_2&quot;</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;div.&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_2&quot;</span><span class="p">,</span> <span class="mi">74</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;uniti&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Viola&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;sole&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Cello&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;div.&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Cello&quot;</span><span class="p">,</span> <span class="mi">74</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;uniti&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Cello&quot;</span><span class="p">,</span> <span class="mi">84</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;uniti&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Cello&quot;</span><span class="p">,</span> <span class="mi">86</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;\italic { espr. }&quot;</span><span class="p">,</span> <span class="n">abjad</span><span class="o">.</span><span class="n">DOWN</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Cello&quot;</span><span class="p">,</span> <span class="mi">88</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;\italic { molto espr. }&quot;</span><span class="p">,</span> <span class="n">abjad</span><span class="o">.</span><span class="n">DOWN</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bass&quot;</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;div.&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bass&quot;</span><span class="p">,</span> <span class="mi">86</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;\italic { espr. }&quot;</span><span class="p">,</span> <span class="n">abjad</span><span class="o">.</span><span class="n">DOWN</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bass&quot;</span><span class="p">,</span> <span class="mi">88</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;\italic { molto espr. }&quot;</span><span class="p">,</span> <span class="n">abjad</span><span class="o">.</span><span class="n">DOWN</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bass&quot;</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;uniti&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_1&quot;</span><span class="p">,</span> <span class="mi">102</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;\italic { (non dim.) }&quot;</span><span class="p">,</span> <span class="n">abjad</span><span class="o">.</span><span class="n">DOWN</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Violin_2&quot;</span><span class="p">,</span> <span class="mi">102</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;\italic { (non dim.) }&quot;</span><span class="p">,</span> <span class="n">abjad</span><span class="o">.</span><span class="n">DOWN</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Viola&quot;</span><span class="p">,</span> <span class="mi">102</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;\italic { (non dim.) }&quot;</span><span class="p">,</span> <span class="n">abjad</span><span class="o">.</span><span class="n">DOWN</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Cello&quot;</span><span class="p">,</span> <span class="mi">102</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;\italic { (non dim.) }&quot;</span><span class="p">,</span> <span class="n">abjad</span><span class="o">.</span><span class="n">DOWN</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;Bass&quot;</span><span class="p">,</span> <span class="mi">102</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;\italic { (non dim.) }&quot;</span><span class="p">,</span> <span class="n">abjad</span><span class="o">.</span><span class="n">DOWN</span><span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rehearsal_marks</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">48</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rehearsal_marks</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="mi">54</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">66</span><span class="p">,</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="mi">84</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">96</span><span class="p">,</span> <span class="mi">102</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">breaks</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">45</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">breaks</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="mi">50</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">79</span><span class="p">,</span> <span class="mi">86</span><span class="p">,</span> <span class="mi">93</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
</pre></div>
</div>
<hr class="docutils" />
<p>We create the score like this; only the first four pages are shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lilypond_file</span> <span class="o">=</span> <span class="n">make_lilypond_file</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">preamble</span><span class="p">,</span> <span class="n">dynamic_commands</span><span class="p">,</span> <span class="n">markup_commands</span><span class="p">,</span> <span class="n">rehearsal_marks</span><span class="p">,</span> <span class="n">breaks</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">lilypond_file</span><span class="p">)</span>
</pre></div>
</div>
<div class="table-row"><a data-lightbox="group-lilypond-ba448cc3985e860e1975fbf9522fcf24b0742b7cdfff105542a5f17f519a5e80" href="../_images/lilypond-ba448cc3985e860e1975fbf9522fcf24b0742b7cdfff105542a5f17f519a5e80-1.svg" title="" data-title="" class="table-cell thumbnail">
    <img src="../_images/lilypond-ba448cc3985e860e1975fbf9522fcf24b0742b7cdfff105542a5f17f519a5e80-1.svg" alt=""/>
</a><a data-lightbox="group-lilypond-ba448cc3985e860e1975fbf9522fcf24b0742b7cdfff105542a5f17f519a5e80" href="../_images/lilypond-ba448cc3985e860e1975fbf9522fcf24b0742b7cdfff105542a5f17f519a5e80-2.svg" title="" data-title="" class="table-cell thumbnail">
    <img src="../_images/lilypond-ba448cc3985e860e1975fbf9522fcf24b0742b7cdfff105542a5f17f519a5e80-2.svg" alt=""/>
</a></div><div class="table-row"><a data-lightbox="group-lilypond-ba448cc3985e860e1975fbf9522fcf24b0742b7cdfff105542a5f17f519a5e80" href="../_images/lilypond-ba448cc3985e860e1975fbf9522fcf24b0742b7cdfff105542a5f17f519a5e80-3.svg" title="" data-title="" class="table-cell thumbnail">
    <img src="../_images/lilypond-ba448cc3985e860e1975fbf9522fcf24b0742b7cdfff105542a5f17f519a5e80-3.svg" alt=""/>
</a><a data-lightbox="group-lilypond-ba448cc3985e860e1975fbf9522fcf24b0742b7cdfff105542a5f17f519a5e80" href="../_images/lilypond-ba448cc3985e860e1975fbf9522fcf24b0742b7cdfff105542a5f17f519a5e80-4.svg" title="" data-title="" class="table-cell thumbnail">
    <img src="../_images/lilypond-ba448cc3985e860e1975fbf9522fcf24b0742b7cdfff105542a5f17f519a5e80-4.svg" alt=""/>
</a></div><p><span class="author">[Treviño (2.19), Bača (3.2, 3.7); ex. Arvo Pärt, Cantus In Memoriam Benjamin
Britten (1980).]</span></p>
</section>


    </div>
    
    </div>
    

<footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2008-2025, Trevor Bača &amp; Joséphine Oberholtzer.
      <span class="lastupdated">
        Last updated on Aug 28, 2025.
      </span>

    </p>
  </div> 

</footer>

</div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>