

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Bartók: Mikrokosmos &mdash; Abjad 3.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script defer="defer" type="text/javascript" src="../_static/copybutton.js"></script>
        <script type="text/javascript" src="../_static/ga.js"></script>
        <script defer="defer" type="text/javascript" src="../_static/lightbox2/js/lightbox.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/abjad.css" type="text/css" />
  <link rel="stylesheet" href="../_static/uqbar.css" type="text/css" />
  <link rel="stylesheet" href="../_static/lightbox2/css/lightbox.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Ferneyhough: Unsichtbare Farben" href="ferneyhough.html" />
    <link rel="prev" title="Literature examples" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Abjad
          

          
            
            <img src="../_static/abjad-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../for_beginners/index.html">For beginners</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Literature examples</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Bartók: <em>Mikrokosmos</em></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-score">The score</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-notes">The notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#caching-leaves">Caching leaves</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-details">The details</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ferneyhough.html">Ferneyhough: <em>Unsichtbare Farben</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="ligeti.html">Ligeti: “Désordre”</a></li>
<li class="toctree-l2"><a class="reference internal" href="mozart.html">Mozart: <em>Musikalisches Würfelspiel</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="part.html">Pärt: <em>Cantus in Memory of Benjamin Britten</em></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../core_concepts/index.html">Core concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_manual/index.html">Reference manual</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../gallery.html">Score gallery</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Abjad API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Abjad</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Literature examples</a> &raquo;</li>
        
      <li>Bartók: <em>Mikrokosmos</em></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/literature_examples/bartok.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="bartok-mikrokosmos">
<h1>Bartók: <em>Mikrokosmos</em><a class="headerlink" href="#bartok-mikrokosmos" title="Permalink to this headline">¶</a></h1>
<p>This example reconstructs the last five measures of Bartók’s “Wandering” from
<em>Mikrokosmos</em>, volume III. The end result is just a few measures long but
covers basic features you’ll use in Abjad.</p>
<p>Here is the finished excerpt:</p>
<div class="uqbar-book">
    <a href="../_images/lilypond-46bec36d60d73012054437254e3f72c61093d05144d498ff9793e17a6900b51d.ly"><img src="../_images/lilypond-46bec36d60d73012054437254e3f72c61093d05144d498ff9793e17a6900b51d.cropped.svg"/></a>
</div><div class="section" id="the-score">
<h2>The score<a class="headerlink" href="#the-score" title="Permalink to this headline">¶</a></h2>
<p>We’ll construct the fragment top-down from containers to notes. We could have
done it the other way around but it will be easier to keep the big picture in
mind this way. Later, you can rebuild the example bottom-up as an exercise.</p>
<p>First let’s create an empty score. We can see our work after we add some notes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Score</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">piano_staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">StaffGroup</span><span class="p">(</span><span class="n">lilypond_type</span><span class="o">=</span><span class="s2">&quot;PianoStaff&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upper_staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Upper_Staff&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upper_staff_voice</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Upper_Staff_Voice&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upper_staff</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">upper_staff_voice</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lower_staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Lower_Staff&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lower_staff_voice_2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Lower_Staff_Voice_II&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lower_staff</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lower_staff_voice_2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">piano_staff</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">upper_staff</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">piano_staff</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lower_staff</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">piano_staff</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="the-notes">
<h2>The notes<a class="headerlink" href="#the-notes" title="Permalink to this headline">¶</a></h2>
<p>Now let’s add notes to the upper staff:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">upper_staff_voice</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;{ \time 2/4 a&#39;8 g&#39;8 f&#39;8 e&#39;8 }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upper_staff_voice</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;{ \time 3/4 d&#39;4 g&#39;8 f&#39;8 e&#39;8 d&#39;8 }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upper_staff_voice</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;{ \time 2/4 c&#39;8 d&#39;16 e&#39;16 f&#39;8 e&#39;8 }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upper_staff_voice</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;{ d&#39;2 }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upper_staff_voice</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;{ d&#39;2 }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-d79943d323ee0072869542b3fafdc59db42115fcf3f97664164c11ed2c82d84b.ly"><img src="../_images/lilypond-d79943d323ee0072869542b3fafdc59db42115fcf3f97664164c11ed2c82d84b.cropped.svg"/></a>
</div><p>Then to the monophonic part of the lower staff:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lower_staff_voice_2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;{ b4 d&#39;8 c&#39;8 }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lower_staff_voice_2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;{ b8 a8 af4 c&#39;8 bf8 }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lower_staff_voice_2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;{ a8 g8 fs8 g16 a16 }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-c968ca525a81e613693a04e68416ed44f2c626cc442b8c82b9063fce10999e68.ly"><img src="../_images/lilypond-c968ca525a81e613693a04e68416ed44f2c626cc442b8c82b9063fce10999e68.cropped.svg"/></a>
</div><p>The simultaneous voices in measure four are more complicated:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[</span>
<span class="gp">... </span>        <span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Lower_Staff_Voice_I&quot;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Lower_Staff_Voice_II&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">simultaneous</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">literal</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\voiceOne&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">container</span><span class="p">[</span><span class="s2">&quot;Lower_Staff_Voice_I&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container</span><span class="p">[</span><span class="s2">&quot;Lower_Staff_Voice_I&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;b2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">literal</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\voiceTwo&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">container</span><span class="p">[</span><span class="s2">&quot;Lower_Staff_Voice_II&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container</span><span class="p">[</span><span class="s2">&quot;Lower_Staff_Voice_II&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="s2">&quot;b4 a4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lower_staff</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-012718f6354018435800b9d7423a612a08e5eb3a6082bb779cababd71b543dbc.ly"><img src="../_images/lilypond-012718f6354018435800b9d7423a612a08e5eb3a6082bb779cababd71b543dbc.cropped.svg"/></a>
</div><p>Measure five follows the same pattern:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[</span>
<span class="gp">... </span>        <span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Lower_Staff_Voice_I&quot;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Lower_Staff_Voice_II&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">simultaneous</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">literal</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\voiceOne&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">container</span><span class="p">[</span><span class="s2">&quot;Lower_Staff_Voice_I&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container</span><span class="p">[</span><span class="s2">&quot;Lower_Staff_Voice_I&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;b2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">literal</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\voiceTwo&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">container</span><span class="p">[</span><span class="s2">&quot;Lower_Staff_Voice_II&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container</span><span class="p">[</span><span class="s2">&quot;Lower_Staff_Voice_II&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;g2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lower_staff</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-900b32815630a495a3ac6baf08d9175451177eb99f2ca2c78c3d6d402d4d7a02.ly"><img src="../_images/lilypond-900b32815630a495a3ac6baf08d9175451177eb99f2ca2c78c3d6d402d4d7a02.cropped.svg"/></a>
</div></div>
<div class="section" id="caching-leaves">
<h2>Caching leaves<a class="headerlink" href="#caching-leaves" title="Permalink to this headline">¶</a></h2>
<p>It will help to store the contents of each voice is a list before adding
details to the score. This effectively flattens out the polyphonic structure of
the excerpt and makes our score easier to work with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">upper_staff_leaves</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">upper_staff</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">upper_staff_leaves</span><span class="p">)</span>
<span class="go">16</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lower_staff_voice_2_leaves</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">leaf</span> <span class="ow">in</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">lower_staff</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">voice</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">leaf</span><span class="p">)</span><span class="o">.</span><span class="n">parentage</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">voice</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Lower_Staff_Voice_II&quot;</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">lower_staff_voice_2_leaves</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">lower_staff_voice_2_leaves</span><span class="p">)</span>
<span class="go">16</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lower_staff_voice_1_leaves</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">leaf</span> <span class="ow">in</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">lower_staff</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">voice</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">leaf</span><span class="p">)</span><span class="o">.</span><span class="n">parentage</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">voice</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Lower_Staff_Voice_I&quot;</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">lower_staff_voice_1_leaves</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">leaf</span><span class="p">)</span>
<span class="gp">... </span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">lower_staff_voice_1_leaves</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
<p>Notice that the only voice in the upper staff runs the full length of the
excerpt. So does voice 2 in the lower staff. But voice 1 in the lower staff is
only two measures long.</p>
</div>
<div class="section" id="the-details">
<h2>The details<a class="headerlink" href="#the-details" title="Permalink to this headline">¶</a></h2>
<p>The bottom staff has a treble clef just like the top staff. Let’s change that,
and add a double bar to the end of the score:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">clef</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s2">&quot;bass&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">leaf</span> <span class="o">=</span> <span class="n">lower_staff_voice_2_leaves</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">clef</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bar_line</span> <span class="o">=</span> <span class="n">score</span><span class="o">.</span><span class="n">add_final_bar_line</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-c1b99d51b99e3b842bd3844d7c4ec982be14f958c7defe7c0cad4c7f0bc28431.ly"><img src="../_images/lilypond-c1b99d51b99e3b842bd3844d7c4ec982be14f958c7defe7c0cad4c7f0bc28431.cropped.svg"/></a>
</div><p>Now let’s add dynamics. We override LilyPond’s DynamicLineSpanner grob to
control the distance of dynamics from each staff:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Dynamic</span><span class="p">(</span><span class="s2">&quot;pp&quot;</span><span class="p">),</span> <span class="n">upper_staff_leaves</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Dynamic</span><span class="p">(</span><span class="s2">&quot;mp&quot;</span><span class="p">),</span> <span class="n">upper_staff_leaves</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Dynamic</span><span class="p">(</span><span class="s2">&quot;pp&quot;</span><span class="p">),</span> <span class="n">lower_staff_voice_2_leaves</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Dynamic</span><span class="p">(</span><span class="s2">&quot;mp&quot;</span><span class="p">),</span> <span class="n">lower_staff_voice_2_leaves</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">override</span><span class="p">(</span><span class="n">upper_staff</span><span class="p">)</span><span class="o">.</span><span class="n">dynamic_line_spanner</span><span class="o">.</span><span class="n">staff_padding</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">override</span><span class="p">(</span><span class="n">lower_staff</span><span class="p">)</span><span class="o">.</span><span class="n">dynamic_line_spanner</span><span class="o">.</span><span class="n">staff_padding</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-ad55dbcbe1b27a2b2857591feacc352096974ab529b3f9172369fc3d36187c72.ly"><img src="../_images/lilypond-ad55dbcbe1b27a2b2857591feacc352096974ab529b3f9172369fc3d36187c72.cropped.svg"/></a>
</div><p>Notice that the beams of the eighth and sixteenth notes appear as you would
usually expect: grouped by beat. We get this for free thanks to LilyPond’s
default beaming algorithm. But this is not the way Bartók notated the beams.
Let’s set the beams as Bartók did with some crossing the bar lines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">beam</span><span class="p">(</span><span class="n">upper_staff_leaves</span><span class="p">[:</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">beam</span><span class="p">(</span><span class="n">lower_staff_voice_2_leaves</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">beam</span><span class="p">(</span><span class="n">lower_staff_voice_2_leaves</span><span class="p">[</span><span class="mi">6</span><span class="p">:</span><span class="mi">10</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-42a6e5ad323966ca921e76ce3daf01675272dd2219a14e459dda47b79da8e508.ly"><img src="../_images/lilypond-42a6e5ad323966ca921e76ce3daf01675272dd2219a14e459dda47b79da8e508.cropped.svg"/></a>
</div><p>Now we add slurs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">slur</span><span class="p">(</span><span class="n">upper_staff_leaves</span><span class="p">[:</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">slur</span><span class="p">(</span><span class="n">upper_staff_leaves</span><span class="p">[</span><span class="mi">5</span><span class="p">:])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">slur</span><span class="p">(</span><span class="n">lower_staff_voice_2_leaves</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">6</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">slur</span><span class="p">(</span><span class="n">lower_staff_voice_2_leaves</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">:])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">leaf</span> <span class="o">=</span> <span class="n">lower_staff_voice_2_leaves</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">override</span><span class="p">(</span><span class="n">leaf</span><span class="p">)</span><span class="o">.</span><span class="n">slur</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Down</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-655aca9bfea5a09bccae49fd8829b8b58e3d95ba90472e01ac1747bdc65a7739.ly"><img src="../_images/lilypond-655aca9bfea5a09bccae49fd8829b8b58e3d95ba90472e01ac1747bdc65a7739.cropped.svg"/></a>
</div><p>And hairpins:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">hairpin</span><span class="p">(</span><span class="s2">&quot;&lt; !&quot;</span><span class="p">,</span> <span class="n">upper_staff_leaves</span><span class="p">[</span><span class="o">-</span><span class="mi">7</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">hairpin</span><span class="p">(</span><span class="s2">&quot;&gt; !&quot;</span><span class="p">,</span> <span class="n">upper_staff_leaves</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">leaf</span> <span class="o">=</span> <span class="n">upper_staff_leaves</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">override</span><span class="p">(</span><span class="n">leaf</span><span class="p">)</span><span class="o">.</span><span class="n">hairpin</span><span class="o">.</span><span class="n">to_barline</span> <span class="o">=</span> <span class="kc">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-9ef4d5d607bc9b81a474dc78e078b0c8c17394bc49a103dde26c01c272888dbb.ly"><img src="../_images/lilypond-9ef4d5d607bc9b81a474dc78e078b0c8c17394bc49a103dde26c01c272888dbb.cropped.svg"/></a>
</div><p>And a text spanner with LilyPond markup:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">markup</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span><span class="s2">&quot;ritard.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_text_span</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">StartTextSpan</span><span class="p">(</span><span class="n">left_text</span><span class="o">=</span><span class="n">markup</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">text_spanner</span><span class="p">(</span><span class="n">upper_staff_leaves</span><span class="p">[</span><span class="o">-</span><span class="mi">7</span><span class="p">:],</span> <span class="n">start_text_span</span><span class="o">=</span><span class="n">start_text_span</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">override</span><span class="p">(</span><span class="n">upper_staff_leaves</span><span class="p">[</span><span class="o">-</span><span class="mi">7</span><span class="p">])</span><span class="o">.</span><span class="n">text_spanner</span><span class="o">.</span><span class="n">staff_padding</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-4df3def9802a2a65acd50daadb13a96de6fb3d985a50a2cf6c847818d8ded4de.ly"><img src="../_images/lilypond-4df3def9802a2a65acd50daadb13a96de6fb3d985a50a2cf6c847818d8ded4de.cropped.svg"/></a>
</div><p>Finally, we tie the last two notes in each staff:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">tie</span><span class="p">(</span><span class="n">upper_staff_leaves</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">tie</span><span class="p">(</span><span class="n">lower_staff_voice_1_leaves</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-46bec36d60d73012054437254e3f72c61093d05144d498ff9793e17a6900b51d.ly"><img src="../_images/lilypond-46bec36d60d73012054437254e3f72c61093d05144d498ff9793e17a6900b51d.cropped.svg"/></a>
</div></div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ferneyhough.html" class="btn btn-neutral float-right" title="Ferneyhough: Unsichtbare Farben" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Literature examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2008-2019, Trevor Bača &amp; Josiah Wolf Oberholtzer
      <span class="lastupdated">
        Last updated on Dec 18, 2019.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>