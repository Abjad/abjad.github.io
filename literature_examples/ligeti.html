

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Ligeti: “Désordre” &mdash; Abjad 3.1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script defer="defer" type="text/javascript" src="../_static/copybutton.js"></script>
        <script type="text/javascript" src="../_static/ga.js"></script>
        <script defer="defer" type="text/javascript" src="../_static/lightbox2/js/lightbox.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/abjad.css" type="text/css" />
  <link rel="stylesheet" href="../_static/uqbar.css" type="text/css" />
  <link rel="stylesheet" href="../_static/lightbox2/css/lightbox.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Mozart: Musikalisches Würfelspiel" href="mozart.html" />
    <link rel="prev" title="Ferneyhough: Unsichtbare Farben" href="ferneyhough.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Abjad
          

          
            
            <img src="../_static/abjad-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../gallery.html">Score gallery</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../for_beginners/index.html">For beginners</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Literature examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="bartok.html">Bartók: <em>Mikrokosmos</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="ferneyhough.html">Ferneyhough: <em>Unsichtbare Farben</em></a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Ligeti: “Désordre”</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-cell">The cell</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-measure">The measure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-staff">The staff</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-score">The score</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mozart.html">Mozart: <em>Musikalisches Würfelspiel</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="part.html">Pärt: <em>Cantus in Memory of Benjamin Britten</em></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../core_concepts/index.html">Core concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_manual/index.html">Reference manual</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Abjad API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendices/index.html">Appendices</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Abjad</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Literature examples</a> &raquo;</li>
        
      <li>Ligeti: “Désordre”</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/literature_examples/ligeti.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ligeti-desordre">
<h1>Ligeti: “Désordre”<a class="headerlink" href="#ligeti-desordre" title="Permalink to this headline">¶</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">abjad</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">abjad.demos</span> <span class="kn">import</span> <span class="n">ligeti</span>
</pre></div>
</div>
<p>This example demonstrates the power of exploiting redundancy to model musical
structure. The piece that concerns us here is Ligeti’s “Désordre” (1986): the
first piano etude from Book I. Specifically, we will focus on modeling the
first section of the piece:</p>
<img alt="../_images/desordre.jpg" src="../_images/desordre.jpg" />
<p>The redundancy is immediately evident in the repeating pattern found in both
staves. The pattern is hierarchical. At the smallest level we have a cell:</p>
<div class="uqbar-book">
    <a href="../_images/lilypond-bcc299ca375a609337a5ed66d0f59d14a946253d00d4fe89d405b92a6e126bbd.ly"><img src="../_images/lilypond-bcc299ca375a609337a5ed66d0f59d14a946253d00d4fe89d405b92a6e126bbd.cropped.svg"/></a>
</div><p>There are two of these cells per measure. Notice that the cells are strictly
contained within the measure: no cell crosses a barline. So, the next level in
the hierarchy is the measure.  Notice that time signatures change and that
these changes occur independently for each staff. Thus, the staff is the next
level in the hierarchy.  Finally there’s the piano staff, which is composed of
the right hand staff and the left hand staff.</p>
<p>In what follows we will model this structure bottom to top: cell, measure,
staff, piano staff, score.</p>
<div class="section" id="the-cell">
<h2>The cell<a class="headerlink" href="#the-cell" title="Permalink to this headline">¶</a></h2>
<p>Observe the following characteristic of the cell:</p>
<p>1. It is composed of two layers: the top one which is an octave “chord” and the
bottom one which is a straight eighth note run.</p>
<p>2. The total duration of the cell can vary, and is always the sum of the
eight note runs.</p>
<p>3. The eight note runs are always stem down while the octave “chord” is always
stem up.</p>
<p>4. The eight note runs are always beamed together and slurred, and the first
two notes always have the dynamic markings ‘f’ ‘p’.</p>
<p>The two “layers” of the cell we will model with two Voices inside a
simultaneous Container. The top Voice will hold the octave “chord” while the
lower Voice will hold the eighth note run. First the eighth notes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pitches</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">NoteMaker</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">notes</span> <span class="o">=</span> <span class="n">maker</span><span class="p">(</span><span class="n">pitches</span><span class="p">,</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">beam</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">slur</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Dynamic</span><span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">),</span> <span class="n">notes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Dynamic</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">),</span> <span class="n">notes</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">voice_lower</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">voice_lower</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;rh_lower&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">command</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\voiceTwo&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">leaf</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">voice_lower</span><span class="p">)</span><span class="o">.</span><span class="n">leaf</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">voice_lower</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-abceb243de96c0d929d4205faca9965a76fc841c70393a2dd6d4737100dca30a.ly"><img src="../_images/lilypond-abceb243de96c0d929d4205faca9965a76fc841c70393a2dd6d4737100dca30a.cropped.svg"/></a>
</div><p>The notes belonging to the eighth note run are first beamed and slurred. Then
we add the dynamics to the first two notes, and finally we put them inside
a Voice. After naming the voice we number it <code class="docutils literal notranslate"><span class="pre">2</span></code> so that the stems of the
notes point down.</p>
<p>Now we construct the octave:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pitches</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chord</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Chord</span><span class="p">([</span><span class="n">pitches</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pitches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">12</span><span class="p">],</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">articulation</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Articulation</span><span class="p">(</span><span class="s2">&quot;&gt;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">articulation</span><span class="p">,</span> <span class="n">chord</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">voice_higher</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">([</span><span class="n">chord</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">voice_higher</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;rh_higher&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">command</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\voiceOne&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">voice_higher</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">voice_higher</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-1010385fcd97d37dc0aea617fbfdc47d45c360e1e8a08817c12b183cfa74cfb7.ly"><img src="../_images/lilypond-1010385fcd97d37dc0aea617fbfdc47d45c360e1e8a08817c12b183cfa74cfb7.cropped.svg"/></a>
</div><p>The duration of the chord is half the duration of the running eighth notes if
the duration of the running notes is divisible by two. Otherwise the duration
of the chord is the next integer greater than this half.  We add the
articulation marking and finally ad the Chord to a Voice, to which we set the
number to 1, forcing the stem to always point up.</p>
<p>Finally we combine the two voices in a simultaneous container which results in
a complete cell:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">voices</span> <span class="o">=</span> <span class="p">[</span><span class="n">voice_lower</span><span class="p">,</span> <span class="n">voice_higher</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="n">voices</span><span class="p">,</span> <span class="n">simultaneous</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">container</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-7c85f11adb0fd1e483bf08ed5c9c067a6147c8ba901d732ec2f0f3bdcf469672.ly"><img src="../_images/lilypond-7c85f11adb0fd1e483bf08ed5c9c067a6147c8ba901d732ec2f0f3bdcf469672.cropped.svg"/></a>
</div><p>Because this cell appears over and over again, we want to reuse this code to
generate any number of these cells. We here encapsulate it in a function that
will take only a list of pitches.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">make_desordre_cell</span><span class="p">(</span><span class="n">pitches</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Makes a Désordre cell.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">notes</span> <span class="o">=</span> <span class="p">[</span><span class="n">abjad</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">pitch</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span> <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="n">pitches</span><span class="p">]</span>
    <span class="n">notes</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Selection</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
    <span class="n">abjad</span><span class="o">.</span><span class="n">beam</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
    <span class="n">abjad</span><span class="o">.</span><span class="n">slur</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Dynamic</span><span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">),</span> <span class="n">notes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Dynamic</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">),</span> <span class="n">notes</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

    <span class="c1"># make the lower voice</span>
    <span class="n">lower_voice</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
    <span class="n">lower_voice</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;RH_Lower_Voice&quot;</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\voiceTwo&quot;</span><span class="p">)</span>
    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">lower_voice</span><span class="p">)</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pitches</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">))</span>
    <span class="n">chord</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Chord</span><span class="p">([</span><span class="n">pitches</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pitches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">12</span><span class="p">],</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Articulation</span><span class="p">(</span><span class="s2">&quot;&gt;&quot;</span><span class="p">),</span> <span class="n">chord</span><span class="p">)</span>

    <span class="c1"># make the upper voice</span>
    <span class="n">upper_voice</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Voice</span><span class="p">([</span><span class="n">chord</span><span class="p">])</span>
    <span class="n">upper_voice</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;RH_Upper_Voice&quot;</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\voiceOne&quot;</span><span class="p">)</span>
    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">upper_voice</span><span class="p">)</span>

    <span class="c1"># combine them together</span>
    <span class="n">voices</span> <span class="o">=</span> <span class="p">[</span><span class="n">lower_voice</span><span class="p">,</span> <span class="n">upper_voice</span><span class="p">]</span>
    <span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="n">voices</span><span class="p">,</span> <span class="n">simultaneous</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># make all 1/8 beats breakable</span>
    <span class="n">leaves</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">lower_voice</span><span class="p">)</span><span class="o">.</span><span class="n">leaves</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">leaf</span> <span class="ow">in</span> <span class="n">leaves</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">bar_line</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">BarLine</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">bar_line</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">container</span>
</pre></div>
</div>
<p>Now we can call this function to create any number of cells. That was
actually the hardest part of reconstructing the opening of Ligeti’s “Désordre.”
Because the repetition of patters occurs also at the level of measures and
staves, we will now define functions to create these other higher level
constructs.</p>
</div>
<div class="section" id="the-measure">
<h2>The measure<a class="headerlink" href="#the-measure" title="Permalink to this headline">¶</a></h2>
<p>We define a function to create a measure from a list of lists of numbers.</p>
<p>The function is very simple. It simply creates a DynamicMeasure and then
populates it with cells that are created internally with the function
previously defined. The function takes a list <cite>pitches</cite> which is actually a
list of lists of pitches (e.g., <code class="docutils literal notranslate"><span class="pre">[[1,2,3],</span> <span class="pre">[2,3,4]]</span></code>. The list of lists of
pitches is iterated to create each of the cells to be appended to the
DynamicMeasures. We could have defined the function to take ready made cells
directly, but we are building the hierarchy of functions so that we can pass
simple lists of lists of numbers to generate the full structure.  To construct
a Ligeti measure we would call the function like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pitches</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">measure</span> <span class="o">=</span> <span class="n">ligeti</span><span class="o">.</span><span class="n">make_desordre_measure</span><span class="p">(</span><span class="n">pitches</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">measure</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-c245f14ce27104f0d1f2f4f0853e78572635fb7d09ab9efe91aa5a8088073350.ly"><img src="../_images/lilypond-c245f14ce27104f0d1f2f4f0853e78572635fb7d09ab9efe91aa5a8088073350.cropped.svg"/></a>
</div></div>
<div class="section" id="the-staff">
<h2>The staff<a class="headerlink" href="#the-staff" title="Permalink to this headline">¶</a></h2>
<p>Now we move up to the next level, the staff.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">make_desordre_measure</span><span class="p">(</span><span class="n">pitches</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Makes a measure composed of Désordre cells.</span>

<span class="sd">    ``pitches`` is a nested list of integers, like [[1, 2, 3], [2, 3, 4]].</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">sequence</span> <span class="ow">in</span> <span class="n">pitches</span><span class="p">:</span>
        <span class="n">container</span> <span class="o">=</span> <span class="n">make_desordre_cell</span><span class="p">(</span><span class="n">sequence</span><span class="p">)</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">container</span><span class="p">)</span><span class="o">.</span><span class="n">duration</span><span class="p">()</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">NonreducedFraction</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
        <span class="n">time_signature</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
        <span class="n">leaf</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">container</span><span class="p">)</span><span class="o">.</span><span class="n">leaf</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">time_signature</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">container</span>
</pre></div>
</div>
<p>The function again takes a plain list as argument. The list must be a list of
lists (for measures) of lists (for cells) of pitches. The function simply
constructs the Ligeti measures internally by calling our previously defined
function and puts them inside a Staff.  As with measures, we can now create
full measure sequences with this new function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pitches</span> <span class="o">=</span> <span class="p">[[[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]],</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">ligeti</span><span class="o">.</span><span class="n">make_desordre_staff</span><span class="p">(</span><span class="n">pitches</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-9eab5648eed7acede15ea83a9d8532e0396fc84b2171189a5d2497049a9b92ea.ly"><img src="../_images/lilypond-9eab5648eed7acede15ea83a9d8532e0396fc84b2171189a5d2497049a9b92ea.cropped.svg"/></a>
</div></div>
<div class="section" id="the-score">
<h2>The score<a class="headerlink" href="#the-score" title="Permalink to this headline">¶</a></h2>
<p>Finally a function that will generate the whole opening section of the piece
“Désordre”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">make_desordre_score</span><span class="p">(</span><span class="n">pitches</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Makes Désordre score.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">pitches</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
    <span class="n">staff_group</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">StaffGroup</span><span class="p">(</span><span class="n">lilypond_type</span><span class="o">=</span><span class="s2">&quot;PianoStaff&quot;</span><span class="p">)</span>

    <span class="c1"># build the music</span>
    <span class="k">for</span> <span class="n">hand</span> <span class="ow">in</span> <span class="n">pitches</span><span class="p">:</span>
        <span class="n">staff</span> <span class="o">=</span> <span class="n">make_desordre_staff</span><span class="p">(</span><span class="n">hand</span><span class="p">)</span>
        <span class="n">staff_group</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>

    <span class="c1"># set clef and key signature to left hand staff</span>
    <span class="n">leaf</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">staff_group</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">leaf</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s2">&quot;bass&quot;</span><span class="p">),</span> <span class="n">leaf</span><span class="p">)</span>
    <span class="n">key_signature</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">KeySignature</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;major&quot;</span><span class="p">)</span>
    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">key_signature</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>

    <span class="c1"># wrap the piano staff in a score</span>
    <span class="n">score</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Score</span><span class="p">([</span><span class="n">staff_group</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">score</span>
</pre></div>
</div>
<p>The function creates a piano staff, constructs staves with Ligeti music and
then appends these to the empty piano staff. Finally it sets the clef and key
signature of the lower staff to match the original score.  The argument of the
function is a list of length 2, depth 3. The first element in the list
corresponds to the upper staff, the second to the lower staff.</p>
<p>The final result:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">upper</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="p">[[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]],</span>
<span class="gp">... </span>    <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]],</span>
<span class="gp">... </span>    <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">]],</span>
<span class="gp">... </span>    <span class="p">[[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">]],</span>
<span class="gp">... </span>    <span class="p">[[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">]],</span>
<span class="gp">... </span>    <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">]],</span>
<span class="gp">... </span>    <span class="p">[[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]],</span>
<span class="gp">... </span>    <span class="p">[[</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">]],</span>
<span class="gp">... </span>    <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">]],</span>
<span class="gp">... </span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lower</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="p">[[</span><span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span>
<span class="gp">... </span>    <span class="p">[[</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span>
<span class="gp">... </span>    <span class="p">[[</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>
<span class="gp">... </span>    <span class="p">[[</span><span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>
<span class="gp">... </span>    <span class="p">[[</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">]],</span>
<span class="gp">... </span>    <span class="p">[[</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">]],</span>
<span class="gp">... </span>    <span class="p">[[</span><span class="o">-</span><span class="mi">14</span><span class="p">,</span> <span class="o">-</span><span class="mi">11</span><span class="p">,</span> <span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">14</span><span class="p">,</span> <span class="o">-</span><span class="mi">11</span><span class="p">,</span> <span class="o">-</span><span class="mi">9</span><span class="p">]],</span>
<span class="gp">... </span>    <span class="p">[[</span><span class="o">-</span><span class="mi">11</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span>
<span class="gp">... </span>    <span class="p">[[</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span>
<span class="gp">... </span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">ligeti</span><span class="o">.</span><span class="n">make_desordre_score</span><span class="p">([</span><span class="n">upper</span><span class="p">,</span> <span class="n">lower</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lilypond_file</span> <span class="o">=</span> <span class="n">ligeti</span><span class="o">.</span><span class="n">make_desordre_lilypond_file</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">lilypond_file</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-517a72b674d1bff559ea0e2570e7fe7294f1aef2e1d44ef31f9256392b1e0a94.ly"><img src="../_images/lilypond-517a72b674d1bff559ea0e2570e7fe7294f1aef2e1d44ef31f9256392b1e0a94.cropped.svg"/></a>
</div><p>Now that we have the redundant aspect of the piece compactly expressed and
encapsulated, we can play around with it by changing the sequence of pitches.</p>
<p>In order for each staff to carry its own sequence of independent measure
changes, LilyPond requires some special setup prior to rendering. Specifically,
one must move the LilyPond <code class="docutils literal notranslate"><span class="pre">Timing_translator</span></code> out from the score context and
into the staff context. (You can refer to the LilyPond documentation on
<a class="reference external" href="http://lilypond.org/doc/v2.12/Documentation/user/lilypond/Displaying-rhythms#Polymetric-notation">Polymetric notation</a>
to learn all about how this works. In this example we defined a custom function
to set up our LilyPond file automatically.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mozart.html" class="btn btn-neutral float-right" title="Mozart: Musikalisches Würfelspiel" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ferneyhough.html" class="btn btn-neutral float-left" title="Ferneyhough: Unsichtbare Farben" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2008-2019, Trevor Bača &amp; Josiah Wolf Oberholtzer
      <span class="lastupdated">
        Last updated on Dec 18, 2019.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>