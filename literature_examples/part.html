

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Pärt: Cantus in Memory of Benjamin Britten &mdash; Abjad 3.1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script defer="defer" type="text/javascript" src="../_static/copybutton.js"></script>
        <script type="text/javascript" src="../_static/ga.js"></script>
        <script defer="defer" type="text/javascript" src="../_static/lightbox2/js/lightbox.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/abjad.css" type="text/css" />
  <link rel="stylesheet" href="../_static/uqbar.css" type="text/css" />
  <link rel="stylesheet" href="../_static/lightbox2/css/lightbox.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Core concepts" href="../core_concepts/index.html" />
    <link rel="prev" title="Mozart: Musikalisches Würfelspiel" href="mozart.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Abjad
          

          
            
            <img src="../_static/abjad-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../gallery.html">Score gallery</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../for_beginners/index.html">For beginners</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Literature examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="bartok.html">Bartók: <em>Mikrokosmos</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="ferneyhough.html">Ferneyhough: <em>Unsichtbare Farben</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="ligeti.html">Ligeti: “Désordre”</a></li>
<li class="toctree-l2"><a class="reference internal" href="mozart.html">Mozart: <em>Musikalisches Würfelspiel</em></a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Pärt: <em>Cantus in Memory of Benjamin Britten</em></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-string-music">The string music</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-indicators">The indicators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-lilypond-file">The LilyPond file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../core_concepts/index.html">Core concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_manual/index.html">Reference manual</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Abjad API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendices/index.html">Appendices</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Abjad</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Literature examples</a> &raquo;</li>
        
      <li>Pärt: <em>Cantus in Memory of Benjamin Britten</em></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/literature_examples/part.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="part-cantus-in-memory-of-benjamin-britten">
<h1>Pärt: <em>Cantus in Memory of Benjamin Britten</em><a class="headerlink" href="#part-cantus-in-memory-of-benjamin-britten" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure to install <code class="docutils literal notranslate"><span class="pre">abjad-ext-tonality</span></code> before running this demo.</p>
</div>
<p>Let’s start with some imports:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">abjad</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">copy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">abjad.demos</span> <span class="kn">import</span> <span class="n">part</span>
</pre></div>
</div>
<div class="section" id="the-string-music">
<h2>The string music<a class="headerlink" href="#the-string-music" title="Permalink to this headline">¶</a></h2>
<p>Creating the music for the strings is a bit more involved, but conceptually
falls into two steps.  First, we’ll procedurally generate basic pitches and
rhythms for all string voices.  Then, we’ll make edits to the generated
material by hand.  The entire process is encapsulated in a function.</p>
<p>The pitch material is the same for all of the strings: a descending a-minor
scale, generally decorated with diads.  But, each instrument uses a different
overall range, with the lower instrument playing slower and slower than the
higher instruments, creating a sort of mensuration canon.</p>
<p>For each instrument, the descending scale is fragmented into what we’ll call
“descents”.  The first descent uses only the first note of that instrument’s
scale, while the second descent adds the second note, and the third another.
We’ll generate as many descents per instruments as there are pitches in its
overall scale.</p>
<p>Here’s what the first 10 descents for the first violin look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">reservoir</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">create_pitch_contour_reservoir</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">descent</span> <span class="o">=</span> <span class="n">reservoir</span><span class="p">[</span><span class="s2">&quot;First Violin&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">descent</span><span class="p">))</span>
<span class="gp">... </span>
<span class="go">a&#39;&#39;&#39;</span>
<span class="go">a&#39;&#39;&#39; g&#39;&#39;&#39;</span>
<span class="go">a&#39;&#39;&#39; g&#39;&#39;&#39; f&#39;&#39;&#39;</span>
<span class="go">a&#39;&#39;&#39; g&#39;&#39;&#39; f&#39;&#39;&#39; e&#39;&#39;&#39;</span>
<span class="go">a&#39;&#39;&#39; g&#39;&#39;&#39; f&#39;&#39;&#39; e&#39;&#39;&#39; d&#39;&#39;&#39;</span>
<span class="go">a&#39;&#39;&#39; g&#39;&#39;&#39; f&#39;&#39;&#39; e&#39;&#39;&#39; d&#39;&#39;&#39; c&#39;&#39;&#39;</span>
<span class="go">a&#39;&#39;&#39; g&#39;&#39;&#39; f&#39;&#39;&#39; e&#39;&#39;&#39; d&#39;&#39;&#39; c&#39;&#39;&#39; b&#39;&#39;</span>
<span class="go">a&#39;&#39;&#39; g&#39;&#39;&#39; f&#39;&#39;&#39; e&#39;&#39;&#39; d&#39;&#39;&#39; c&#39;&#39;&#39; b&#39;&#39; a&#39;&#39;</span>
<span class="go">a&#39;&#39;&#39; g&#39;&#39;&#39; f&#39;&#39;&#39; e&#39;&#39;&#39; d&#39;&#39;&#39; c&#39;&#39;&#39; b&#39;&#39; a&#39;&#39; g&#39;&#39;</span>
<span class="go">a&#39;&#39;&#39; g&#39;&#39;&#39; f&#39;&#39;&#39; e&#39;&#39;&#39; d&#39;&#39;&#39; c&#39;&#39;&#39; b&#39;&#39; a&#39;&#39; g&#39;&#39; f&#39;&#39;</span>
</pre></div>
</div>
<p>Next we add diads to all of the descents, except for the viola’s.  We’ll use a
dictionary as a lookup table, to tell us what interval to add below a given
pitch class.</p>
<p>Finally, we’ll add rhythms to the pitch contours we’ve been constructing.  Each
string instrument plays twice as slow as the string instrument above it in the
score.  Additionally, all the strings start with some rests, and use a
“long-short” pattern for their rhythms.</p>
<p>Let’s see what a few of those look like.  First, we’ll build the entire
reservoir from scratch, so you can see the process:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pitch_contour_reservoir</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">create_pitch_contour_reservoir</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shadowed_contour_reservoir</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">shadow_pitch_contour_reservoir</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">pitch_contour_reservoir</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">durated_reservoir</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">durate_pitch_contour_reservoir</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">shadowed_contour_reservoir</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Then we’ll grab the sub-reservoir for the first violins, taking the first ten
descents (which includes the silences we’ve been adding as well).  We’ll label
each descent with some markup, to distinguish them, throw them into a Staff and
give them a 6/4 time signature, just so they line up properly.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">descents</span> <span class="o">=</span> <span class="n">durated_reservoir</span><span class="p">[</span><span class="s2">&quot;First Violin&quot;</span><span class="p">][:</span><span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">descent</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">descents</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">markup</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span>
<span class="gp">... </span>        <span class="sa">r</span><span class="s2">&quot;\rounded-box \bold </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">direction</span><span class="o">=</span><span class="n">abjad</span><span class="o">.</span><span class="n">Up</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">descent</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">... </span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">sequence</span><span class="p">(</span><span class="n">descents</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_signature</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">leaf</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">leaf</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">time_signature</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">show</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-77a0b4eeb9334abef1da20cd3cb650f9f6bd6fc0f1597ad449409464752052a9.ly"><img src="../_images/lilypond-77a0b4eeb9334abef1da20cd3cb650f9f6bd6fc0f1597ad449409464752052a9.cropped.svg"/></a>
</div><p>Let’s look at the second violins too:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">descents</span> <span class="o">=</span> <span class="n">durated_reservoir</span><span class="p">[</span><span class="s2">&quot;Second Violin&quot;</span><span class="p">][:</span><span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">descent</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">descents</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">markup</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span>
<span class="gp">... </span>        <span class="sa">r</span><span class="s2">&quot;\rounded-box \bold </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">direction</span><span class="o">=</span><span class="n">abjad</span><span class="o">.</span><span class="n">Up</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">descent</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">... </span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">sequence</span><span class="p">(</span><span class="n">descents</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_signature</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">leaf</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">leaf</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">time_signature</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">show</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-d49eb4873ccc760c4d9bf49ceb2858941d51950f8231364218f456e2591dd7b7.ly"><img src="../_images/lilypond-d49eb4873ccc760c4d9bf49ceb2858941d51950f8231364218f456e2591dd7b7.cropped.svg"/></a>
</div><p>And, last we’ll take a peek at the violas.  They have some longer notes, so
we’ll split their music cyclically every 3 half notes, just so nothing crosses
the bar lines accidentally:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">descents</span> <span class="o">=</span> <span class="n">durated_reservoir</span><span class="p">[</span><span class="s2">&quot;Viola&quot;</span><span class="p">][:</span><span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">descent</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">descents</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">markup</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Markup</span><span class="p">(</span>
<span class="gp">... </span>        <span class="sa">r</span><span class="s2">&quot;\rounded-box \bold </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">direction</span><span class="o">=</span><span class="n">abjad</span><span class="o">.</span><span class="n">Up</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">descent</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">... </span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="n">descents</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shards</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">split</span><span class="p">([(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)],</span> <span class="n">cyclic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_signature</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">leaf</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">leaf</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">time_signature</span><span class="p">,</span> <span class="n">leaf</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
</pre></div>
</div>
<div class="uqbar-book">
    <a href="../_images/lilypond-4b701b107c3f9f5ce3d3b51adade330280e0cb174a80a8e1e2c36ab6b470f502.ly"><img src="../_images/lilypond-4b701b107c3f9f5ce3d3b51adade330280e0cb174a80a8e1e2c36ab6b470f502.cropped.svg"/></a>
</div><p>You can see how each part is twice as slow as the previous, and starts a little
bit later too.</p>
</div>
<div class="section" id="the-indicators">
<h2>The indicators<a class="headerlink" href="#the-indicators" title="Permalink to this headline">¶</a></h2>
<p>Now we’ll apply various kinds of marks, including dynamics, articulations,
bowing indications, expressive instructures, page breaks and rehearsal marks.</p>
<p>We’ll start with the bowing marks.  This involves creating a piece of custom
markup to indicate rebowing.  We accomplish this by aggregating together some
<code class="docutils literal notranslate"><span class="pre">abjad.MarkupCommand</span></code> and <code class="docutils literal notranslate"><span class="pre">abjad.MusicGlyph</span></code> objects.  The completed
<code class="docutils literal notranslate"><span class="pre">abjad.Markup</span></code> object is then copied and attached at the correct locations in
the score.</p>
<p>Why copy it?  An indicator can only be attached to a single leaf.  If we
attached the original piece of markup to each of our target components in turn,
only the last would actually receive the markup, as it would have be detached
from the preceding components.</p>
<p>After dealing with custom markup, applying dynamics is easy.  Just instantiate
and attach.</p>
<p>We apply expressive marks the same way we applied our dynamics.</p>
<p>We use the <code class="docutils literal notranslate"><span class="pre">abjad.LilyPondCommand</span></code> to create LilyPond system breaks,
and attach them to measures in the percussion part.  After this, our score will
break in the exact same places as the original.</p>
<p>We’ll make the rehearsal marks the exact same way we made our line breaks.</p>
<p>And then we add our final bar lines: instantiate and attach.</p>
</div>
<div class="section" id="the-lilypond-file">
<h2>The LilyPond file<a class="headerlink" href="#the-lilypond-file" title="Permalink to this headline">¶</a></h2>
<p>Finally, we create some functions to apply formatting directives to our score,
then wrap it into a <code class="docutils literal notranslate"><span class="pre">LilyPondFile</span></code> and apply some more formatting.</p>
<p>In our <code class="docutils literal notranslate"><span class="pre">part.configure_score()</span></code> functions, we use <code class="docutils literal notranslate"><span class="pre">abjad.SpacingVector</span></code> to
create the correct Scheme construct to tell LilyPond how to handle vertical
space for its staves and staff groups. You should consult LilyPond’s vertical
spacing documentation for a complete explanation of what this Scheme code
means:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spacing_vector</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">SpacingVector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">format</span><span class="p">(</span><span class="n">spacing_vector</span><span class="p">))</span>
<span class="go">#&#39;((basic-distance . 0) (minimum-distance . 0) (padding . 8) (stretchability . 0))</span>
</pre></div>
</div>
<p>In our <code class="docutils literal notranslate"><span class="pre">part.configure_lilypond_file()</span></code> function, we need to construct a
ContextBlock definition in order to tell LilyPond to hide empty staves, and
additionally to hide empty staves if they appear in the first system.</p>
<p>Let’s run our original toplevel function to build the complete score:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lilypond_file</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">make_part_lilypond_file</span><span class="p">()</span>
</pre></div>
</div>
<p>And here we show it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">lilypond_file</span><span class="p">)</span>
</pre></div>
</div>
<div class="table-row"><a data-lightbox="group-lilypond-09cd74c95483308acbd8f0ec12a46ed71f7874eb8856fe49d744c4494baa8c56" href="../_images/lilypond-09cd74c95483308acbd8f0ec12a46ed71f7874eb8856fe49d744c4494baa8c56-1.svg" title="" data-title="" class="table-cell thumbnail">
    <img src="../_images/lilypond-09cd74c95483308acbd8f0ec12a46ed71f7874eb8856fe49d744c4494baa8c56-1.svg" alt=""/>
</a><a data-lightbox="group-lilypond-09cd74c95483308acbd8f0ec12a46ed71f7874eb8856fe49d744c4494baa8c56" href="../_images/lilypond-09cd74c95483308acbd8f0ec12a46ed71f7874eb8856fe49d744c4494baa8c56-2.svg" title="" data-title="" class="table-cell thumbnail">
    <img src="../_images/lilypond-09cd74c95483308acbd8f0ec12a46ed71f7874eb8856fe49d744c4494baa8c56-2.svg" alt=""/>
</a></div><p>Note that we only show the first two pages as the <em>Cantus</em> is still under
copyright. Please visit the Universal Editions website to purchase the complete
score for performance.</p>
<p>Explore the <code class="docutils literal notranslate"><span class="pre">abjad/demos/part</span></code> directory for the complete code to this
example, or import it into your Python session directly with <code class="docutils literal notranslate"><span class="pre">from</span>
<span class="pre">abjad.demos</span> <span class="pre">import</span> <span class="pre">part</span></code>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../core_concepts/index.html" class="btn btn-neutral float-right" title="Core concepts" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="mozart.html" class="btn btn-neutral float-left" title="Mozart: Musikalisches Würfelspiel" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2008-2019, Trevor Bača &amp; Josiah Wolf Oberholtzer
      <span class="lastupdated">
        Last updated on Dec 18, 2019.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>